(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,38518,e=>{"use strict";let t=(0,e.i(3645).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],38518)},76016,e=>{"use strict";let t=(0,e.i(3645).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],76016)},53885,e=>{"use strict";let t=(0,e.i(3645).default)("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]);e.s(["Store",()=>t],53885)},75112,e=>{"use strict";let t=(0,e.i(3645).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],75112)},35e3,e=>{"use strict";let t=(0,e.i(3645).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],35e3)},21997,e=>{"use strict";let t=(0,e.i(3645).default)("chart-no-axes-column",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]]);e.s(["BarChart2",()=>t],21997)},25650,e=>{"use strict";var t=e.i(87433),s=e.i(44440),a=e.i(38518),l=e.i(83428),r=e.i(75112),n=e.i(35e3),i=e.i(48703),c=e.i(23608);let o=(0,e.i(3645).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var d=e.i(76016),x=e.i(21997),h=e.i(53885),u=e.i(13370),m=e.i(62924),p=e.i(52736),f=e.i(88083),b=e.i(98992);function j(){let e,{data:j}=(0,u.useSession)(),g=(0,m.useRouter)(),{darkMode:N,toggleDarkMode:y,accent:w,setAccent:v,themeClasses:k}=(0,p.useMobileTheme)(),[S,C]=(0,s.useState)("NONE"),[$,E]=(0,s.useState)(!1),[O,R]=(0,s.useState)(!1),[D,T]=(0,s.useState)({startDate:"",endDate:"",reason:""}),[L,z]=(0,s.useState)({walkIns:"",conversions:"",marketIntel:"",notes:""}),[A,I]=(0,s.useState)(null);(0,s.useEffect)(()=>{fetch("/api/mobile/init").then(e=>e.json()).then(I)},[]);let M=async e=>{let t=e.target.files?.[0];if(!t)return;if(t.size>2097152)return void b.toast.error("Image too large (Max 2MB)");let s=new FileReader;s.onload=async e=>{let t=e.target?.result;if("string"==typeof t){I(e=>({...e,image:t}));try{(await fetch("/api/mobile/profile/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:t})})).ok?b.toast.success("Profile Photo Updated"):b.toast.error("Upload Failed")}catch(e){b.toast.error("Network Error")}}},s.readAsDataURL(t)},q=async e=>{e.preventDefault(),E(!0);let t={type:"Annual Leave",startDate:D.startDate,endDate:D.endDate,reason:D.reason};try{if(!navigator.onLine)throw Error("Offline");if((await fetch("/api/hr/leaves",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)R(!0),setTimeout(()=>{C("NONE"),R(!1)},2e3);else throw Error("Server Error")}catch(e){console.log("Network failed, queuing offline..."),f.SyncQueue.enqueue("LEAVE",t),b.toast.success("Saved Offline. Will sync when online.",{icon:"ðŸ“¡"}),R(!0),setTimeout(()=>{C("NONE"),R(!1)},2e3)}finally{E(!1)}},P=async e=>{e.preventDefault(),E(!0);let t={walkIns:L.walkIns,conversions:L.conversions,marketIntel:L.marketIntel,notes:L.notes};try{if(!navigator.onLine)throw Error("Offline");if((await fetch("/api/operations/reports",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)R(!0),setTimeout(()=>{C("NONE"),R(!1)},2e3);else throw Error("Server Error")}catch(e){console.log("Network failed, queuing offline..."),f.SyncQueue.enqueue("REPORT",t),b.toast.success("Saved Offline. Will sync when online.",{icon:"ðŸ“¡"}),R(!0),setTimeout(()=>{C("NONE"),R(!1)},2e3)}finally{E(!1)}};return(0,t.jsxs)("div",{className:`min-h-screen font-sans pb-32 transition-colors duration-500 ${k.bg}`,children:[(0,t.jsxs)("div",{className:`px-6 py-6 border-b sticky top-0 z-20 shadow-sm flex items-center gap-4 ${k.nav} ${k.border}`,children:[(0,t.jsx)("button",{onClick:()=>g.back(),className:`p-2 rounded-full ${N?"bg-slate-800 text-white":"bg-slate-100 text-slate-600"}`,children:(0,t.jsx)(a.ArrowLeft,{className:"w-5 h-5"})}),(0,t.jsx)("h1",{className:`text-lg font-black tracking-tight ${k.text}`,children:"Terminal Vibe"})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)("div",{className:`rounded-[2.5rem] p-8 text-center border shadow-xl relative overflow-hidden ${k.card} ${k.border}`,children:(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsxs)("div",{className:"relative w-24 h-24 mx-auto mb-4 group",children:[(0,t.jsx)("div",{className:`w-24 h-24 rounded-[2rem] overflow-hidden border-4 ${N?"border-slate-700":"border-white"} shadow-lg`,children:A?.image?(0,t.jsx)("img",{src:A.image,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full bg-slate-900 flex items-center justify-center text-white text-2xl font-black",children:j?.user?.name?.charAt(0)})}),(0,t.jsxs)("label",{className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-[2rem] cursor-pointer",children:[(0,t.jsx)("span",{className:"text-xs font-bold text-white uppercase",children:"Upload"}),(0,t.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:M})]})]}),(0,t.jsx)("h2",{className:`text-lg font-black ${k.text}`,children:j?.user?.name}),(0,t.jsxs)("p",{className:"text-[10px] font-black text-blue-500 uppercase tracking-widest mt-2 flex items-center justify-center gap-2",children:[(0,t.jsx)(h.Store,{size:12})," ",A?.shopName||"Syncing Hub..."]})]})}),(0,t.jsxs)("button",{onClick:()=>g.push("/mobilepos/report"),className:`w-full p-5 rounded-3xl border flex items-center justify-between shadow-sm active:scale-95 transition-all group ${k.card} ${k.border}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-blue-500/10 text-blue-500",children:(0,t.jsx)(x.BarChart2,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{className:`font-black text-sm ${k.text}`,children:"Daily Report"}),(0,t.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Walk-ins & Sales Intel"})]})]}),(0,t.jsx)(d.ChevronRight,{className:"w-5 h-5 text-slate-300"})]}),(0,t.jsxs)("button",{onClick:()=>C("LEAVE"),className:`w-full p-5 rounded-3xl border flex items-center justify-between shadow-sm active:scale-95 transition-all group ${k.card} ${k.border}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-amber-500/10 text-amber-500",children:(0,t.jsx)(i.Calendar,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{className:`font-black text-sm ${k.text}`,children:"Apply for Leave"}),(0,t.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Request Time Off"})]})]}),(0,t.jsx)(d.ChevronRight,{className:"w-5 h-5 text-slate-300"})]}),(0,t.jsxs)("button",{onClick:()=>C("HISTORY"),className:`w-full p-5 rounded-3xl border flex items-center justify-between shadow-sm active:scale-95 transition-all group ${k.card} ${k.border}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${N?"bg-slate-700 text-white":"bg-slate-100 text-slate-500"}`,children:(0,t.jsx)(o,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{className:`font-black text-sm ${k.text}`,children:"My History"}),(0,t.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Past Reports & Requests"})]})]}),(0,t.jsx)(d.ChevronRight,{className:"w-5 h-5 text-slate-300"})]}),(0,t.jsx)("div",{className:`p-6 rounded-[2rem] border shadow-sm space-y-6 ${k.card} ${k.border}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:`font-bold text-sm ${k.text}`,children:"Dark Mode"}),(0,t.jsx)("button",{onClick:y,className:`w-12 h-6 rounded-full p-1 transition-colors ${N?"bg-blue-600":"bg-slate-200"}`,children:(0,t.jsx)("div",{className:`w-4 h-4 bg-white rounded-full transition-transform ${N?"translate-x-6":"translate-x-0"}`})})]})}),(0,t.jsxs)("button",{onClick:()=>(0,u.signOut)(),className:"w-full py-5 bg-red-500/10 text-red-500 font-black text-xs uppercase tracking-[0.2em] border border-red-500/20 rounded-2xl flex items-center justify-center gap-2",children:[(0,t.jsx)(c.LogOut,{size:16})," Exit Terminal"]})]}),"NONE"!==S&&(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:(0,t.jsx)("div",{className:`w-full max-w-md rounded-t-[3rem] p-8 shadow-2xl animate-in slide-in-from-bottom-10 duration-300 ${N?"bg-slate-800":"bg-white"}`,children:O?(0,t.jsxs)("div",{className:"py-12 text-center",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)(n.CheckCircle2,{size:40,className:"text-emerald-500"})}),(0,t.jsx)("h3",{className:`text-xl font-black uppercase tracking-tight ${k.text}`,children:"Success"}),(0,t.jsx)("p",{className:"text-xs text-slate-400 mt-2",children:"Data Processed Securely"})]}):(0,t.jsxs)("form",{onSubmit:"LEAVE"===S?q:P,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("h3",{className:`text-xl font-black ${k.text}`,children:"LEAVE"===S?"Leave Request":"HISTORY"===S?"My History":"Daily Intel"}),(0,t.jsx)("button",{type:"button",onClick:()=>C("NONE"),className:"p-2 rounded-full hover:bg-slate-100/10 opacity-60",children:(0,t.jsx)(a.ArrowLeft,{size:20,className:k.text})})]}),"HISTORY"===S?(0,t.jsx)(function({darkMode:e}){let[a,r]=(0,s.useState)(null),[n,i]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{fetch("/api/mobile/history").then(e=>e.json()).then(e=>{r(e),i(!1)}).catch(()=>i(!1))},[]),n)?(0,t.jsx)("div",{className:"py-20 flex justify-center",children:(0,t.jsx)(l.Loader2,{className:"animate-spin text-blue-500"})}):a?(0,t.jsxs)("div",{className:"space-y-6 h-[60vh] overflow-y-auto custom-scrollbar pr-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2",children:"Leave Requests"}),(0,t.jsx)("div",{className:"space-y-2",children:0===a.leaves.length?(0,t.jsx)("p",{className:"text-xs opacity-50 italic",children:"No history found."}):a.leaves.map(s=>(0,t.jsxs)("div",{className:`p-3 rounded-xl border ${e?"border-slate-700 bg-slate-800":"border-slate-100 bg-slate-50"}`,children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t.jsx)("span",{className:"text-[10px] font-bold opacity-70",children:new Date(s.startDate).toLocaleDateString()}),(0,t.jsx)("span",{className:`text-[9px] font-black px-2 py-0.5 rounded ${"APPROVED"===s.status?"bg-emerald-500 text-white":"REJECTED"===s.status?"bg-red-500 text-white":"bg-amber-500 text-white"}`,children:s.status})]}),(0,t.jsx)("p",{className:"text-xs font-bold truncate",children:s.reason})]},s.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2",children:"Daily Reports"}),(0,t.jsx)("div",{className:"space-y-2",children:0===a.reports.length?(0,t.jsx)("p",{className:"text-xs opacity-50 italic",children:"No history found."}):a.reports.map(s=>(0,t.jsxs)("div",{className:`p-3 rounded-xl border ${e?"border-slate-700 bg-slate-800":"border-slate-100 bg-slate-50"}`,children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t.jsx)("span",{className:"text-[10px] font-bold opacity-70",children:new Date(s.createdAt).toLocaleDateString()}),(0,t.jsxs)("span",{className:"text-[9px] font-black text-blue-500",children:["GHS ",s.totalSales]})]}),(0,t.jsxs)("p",{className:"text-[10px] font-bold opacity-50",children:["Walk-ins: ",s.walkIns," | Conv: ",s.buyers]})]},s.id))})]})]}):(0,t.jsx)("div",{className:"text-center py-10 opacity-50 font-bold",children:"Failed to load history"})},{darkMode:N}):"REPORT"===S?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Walk-ins"}),(0,t.jsx)("input",{type:"number",required:!0,placeholder:"0",className:`w-full h-14 px-4 rounded-2xl border-none font-bold outline-none ${N?"bg-slate-700 text-white":"bg-slate-50 text-slate-900"}`,onChange:e=>z({...L,walkIns:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Buyers / Conv"}),(0,t.jsx)("input",{type:"number",required:!0,placeholder:"0",className:`w-full h-14 px-4 rounded-2xl border-none font-bold outline-none ${N?"bg-slate-700 text-white":"bg-slate-50 text-slate-900"}`,onChange:e=>z({...L,conversions:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Market Intel (Competitors)"}),(0,t.jsx)("textarea",{placeholder:"Samsung/LG activity...",className:`w-full p-4 rounded-2xl border-none font-bold text-sm min-h-[80px] outline-none resize-none ${N?"bg-slate-700 text-white":"bg-slate-50 text-slate-900"}`,onChange:e=>z({...L,marketIntel:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Staff Notes"}),(0,t.jsx)("textarea",{placeholder:"Any extra feedback...",className:`w-full p-4 rounded-2xl border-none font-bold text-sm min-h-[80px] outline-none resize-none ${N?"bg-slate-700 text-white":"bg-slate-50 text-slate-900"}`,onChange:e=>z({...L,notes:e.target.value})})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Start Date"}),(0,t.jsx)("input",{type:"date",required:!0,className:`w-full h-14 px-4 rounded-2xl border-none font-bold outline-none ${N?"bg-slate-700 text-white":"bg-slate-50 text-slate-900"}`,onChange:e=>T({...D,startDate:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"End Date"}),(0,t.jsx)("input",{type:"date",required:!0,className:`w-full h-14 px-4 rounded-2xl border-none font-bold outline-none ${N?"bg-slate-700 text-white":"bg-slate-50 text-slate-900"}`,onChange:e=>T({...D,endDate:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Reason"}),(0,t.jsx)("textarea",{placeholder:"Explanation...",required:!0,className:`w-full p-4 rounded-2xl border-none font-bold text-sm min-h-[100px] outline-none resize-none ${N?"bg-slate-700 text-white":"bg-slate-50 text-slate-900"}`,onChange:e=>T({...D,reason:e.target.value})})]})]}),"HISTORY"!==S&&(0,t.jsx)("button",{disabled:$,className:"w-full text-white h-16 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-3 shadow-xl active:scale-95 transition-all",style:{backgroundColor:(e={blue:"#3b82f6",purple:"#a855f7",rose:"#f43f5e",amber:"#f59e0b"})[w]||e.blue},children:$?(0,t.jsx)(l.Loader2,{className:"animate-spin",size:20}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Send,{size:16})," Sync to HQ"]})})]})})})]})}e.s(["default",()=>j],25650)}]);