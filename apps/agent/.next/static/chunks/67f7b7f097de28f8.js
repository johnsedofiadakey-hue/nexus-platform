(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,45694,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},38518,e=>{"use strict";let t=(0,e.i(3645).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],38518)},66459,e=>{"use strict";let t=(0,e.i(3645).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],66459)},94365,e=>{"use strict";let t=(0,e.i(3645).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],94365)},53885,e=>{"use strict";let t=(0,e.i(3645).default)("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]);e.s(["Store",()=>t],53885)},3891,e=>{"use strict";let t=(0,e.i(3645).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],3891)},22173,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={assign:function(){return o},searchParamsToUrlQuery:function(){return l},urlQueryToSearchParams:function(){return i}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});function l(e){let t={};for(let[r,s]of e.entries()){let e=t[r];void 0===e?t[r]=s:Array.isArray(e)?e.push(s):t[r]=[e,s]}return t}function n(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;for(let[r,s]of Object.entries(e))if(Array.isArray(s))for(let e of s)t.append(r,n(e));else t.set(r,n(s));return t}function o(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,s]of r.entries())e.append(t,s)}return e}},48077,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={formatUrl:function(){return i},formatWithValidation:function(){return c},urlObjectKeys:function(){return o}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let l=e.r(44066)._(e.r(22173)),n=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:r}=e,s=e.protocol||"",a=e.pathname||"",i=e.hash||"",o=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),o&&"object"==typeof o&&(o=String(l.urlQueryToSearchParams(o)));let d=e.search||o&&`?${o}`||"";return s&&!s.endsWith(":")&&(s+=":"),e.slashes||(!s||n.test(s))&&!1!==c?(c="//"+(c||""),a&&"/"!==a[0]&&(a="/"+a)):c||(c=""),i&&"#"!==i[0]&&(i="#"+i),d&&"?"!==d[0]&&(d="?"+d),a=a.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${s}${c}${a}${d}${i}`}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return i(e)}},36770,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return a}});let s=e.r(44440);function a(e,t){let r=(0,s.useRef)(null),a=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=l(e,s)),t&&(a.current=l(t,s))},[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},98334,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={DecodeError:function(){return b},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return y},NormalizeError:function(){return g},PageNotFoundError:function(){return j},SP:function(){return m},ST:function(){return p},WEB_VITALS:function(){return l},execOnce:function(){return n},getDisplayName:function(){return u},getLocationOrigin:function(){return c},getURL:function(){return d},isAbsoluteUrl:function(){return o},isResSent:function(){return f},loadGetInitialProps:function(){return h},normalizeRepeatedSlashes:function(){return x},stringifyError:function(){return N}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let l=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,r=!1;return(...s)=>(r||(r=!0,t=e(...s)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,o=e=>i.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function d(){let{href:e}=window.location,t=c();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function x(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function h(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await h(t.Component,t.ctx)}:{};let s=await e.getInitialProps(t);if(r&&f(r))return s;if(!s)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${s}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s}let m="u">typeof performance,p=m&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class b extends Error{}class g extends Error{}class j extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class y extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function N(e){return JSON.stringify({message:e.message,stack:e.stack})}},32192,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return l}});let s=e.r(98334),a=e.r(32957);function l(e){if(!(0,s.isAbsoluteUrl)(e))return!0;try{let t=(0,s.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,a.hasBasePath)(r.pathname)}catch(e){return!1}}},92364,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},70065,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={default:function(){return b},useLinkStatus:function(){return j}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let l=e.r(44066),n=e.r(87433),i=l._(e.r(44440)),o=e.r(48077),c=e.r(31270),d=e.r(36770),u=e.r(98334),f=e.r(39468);e.r(45694);let x=e.r(49629),h=e.r(32192),m=e.r(95130);function p(e){return"string"==typeof e?e:(0,o.formatUrl)(e)}function b(t){var r;let s,a,l,[o,b]=(0,i.useOptimistic)(x.IDLE_LINK_STATUS),j=(0,i.useRef)(null),{href:y,as:v,children:N,prefetch:w=null,passHref:k,replace:S,shallow:P,scroll:C,onClick:O,onMouseEnter:E,onTouchStart:L,legacyBehavior:M=!1,onNavigate:_,ref:R,unstable_dynamicOnHover:T,...A}=t;s=N,M&&("string"==typeof s||"number"==typeof s)&&(s=(0,n.jsx)("a",{children:s}));let I=i.default.useContext(c.AppRouterContext),U=!1!==w,$=!1!==w?null===(r=w)||"auto"===r?m.FetchStrategy.PPR:m.FetchStrategy.Full:m.FetchStrategy.PPR,{href:H,as:D}=i.default.useMemo(()=>{let e=p(y);return{href:e,as:v?p(v):e}},[y,v]);if(M){if(s?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});a=i.default.Children.only(s)}let Q=M?a&&"object"==typeof a&&a.ref:R,B=i.default.useCallback(e=>(null!==I&&(j.current=(0,x.mountLinkInstance)(e,H,I,$,U,b)),()=>{j.current&&((0,x.unmountLinkForCurrentNavigation)(j.current),j.current=null),(0,x.unmountPrefetchableInstance)(e)}),[U,H,I,$,b]),z={ref:(0,d.useMergedRef)(B,Q),onClick(t){M||"function"!=typeof O||O(t),M&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(t),!I||t.defaultPrevented||function(t,r,s,a,l,n,o){if("u">typeof window){let c,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,h.isLocalURL)(r)){l&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),o){let e=!1;if(o({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(70701);i.default.startTransition(()=>{u(s||r,l?"replace":"push",n??!0,a.current)})}}(t,H,D,j,S,C,_)},onMouseEnter(e){M||"function"!=typeof E||E(e),M&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),I&&U&&(0,x.onNavigationIntent)(e.currentTarget,!0===T)},onTouchStart:function(e){M||"function"!=typeof L||L(e),M&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),I&&U&&(0,x.onNavigationIntent)(e.currentTarget,!0===T)}};return(0,u.isAbsoluteUrl)(D)?z.href=D:M&&!k&&("a"!==a.type||"href"in a.props)||(z.href=(0,f.addBasePath)(D)),l=M?i.default.cloneElement(a,z):(0,n.jsx)("a",{...A,...z,children:s}),(0,n.jsx)(g.Provider,{value:o,children:l})}e.r(92364);let g=(0,i.createContext)(x.IDLE_LINK_STATUS),j=()=>(0,i.useContext)(g);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},15459,e=>{"use strict";var t=e.i(44440);function r(e,s=300){let[a,l]=(0,t.useState)(e);return(0,t.useEffect)(()=>{let t=setTimeout(()=>{l(e)},s);return()=>{clearTimeout(t)}},[e,s]),a}e.s(["useDebounce",()=>r])},32001,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={callServer:function(){return l.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let l=e.r(93006),n=e.r(84946),i=e.r(79099)},73871,e=>{"use strict";var t=e.i(87433),r=e.i(44440),s=e.i(66459),a=e.i(3645);let l=(0,a.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var n=e.i(3891),i=e.i(93192),o=e.i(94365),c=e.i(83428),d=e.i(73750),u=e.i(43416),f=e.i(38518);let x=(0,a.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),h=(0,a.default)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);var m=e.i(3214);let p=(0,a.default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var b=e.i(53885),g=e.i(70065),j=e.i(98992),y=e.i(32001);let v=(0,y.createServerReference)("7c3dbfd863a6b657ad345b466cbe43860d89e4c224",y.callServer,void 0,y.findSourceMapURL,"processTransaction");var N=e.i(31387),w=e.i(15459);function k(){let{identity:e,inventory:a,loading:y,error:k,refreshInventory:S,updateInventoryItem:P}=(0,N.useMobileData)(),[C,O]=(0,r.useState)([]),[E,L]=(0,r.useState)(""),M=(0,w.useDebounce)(E,300),[_,R]=(0,r.useState)("BROWSE"),[T,A]=(0,r.useState)(!1),[I,U]=(0,r.useState)(""),[$,H]=(0,r.useState)(null),[D,Q]=(0,r.useState)(""),[B,z]=(0,r.useState)(""),[F,V]=(0,r.useState)(!1),G=r.default.useRef(null);(0,r.useEffect)(()=>{e?.shopId&&(G.current&&G.current!==e.shopId&&(O([]),R("BROWSE"),j.toast.info(`ðŸ“¦ Cart cleared - Now serving: ${e.shopName}`,{duration:4e3})),G.current=e.shopId)},[e?.shopId,e?.shopName]);let K=(0,r.useCallback)(e=>{O(t=>{let r=t.find(t=>t.id===e.id),s=r?r.cartQty:0,a=e.stockLevel??e.quantity??0;return s+1>a?(j.toast.error(`Stock Limit! Only ${a} available.`,{duration:2e3}),t):r?t.map(t=>t.id===e.id?{...t,cartQty:t.cartQty+1}:t):[...t,{...e,cartQty:1}]})},[]),q=(0,r.useCallback)(e=>{O(t=>t.filter(t=>t.id!==e))},[]),W=(0,r.useCallback)((e,t)=>{O(r=>r.map(r=>{if(r.id===e){let e=r.cartQty+t;return e>(r.stockLevel??r.quantity??0)||e<1?r:{...r,cartQty:e}}return r}))},[]),J=async()=>{if($&&D&&B){V(!0);try{let e=await fetch("/api/products/update-price",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:$.id,newPrice:parseFloat(D),reason:B})});if(e.ok){let t=await e.json();O(e=>e.map(e=>e.id===$.id?{...e,priceGHS:t.data.sellingPrice}:e)),P($.id,{priceGHS:t.data.sellingPrice}),j.toast.success("Price updated successfully."),H(null),Q(""),z("")}else{let t=await e.json();j.toast.error(t.error||"Failed to update price.")}}catch(e){j.toast.error("Network error.")}finally{V(!1)}}},X=async()=>{if(0!==C.length){if(!e||!e.id||!e.shopId)return void j.toast.error("Terminal Out of Sync. Please refresh.");A(!0);try{let t={lat:0,lng:0};if("u">typeof navigator&&navigator.geolocation)try{let e=localStorage.getItem("nexus_last_gps");if(e){let r=JSON.parse(e);Date.now()-r.timestamp<6e5&&(t={lat:r.lat,lng:r.lng})}let r=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{timeout:5e3,maximumAge:15e3,enableHighAccuracy:!0})});t={lat:r.coords.latitude,lng:r.coords.longitude},localStorage.setItem("nexus_last_gps",JSON.stringify({lat:t.lat,lng:t.lng,timestamp:Date.now()}))}catch(e){console.log("GPS unavailable - proceeding with cached/default coordinates")}let r=C.map(e=>({productId:e.id,quantity:e.cartQty,price:e.priceGHS})),s=await v(e.id,e.shopId,Y,r,"CASH");if(s.success)U(s.saleId),R("SUCCESS"),O([]),S(),j.toast.success(`Sale recorded: â‚µ${Y.toLocaleString()}`);else{let e=s.error||"Unknown error";e.includes("Out of Stock")?j.toast.error(`âš ï¸ Stock Issue: ${e}`,{duration:6e3,icon:"ðŸ“¦"}):e.includes("Product Not Found")?j.toast.error("Product not found. Please refresh inventory.",{duration:5e3,icon:"ðŸ”"}):e.includes("Invalid Data")?j.toast.error("Invalid transaction data. Please try again.",{duration:5e3}):j.toast.error(`Transaction failed: ${e}`,{duration:6e3})}}catch(e){console.error("Checkout error:",e),e.message?.includes("fetch")||e.message?.includes("network")?j.toast.error("Network error. Check your connection and try again.",{duration:5e3,icon:"ðŸ“¡"}):j.toast.error(e.message||"Unexpected error. Please try again.",{duration:5e3})}finally{A(!1)}}};if(y&&!e)return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 gap-4",children:[(0,t.jsx)(c.Loader2,{className:"w-10 h-10 animate-spin text-blue-600"}),(0,t.jsx)("p",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:"Loading Terminal..."})]});if("NO_SHOP_ASSIGNED"===k)return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 gap-6 px-8 text-center",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center text-red-500",children:(0,t.jsx)(b.Store,{className:"w-8 h-8"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-black text-slate-900",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-2 font-medium",children:"You are not assigned to a Shop."}),(0,t.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Please contact HQ to link your profile."})]}),(0,t.jsx)(g.default,{href:"/mobilepos",className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-bold uppercase tracking-widest text-xs",children:"Return to Dashboard"})]});let Z=(0,r.useMemo)(()=>{if(!M)return a;let e=M.toLowerCase();return a.filter(t=>(t.productName||t.name||"").toLowerCase().includes(e)||t.sku&&t.sku.toLowerCase().includes(e))},[a,M]),Y=(0,r.useMemo)(()=>C.reduce((e,t)=>e+t.priceGHS*t.cartQty,0),[C]);return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col pb-24 bg-slate-50 text-slate-900 font-sans",children:[$&&(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-3xl p-8 w-full max-w-sm shadow-2xl animate-in zoom-in-95 duration-200",children:[(0,t.jsx)("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Adjust Price"}),(0,t.jsx)("p",{className:"text-xs text-slate-400 font-bold uppercase mb-6 tracking-wide",children:$.productName}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block",children:"New Price (GHS)"}),(0,t.jsx)("input",{type:"number",className:"w-full h-12 px-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-sm outline-none focus:border-blue-500",value:D,onChange:e=>Q(e.target.value),placeholder:"e.g. 150",autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block",children:"Reason for Change"}),(0,t.jsx)("textarea",{className:"w-full h-24 p-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-sm outline-none focus:border-blue-500 resize-none",value:B,onChange:e=>z(e.target.value),placeholder:"e.g. Bulk discount, seasonal promo..."})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,t.jsx)("button",{onClick:()=>H(null),className:"flex-1 py-4 bg-slate-100 text-slate-600 rounded-xl text-xs font-black uppercase tracking-widest hover:bg-slate-200 transition-all",children:"Cancel"}),(0,t.jsx)("button",{onClick:J,disabled:F||!D||!B,className:"flex-2 py-4 bg-blue-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-blue-700 transition-all shadow-lg shadow-blue-200 flex items-center justify-center gap-2",children:F?(0,t.jsx)(c.Loader2,{className:"w-4 h-4 animate-spin"}):"Save Change"})]})]})]})}),(0,t.jsx)("div",{className:"px-6 pt-8 pb-4 bg-white shadow-sm border-b border-slate-100 mb-4 sticky top-0 z-20",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-black text-slate-900 tracking-tight leading-tight",children:e?.shopName}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(o.User,{className:"w-3 h-3 text-blue-500"}),(0,t.jsx)("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide",children:e?.agentName})]}),e?.managerName&&(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,t.jsx)(b.Store,{className:"w-3 h-3 text-slate-400"}),(0,t.jsxs)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:["Mgr: ",e.managerName," ",(0,t.jsx)("span",{className:"text-slate-300",children:"â€¢"})," ",e.managerPhone]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:fetchData,className:"p-2 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-100 transition-colors active:scale-90",children:(0,t.jsx)(u.RefreshCw,{className:"w-4 h-4"})}),(0,t.jsxs)(g.default,{href:"/mobilepos/history",className:"p-2 bg-slate-50 text-slate-500 rounded-full hover:bg-slate-100 transition-colors active:scale-90",title:"Sales History",children:[(0,t.jsx)("span",{className:"sr-only",children:"History"}),(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[(0,t.jsx)("path",{d:"M3 3v5h5"}),(0,t.jsx)("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"})]})]}),(0,t.jsx)(g.default,{href:"/mobilepos",className:"p-2 bg-slate-50 text-slate-500 rounded-full hover:bg-slate-100 transition-colors active:scale-90",children:(0,t.jsx)(d.Home,{className:"w-4 h-4"})})]})]})}),e?.targetProgress&&(0,t.jsx)("div",{className:"px-6 mb-6 animate-in slide-in-from-top-4 duration-700 delay-100",children:(0,t.jsxs)("div",{className:"bg-slate-900 rounded-3xl p-5 text-white shadow-xl shadow-slate-900/20 relative overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xs font-black uppercase tracking-widest text-slate-400",children:"Monthly Sales Target"}),(0,t.jsxs)("p",{className:"text-lg font-black mt-1",children:[Math.round(e.targetProgress.achievedValue/e.targetProgress.targetValue*100),"%",(0,t.jsx)("span",{className:"text-xs text-slate-500 font-bold ml-2",children:"Completed"})]})]}),(0,t.jsx)(h,{className:"w-5 h-5 text-blue-500"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[9px] font-bold text-slate-500 uppercase",children:"Revenue"}),(0,t.jsxs)("p",{className:"text-sm font-bold",children:["â‚µ ",e.targetProgress.achievedValue.toLocaleString()," ",(0,t.jsxs)("span",{className:"text-slate-600",children:["/ ",e.targetProgress.targetValue.toLocaleString()]})]}),(0,t.jsx)("div",{className:"h-1.5 w-full bg-slate-800 rounded-full mt-2 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${Math.min(e.targetProgress.achievedValue/e.targetProgress.targetValue*100,100)}%`}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[9px] font-bold text-slate-500 uppercase",children:"Volume"}),(0,t.jsxs)("p",{className:"text-sm font-bold",children:[e.targetProgress.achievedQuantity," ",(0,t.jsxs)("span",{className:"text-slate-600",children:["/ ",e.targetProgress.targetQuantity]})]}),(0,t.jsx)("div",{className:"h-1.5 w-full bg-slate-800 rounded-full mt-2 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-1000",style:{width:`${Math.min(e.targetProgress.achievedQuantity/e.targetProgress.targetQuantity*100,100)}%`}})})]})]}),(0,t.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -mr-10 -mt-10 pointer-events-none"})]})}),"BROWSE"===_&&(0,t.jsxs)("div",{className:"px-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsxs)("div",{className:"relative mb-6",children:[(0,t.jsx)(s.Search,{className:"absolute left-4 top-3.5 w-5 h-5 text-slate-400"}),(0,t.jsx)("input",{placeholder:"Search SKU or Name...",className:"w-full h-12 pl-12 pr-4 rounded-xl text-sm font-bold outline-none border border-slate-200 bg-white focus:border-blue-500 transition-all shadow-sm placeholder:text-slate-300",value:E,onChange:e=>L(e.target.value)})]}),(0,t.jsx)("div",{className:"space-y-4",children:Z.length>0?Z.map(e=>{let r=C.find(t=>t.id===e.id),s=e.quantity<=0;return(0,t.jsxs)("div",{className:"p-4 rounded-2xl border border-slate-200 bg-white shadow-sm flex flex-col gap-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${s?"bg-slate-100 text-slate-300":"bg-blue-50 text-blue-600"}`,children:(0,t.jsx)(i.Package,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-black text-sm text-slate-900",children:e.productName}),(0,t.jsx)("div",{className:"flex gap-2 items-center",children:(0,t.jsx)("span",{className:`text-[10px] font-bold uppercase ${s?"text-red-500":"text-emerald-500"}`,children:s?"Out of Stock":`${e.quantity} Available`})}),(0,t.jsxs)("p",{className:"font-bold text-xs mt-1 text-slate-700",children:["â‚µ ",e.priceGHS.toLocaleString()]})]})]})}),(0,t.jsx)("div",{className:"w-full",children:r?(0,t.jsxs)("div",{className:"flex items-center justify-between bg-slate-100 rounded-xl p-1",children:[(0,t.jsx)("button",{onClick:()=>W(e.id,-1),className:"w-10 h-10 flex items-center justify-center bg-white rounded-lg shadow-sm text-slate-600 font-bold active:scale-90 transition-transform",children:(0,t.jsx)(p,{className:"w-4 h-4"})}),(0,t.jsx)("span",{className:"text-sm font-black text-slate-900",children:r.cartQty}),(0,t.jsx)("button",{onClick:()=>W(e.id,1),className:"w-10 h-10 flex items-center justify-center bg-white rounded-lg shadow-sm text-slate-600 font-bold active:scale-90 transition-transform",children:(0,t.jsx)(m.Plus,{className:"w-4 h-4"})})]}):(0,t.jsx)("button",{disabled:s,onClick:()=>K(e),className:`w-full py-3 rounded-xl text-xs font-black uppercase tracking-wide transition-all active:scale-95 ${s?"bg-slate-100 text-slate-400 cursor-not-allowed":"bg-blue-600 text-white shadow-lg shadow-blue-500/20 hover:bg-blue-700"}`,children:"Add to Order"})})]},e.id)}):(0,t.jsxs)("div",{className:"text-center py-12 flex flex-col items-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4 text-slate-300",children:(0,t.jsx)(i.Package,{className:"w-8 h-8"})}),(0,t.jsx)("p",{className:"text-slate-500 font-bold text-sm",children:"No items found."}),(0,t.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Try a different search term."})]})})]}),"CHECKOUT"===_&&(0,t.jsxs)("div",{className:"flex flex-col h-full px-6 animate-in slide-in-from-right-4 duration-300",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,t.jsx)("button",{onClick:()=>R("BROWSE"),className:"p-2 bg-white border border-slate-200 rounded-full text-slate-500 hover:text-slate-900 active:scale-90 transition-transform",children:(0,t.jsx)(f.ArrowLeft,{className:"w-5 h-5"})}),(0,t.jsx)("h1",{className:"text-xl font-black text-slate-900",children:"Review Order"})]}),(0,t.jsx)("div",{className:"flex-1 space-y-4",children:C.map(e=>(0,t.jsxs)("div",{className:"p-4 rounded-2xl border border-slate-200 bg-white flex justify-between items-center shadow-sm",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("h4",{className:"font-bold text-sm text-slate-900",children:e.productName}),(0,t.jsx)("button",{onClick:()=>{H(e),Q(e.priceGHS.toString())},className:"p-1 px-2 border border-blue-100 bg-blue-50 text-blue-600 rounded-lg text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all",children:"Edit Price"})]}),(0,t.jsxs)("p",{className:"text-xs text-slate-400 font-bold",children:["â‚µ ",e.priceGHS," x ",e.cartQty]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 ml-4",children:[(0,t.jsxs)("p",{className:"font-black text-sm text-slate-900",children:["â‚µ ",(e.priceGHS*e.cartQty).toLocaleString()]}),(0,t.jsx)("button",{onClick:()=>q(e.id),className:"text-red-400 hover:text-red-500 active:scale-90 transition-transform",children:(0,t.jsx)(l,{className:"w-4 h-4"})})]})]},e.id))}),(0,t.jsxs)("div",{className:"mt-8 p-6 rounded-3xl bg-white border border-slate-200 shadow-xl mb-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:"Total"}),(0,t.jsxs)("span",{className:"text-3xl font-black text-slate-900",children:["â‚µ ",Y.toLocaleString()]})]}),(0,t.jsx)("button",{disabled:T,onClick:X,className:"w-full py-5 rounded-2xl font-black text-sm uppercase tracking-widest text-white shadow-xl transition-all active:scale-95 disabled:opacity-50 bg-emerald-600 flex items-center justify-center gap-2 hover:bg-emerald-700",children:T?(0,t.jsx)(c.Loader2,{className:"w-4 h-4 animate-spin"}):`SELL ${C.length} ITEM${C.length>1?"S":""} â€¢ â‚µ ${Y.toLocaleString()}`})]})]}),"SUCCESS"===_&&(0,t.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-6 animate-in zoom-in duration-500",children:[(0,t.jsx)("div",{className:"w-24 h-24 bg-emerald-500 rounded-full flex items-center justify-center shadow-2xl shadow-emerald-500/30 mb-8",children:(0,t.jsx)(n.CheckCircle,{className:"w-10 h-10 text-white"})}),(0,t.jsx)("h2",{className:"text-3xl font-black mb-2 text-slate-900",children:"Sale Recorded"}),(0,t.jsxs)("p",{className:"text-slate-500 font-bold text-sm uppercase tracking-widest mb-8",children:["Ref: #",I.slice(-6).toUpperCase()]}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 w-full max-w-xs mb-8 shadow-sm",children:[(0,t.jsx)("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Synced To"}),(0,t.jsx)("p",{className:"text-sm font-black text-slate-900",children:e?.shopName})]}),(0,t.jsx)("button",{onClick:()=>R("BROWSE"),className:"w-full py-4 rounded-xl text-white font-black text-xs uppercase tracking-widest shadow-lg bg-blue-600 active:scale-95 transition-transform hover:bg-blue-700",children:"Next Customer"})]}),"BROWSE"===_&&C.length>0&&(0,t.jsx)("div",{className:"fixed bottom-24 left-6 right-6 z-30 animate-in slide-in-from-bottom-10 duration-500",children:(0,t.jsxs)("button",{onClick:()=>R("CHECKOUT"),className:"w-full bg-slate-900 border border-slate-800 text-white p-4 rounded-3xl shadow-2xl flex items-center justify-between active:scale-95 transition-transform",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center font-black text-sm",children:C.reduce((e,t)=>e+t.cartQty,0)}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Review Order"}),(0,t.jsx)("p",{className:"text-sm font-black",children:"Checkout Now"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 pr-2",children:[(0,t.jsxs)("span",{className:"text-lg font-black text-blue-400",children:["â‚µ ",Y.toLocaleString()]}),(0,t.jsx)(x,{className:"w-5 h-5 text-white"})]})]})})]})}e.s(["default",()=>k],73871)}]);