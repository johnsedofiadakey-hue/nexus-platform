module.exports=[28186,a=>{"use strict";var b=a.i(89477),c=a.i(78301),d=a.i(83145),e=a.i(83090),f=a.i(91700),g=a.i(89930),h=a.i(57399);function i({children:a}){(0,g.useRef)(0);let{status:c}=(0,h.useSession)();return(0,g.useEffect)(()=>{},[c]),(0,b.jsx)(b.Fragment,{children:a})}var j=a.i(60942),k=a.i(98845),l=a.i(25700);let m=(0,l.default)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);var n=a.i(29370),o=a.i(28002);function p(){let[a,c]=(0,g.useState)(!0),[d,e]=(0,g.useState)(!1),[f,h]=(0,g.useState)(0);(0,g.useEffect)(()=>{c(navigator.onLine),h(k.SyncQueue.count());let a=()=>{c(!0),i()},b=()=>c(!1);window.addEventListener("online",a),window.addEventListener("offline",b);let d=setInterval(()=>{h(k.SyncQueue.count()),navigator.onLine&&k.SyncQueue.count()>0&&i()},1e4);return()=>{window.removeEventListener("online",a),window.removeEventListener("offline",b),clearInterval(d)}},[]);let i=async()=>{if(d||0===k.SyncQueue.count())return;e(!0);let a=j.toast.loading("Syncing Offline Data..."),b=k.SyncQueue.getAll(),c=0;for(let a of b)try{let b="";"REPORT"===a.type&&(b="/api/operations/reports"),"LEAVE"===a.type&&(b="/api/hr/leaves"),(await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.payload)})).ok&&(k.SyncQueue.remove(a.id),c++)}catch(b){console.error("Sync Failed for item",a.id)}e(!1),h(k.SyncQueue.count()),c>0?j.toast.success(`Synced ${c} items`,{id:a}):j.toast.dismiss(a)};return 0===f&&a?null:(0,b.jsxs)("div",{className:"fixed bottom-20 left-1/2 -translate-x-1/2 z-50 flex items-center gap-3 px-4 py-2 bg-slate-900/90 backdrop-blur text-white rounded-full shadow-xl border border-white/10",children:[a?d?(0,b.jsx)(o.RefreshCw,{size:14,className:"animate-spin text-blue-400"}):(0,b.jsx)(m,{size:14,className:"text-emerald-400"}):(0,b.jsx)(n.WifiOff,{size:14,className:"text-rose-400"}),(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:a?d?"Syncing...":`${f} Pending`:"Offline Mode"})]})}let q=(0,l.default)("shield-off",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);var r=a.i(92690);let s=(0,l.default)("phone-call",[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var t=a.i(69118);function u({returnDate:a}){return(0,b.jsxs)("div",{className:"min-h-screen bg-slate-900 flex flex-col items-center justify-center p-8 text-center text-white",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-blue-600/20 rounded-full flex items-center justify-center mb-8 border border-blue-500/30",children:(0,b.jsx)(q,{className:"w-10 h-10 text-blue-500"})}),(0,b.jsx)("h1",{className:"text-2xl font-black tracking-tighter uppercase mb-2",children:"System Locked"}),(0,b.jsx)("p",{className:"text-slate-400 text-sm uppercase font-bold tracking-widest mb-10 leading-relaxed",children:"Your access to the Nexus Grid has been temporarily suspended due to approved leave."}),(0,b.jsxs)("div",{className:"w-full bg-white/5 border border-white/10 rounded-2xl p-6 mb-10",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-white/10",children:[(0,b.jsx)("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Return Date"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.Calendar,{className:"w-4 h-4 text-blue-500"}),(0,b.jsx)("span",{className:"text-sm font-black tabular-nums",children:a})]})]}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mb-2",children:"Instructions"}),(0,b.jsx)("p",{className:"text-[11px] text-slate-300 leading-relaxed",children:"Please contact your LG Regional Supervisor if you are returning to your node earlier than expected."})]})]}),(0,b.jsxs)("div",{className:"w-full space-y-4",children:[(0,b.jsxs)("button",{className:"w-full py-4 bg-white text-slate-900 rounded-xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-3",children:[(0,b.jsx)(s,{className:"w-4 h-4"})," Contact Supervisor"]}),(0,b.jsxs)("button",{onClick:()=>(0,h.signOut)(),className:"w-full py-4 bg-white/5 text-slate-400 rounded-xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-3 border border-white/10",children:[(0,b.jsx)(t.LogOut,{className:"w-4 h-4"})," Sign Out"]})]})]})}var v=a.i(12533),w=a.i(77241),x=a.i(91498),y=a.i(87307),z=a.i(98149),A=a.i(81419);function B({shopLat:a,shopLng:c,radius:d,bypass:e}){let[f,i]=(0,g.useState)(!1),[j,k]=(0,g.useState)(0),[l,m]=(0,g.useState)(null),[n,p]=(0,g.useState)(!0),[q,r]=(0,g.useState)(0),{data:s}=(0,h.useSession)(),t=()=>{if(p(!0),!navigator.geolocation){i(!0),p(!1);return}navigator.geolocation.getCurrentPosition(b=>{let f=b.coords.latitude,g=b.coords.longitude,h=b.coords.accuracy,j=(0,A.calculateDistance)(f,g,a,c);if(k(j),m(h),h>50){console.warn(`GPS accuracy too low: ${h.toFixed(0)}m. Waiting for better signal...`),p(!1);return}j>d+30&&!e?r(a=>{let b=a+1;return b>=2&&i(!0),b}):(i(!1),r(0)),p(!1)},a=>{console.warn("GPS Error",a),p(!1)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})};return((0,g.useEffect)(()=>{t();let a=setInterval(t,3e4);return()=>clearInterval(a)},[a,c,d,e]),(f||n)&&(!n||f))?(0,b.jsxs)("div",{className:"absolute inset-0 z-[9999] bg-slate-900/95 backdrop-blur-md flex flex-col items-center justify-center p-8 text-center animate-in fade-in duration-300",children:[(0,b.jsxs)("div",{className:"w-24 h-24 bg-red-500/10 rounded-full flex items-center justify-center mb-6 relative",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-red-500/20 rounded-full animate-ping"}),(0,b.jsx)(v.Lock,{className:"w-10 h-10 text-red-500 relative z-10"})]}),(0,b.jsx)("h2",{className:"text-2xl font-black text-white uppercase tracking-tight mb-2",children:"Terminal Locked"}),j>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("p",{className:"text-slate-400 font-medium mb-2 max-w-xs mx-auto",children:["You are ",(0,b.jsxs)("span",{className:"text-white font-bold",children:[j,"m"]})," away from the shop zone. Allowed radius is ",(0,b.jsxs)("span",{className:"text-white font-bold",children:[d,"m"]}),"."]}),null!==l&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs mb-6",children:[(0,b.jsx)(z.Signal,{className:`w-4 h-4 ${l<=20?"text-green-400":l<=50?"text-yellow-400":"text-red-400"}`}),(0,b.jsxs)("span",{className:"text-slate-500",children:["GPS Accuracy: ",(0,b.jsxs)("span",{className:`font-bold ${l<=20?"text-green-400":l<=50?"text-yellow-400":"text-red-400"}`,children:["±",l.toFixed(0),"m"]})]})]})]}):(0,b.jsx)("p",{className:"text-slate-400 font-medium mb-6 max-w-xs mx-auto",children:"Searching for GPS signal... Ensure location services are enabled."}),(0,b.jsx)("div",{className:"bg-slate-800 rounded-xl p-4 w-full mb-6 border border-slate-700",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 text-left",children:[(0,b.jsx)(x.AlertTriangle,{className:"text-amber-500 shrink-0",size:20}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-bold text-slate-300 uppercase",children:"Security Protocol"}),(0,b.jsx)("p",{className:"text-[10px] text-slate-500 mt-0.5",children:"Return to shop premises to auto-unlock."})]})]})}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 w-full",children:[(0,b.jsxs)("button",{onClick:t,className:"w-full py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-black uppercase tracking-widest text-xs flex items-center justify-center gap-2 active:scale-95 transition-all",children:[n?(0,b.jsx)(o.RefreshCw,{className:"animate-spin w-4 h-4"}):(0,b.jsx)(w.MapPin,{className:"w-4 h-4"}),"Check Location"]}),(0,b.jsxs)("a",{href:"tel:+233200000000",className:"w-full py-4 bg-slate-800 text-slate-400 hover:text-white rounded-xl font-bold uppercase tracking-widest text-xs flex items-center justify-center gap-2",children:[(0,b.jsx)(y.Phone,{className:"w-4 h-4"})," Call Manager"]})]}),(0,b.jsxs)("p",{className:"mt-8 text-[10px] font-bold text-slate-600 uppercase tracking-widest",children:["Session ID: ",s?.user?.email]})]}):null}var C=a.i(2807);let D=(0,l.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var E=a.i(58482);function F(){let[a,c]=(0,g.useState)(null),[d,e]=(0,g.useState)(!1);(0,g.useEffect)(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;let a=localStorage.getItem("pwa-install-dismissed");if(a){let b=parseInt(a,10);if((Date.now()-b)/864e5<7)return}let b=a=>{a.preventDefault(),c(a),setTimeout(()=>e(!0),5e3)};return window.addEventListener("beforeinstallprompt",b),()=>window.removeEventListener("beforeinstallprompt",b)},[]);let f=async()=>{if(!a)return;a.prompt();let{outcome:b}=await a.userChoice;"accepted"===b&&console.log("✅ PWA installed"),c(null),e(!1)};return d&&a?(0,b.jsx)("div",{className:"fixed bottom-20 left-4 right-4 z-50 animate-in slide-in-from-bottom-4 duration-300",children:(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl shadow-2xl p-4 text-white",children:[(0,b.jsx)("button",{onClick:()=>{localStorage.setItem("pwa-install-dismissed",Date.now().toString()),e(!1)},className:"absolute top-2 right-2 p-1 hover:bg-white/20 rounded-full transition-colors",children:(0,b.jsx)(C.X,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(E.Smartphone,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-black text-sm mb-1",children:"Install Nexus POS"}),(0,b.jsx)("p",{className:"text-xs text-blue-100 mb-3",children:"Add to home screen for instant access & offline mode"}),(0,b.jsxs)("button",{onClick:f,className:"w-full bg-white text-blue-600 font-bold text-sm py-2.5 px-4 rounded-xl hover:bg-blue-50 transition-colors flex items-center justify-center gap-2 shadow-lg",children:[(0,b.jsx)(D,{className:"w-4 h-4"}),"Install App"]})]})]})]})}):null}var G=a.i(88064),H=a.i(67837),I=a.i(78352),J=a.i(21084),K=a.i(12882);let L=(0,l.default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);async function M(){return!1}function N({children:a}){let d=(0,c.useRouter)(),f=(0,c.usePathname)(),{themeClasses:h}=(0,e.useMobileTheme)(),[i,j]=(0,g.useState)(null),[k,l]=(0,g.useState)(null);return((0,g.useEffect)(()=>{M()},[]),null===i)?(0,b.jsx)("div",{className:"h-screen w-full flex items-center justify-center bg-slate-900",children:(0,b.jsx)(G.Loader2,{className:"animate-spin text-blue-500"})}):i.active?(0,b.jsx)(u,{returnDate:i.returnDate}):(0,b.jsxs)("div",{className:"w-full max-w-[480px] h-screen relative flex flex-col overflow-hidden transition-all duration-500 bg-slate-50 dark:bg-slate-900 mx-auto shadow-2xl rounded-xl border border-slate-200 dark:border-slate-800 overscroll-none select-none",children:[(0,b.jsx)("div",{className:"h-2 w-full bg-transparent z-50 shrink-0"}),k&&(0,b.jsx)(B,{shopLat:k.lat,shopLng:k.lng,radius:k.radius,bypass:k.bypass}),(0,b.jsxs)("main",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar pb-32",children:[(0,b.jsx)(p,{}),a]}),(0,b.jsxs)("div",{className:"absolute bottom-6 left-4 right-4 h-20 rounded-3xl bg-[var(--glass-bg)] border border-[var(--glass-border)] shadow-[var(--glass-shadow)] backdrop-blur-xl flex justify-between items-center px-6 z-50",children:[(0,b.jsxs)("button",{onClick:()=>d.push("/mobilepos"),className:"group flex flex-col items-center gap-1 transition-all",children:[(0,b.jsx)("div",{className:`p-2 rounded-full transition-all duration-300 ${"/mobilepos"===f?"bg-blue-100 text-blue-600 translate-y-[-4px]":"text-slate-400"}`,children:(0,b.jsx)(I.Home,{size:22,className:"/mobilepos"===f?"fill-blue-600":""})}),"/mobilepos"===f&&(0,b.jsx)("span",{className:"w-1 h-1 rounded-full bg-blue-600 animate-in fade-in"})]}),(0,b.jsxs)("button",{onClick:()=>d.push("/mobilepos/inventory"),className:"group flex flex-col items-center gap-1 transition-all",children:[(0,b.jsx)("div",{className:`p-2 rounded-full transition-all duration-300 ${"/mobilepos/inventory"===f?"bg-blue-100 text-blue-600 translate-y-[-4px]":"text-slate-400"}`,children:(0,b.jsx)(J.Package,{size:22,className:"/mobilepos/inventory"===f?"fill-blue-600":""})}),"/mobilepos/inventory"===f&&(0,b.jsx)("span",{className:"w-1 h-1 rounded-full bg-blue-600 animate-in fade-in"})]}),(0,b.jsx)("div",{className:"relative -top-8",children:(0,b.jsx)("button",{onClick:()=>d.push("/mobilepos/pos"),className:"w-16 h-16 rounded-full flex items-center justify-center bg-[var(--nexus-primary)] text-white shadow-2xl shadow-blue-900/30 active:scale-90 transition-all border-[4px] border-white dark:border-slate-800",children:(0,b.jsx)(H.Plus,{size:28,strokeWidth:3})})}),(0,b.jsxs)("button",{onClick:()=>d.push("/mobilepos/messages"),className:"group flex flex-col items-center gap-1 transition-all",children:[(0,b.jsx)("div",{className:`p-2 rounded-full transition-all duration-300 ${"/mobilepos/messages"===f?"bg-blue-100 text-blue-600 translate-y-[-4px]":"text-slate-400"}`,children:(0,b.jsx)(K.MessageSquare,{size:22,className:"/mobilepos/messages"===f?"fill-blue-600":""})}),"/mobilepos/messages"===f&&(0,b.jsx)("span",{className:"w-1 h-1 rounded-full bg-blue-600 animate-in fade-in"})]}),(0,b.jsxs)("button",{onClick:()=>d.push("/mobilepos/settings"),className:"group flex flex-col items-center gap-1 transition-all",children:[(0,b.jsx)("div",{className:`p-2 rounded-full transition-all duration-300 ${"/mobilepos/settings"===f?"bg-blue-100 text-blue-600 translate-y-[-4px]":"text-slate-400"}`,children:(0,b.jsx)(L,{size:22})}),"/mobilepos/settings"===f&&(0,b.jsx)("span",{className:"w-1 h-1 rounded-full bg-blue-600 animate-in fade-in"})]})]})]})}function O({children:a}){return(0,b.jsx)(d.SessionProvider,{children:(0,b.jsx)(e.MobileThemeProvider,{children:(0,b.jsx)(f.MobileDataProvider,{children:(0,b.jsxs)("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-950 flex justify-center items-center overflow-hidden font-sans antialiased selection:bg-blue-100",children:[(0,b.jsx)(i,{children:(0,b.jsx)(N,{children:a})}),(0,b.jsx)(F,{})]})})})})}a.s(["default",()=>O],28186)}];

//# sourceMappingURL=apps_agent_src_app_mobilepos_layout_tsx_a870fa27._.js.map