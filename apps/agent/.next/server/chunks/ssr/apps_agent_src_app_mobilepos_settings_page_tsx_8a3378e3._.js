module.exports=[53819,a=>{"use strict";var b=a.i(89477),c=a.i(89930),d=a.i(76945),e=a.i(88064),f=a.i(29123),g=a.i(67075),h=a.i(92690),i=a.i(69118);let j=(0,a.i(25700).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var k=a.i(3410),l=a.i(70006),m=a.i(3714),n=a.i(57399),o=a.i(78301),p=a.i(83090),q=a.i(98845),r=a.i(60942);function s(){let a,{data:s}=(0,n.useSession)(),t=(0,o.useRouter)(),{darkMode:u,toggleDarkMode:v,accent:w,setAccent:x,themeClasses:y}=(0,p.useMobileTheme)(),[z,A]=(0,c.useState)("NONE"),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)({startDate:"",endDate:"",reason:""}),[H,I]=(0,c.useState)({walkIns:"",conversions:"",marketIntel:"",notes:""}),[J,K]=(0,c.useState)(null);(0,c.useEffect)(()=>{fetch("/api/mobile/init").then(a=>a.json()).then(K)},[]);let L=async a=>{let b=a.target.files?.[0];if(!b)return;if(b.size>2097152)return void r.toast.error("Image too large (Max 2MB)");let c=new FileReader;c.onload=async a=>{let b=a.target?.result;if("string"==typeof b){K(a=>({...a,image:b}));try{(await fetch("/api/mobile/profile/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:b})})).ok?r.toast.success("Profile Photo Updated"):r.toast.error("Upload Failed")}catch(a){r.toast.error("Network Error")}}},c.readAsDataURL(b)},M=async a=>{a.preventDefault(),C(!0);let b={type:"Annual Leave",startDate:F.startDate,endDate:F.endDate,reason:F.reason};try{if(!navigator.onLine)throw Error("Offline");if((await fetch("/api/hr/leaves",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)E(!0),setTimeout(()=>{A("NONE"),E(!1)},2e3);else throw Error("Server Error")}catch(a){console.log("Network failed, queuing offline..."),q.SyncQueue.enqueue("LEAVE",b),r.toast.success("Saved Offline. Will sync when online.",{icon:"ðŸ“¡"}),E(!0),setTimeout(()=>{A("NONE"),E(!1)},2e3)}finally{C(!1)}},N=async a=>{a.preventDefault(),C(!0);let b={walkIns:H.walkIns,conversions:H.conversions,marketIntel:H.marketIntel,notes:H.notes};try{if(!navigator.onLine)throw Error("Offline");if((await fetch("/api/operations/reports",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)E(!0),setTimeout(()=>{A("NONE"),E(!1)},2e3);else throw Error("Server Error")}catch(a){console.log("Network failed, queuing offline..."),q.SyncQueue.enqueue("REPORT",b),r.toast.success("Saved Offline. Will sync when online.",{icon:"ðŸ“¡"}),E(!0),setTimeout(()=>{A("NONE"),E(!1)},2e3)}finally{C(!1)}};return(0,b.jsxs)("div",{className:`min-h-screen font-sans pb-32 transition-colors duration-500 ${y.bg}`,children:[(0,b.jsxs)("div",{className:`px-6 py-6 border-b sticky top-0 z-20 shadow-sm flex items-center gap-4 ${y.nav} ${y.border}`,children:[(0,b.jsx)("button",{onClick:()=>t.back(),className:`p-2 rounded-full ${u?"bg-slate-800 text-white":"bg-slate-100 text-slate-600"}`,children:(0,b.jsx)(d.ArrowLeft,{className:"w-5 h-5"})}),(0,b.jsx)("h1",{className:`text-lg font-black tracking-tight ${y.text}`,children:"Terminal Vibe"})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsx)("div",{className:`rounded-[2.5rem] p-8 text-center border shadow-xl relative overflow-hidden ${y.card} ${y.border}`,children:(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsxs)("div",{className:"relative w-24 h-24 mx-auto mb-4 group",children:[(0,b.jsx)("div",{className:`w-24 h-24 rounded-[2rem] overflow-hidden border-4 ${u?"border-slate-700":"border-white"} shadow-lg`,children:J?.image?(0,b.jsx)("img",{src:J.image,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full bg-slate-900 flex items-center justify-center text-white text-2xl font-black",children:s?.user?.name?.charAt(0)})}),(0,b.jsxs)("label",{className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-[2rem] cursor-pointer",children:[(0,b.jsx)("span",{className:"text-xs font-bold text-white uppercase",children:"Upload"}),(0,b.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:L})]})]}),(0,b.jsx)("h2",{className:`text-lg font-black ${y.text}`,children:s?.user?.name}),(0,b.jsxs)("p",{className:"text-[10px] font-black text-blue-500 uppercase tracking-widest mt-2 flex items-center justify-center gap-2",children:[(0,b.jsx)(m.Store,{size:12})," ",J?.shopName||"Syncing Hub..."]})]})}),(0,b.jsxs)("button",{onClick:()=>t.push("/mobilepos/report"),className:`w-full p-5 rounded-3xl border flex items-center justify-between shadow-sm active:scale-95 transition-all group ${y.card} ${y.border}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-blue-500/10 text-blue-500",children:(0,b.jsx)(l.BarChart2,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:`font-black text-sm ${y.text}`,children:"Daily Report"}),(0,b.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Walk-ins & Sales Intel"})]})]}),(0,b.jsx)(k.ChevronRight,{className:"w-5 h-5 text-slate-300"})]}),(0,b.jsxs)("button",{onClick:()=>A("LEAVE"),className:`w-full p-5 rounded-3xl border flex items-center justify-between shadow-sm active:scale-95 transition-all group ${y.card} ${y.border}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-amber-500/10 text-amber-500",children:(0,b.jsx)(h.Calendar,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:`font-black text-sm ${y.text}`,children:"Apply for Leave"}),(0,b.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Request Time Off"})]})]}),(0,b.jsx)(k.ChevronRight,{className:"w-5 h-5 text-slate-300"})]}),(0,b.jsxs)("button",{onClick:()=>A("HISTORY"),className:`w-full p-5 rounded-3xl border flex items-center justify-between shadow-sm active:scale-95 transition-all group ${y.card} ${y.border}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${u?"bg-slate-700 text-white":"bg-slate-100 text-slate-500"}`,children:(0,b.jsx)(j,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:`font-black text-sm ${y.text}`,children:"My History"}),(0,b.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:"Past Reports & Requests"})]})]}),(0,b.jsx)(k.ChevronRight,{className:"w-5 h-5 text-slate-300"})]}),(0,b.jsx)("div",{className:`p-6 rounded-[2rem] border shadow-sm space-y-6 ${y.card} ${y.border}`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("p",{className:`font-bold text-sm ${y.text}`,children:"Dark Mode"}),(0,b.jsx)("button",{onClick:v,className:`w-12 h-6 rounded-full p-1 transition-colors ${u?"bg-blue-600":"bg-slate-200"}`,children:(0,b.jsx)("div",{className:`w-4 h-4 bg-white rounded-full transition-transform ${u?"translate-x-6":"translate-x-0"}`})})]})}),(0,b.jsxs)("button",{onClick:()=>(0,n.signOut)(),className:"w-full py-5 bg-red-500/10 text-red-500 font-black text-xs uppercase tracking-[0.2em] border border-red-500/20 rounded-2xl flex items-center justify-center gap-2",children:[(0,b.jsx)(i.LogOut,{size:16})," Exit Terminal"]})]}),"NONE"!==z&&(0,b.jsx)("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:(0,b.jsx)("div",{className:`w-full max-w-md rounded-t-[3rem] p-8 shadow-2xl animate-in slide-in-from-bottom-10 duration-300 ${u?"bg-slate-800":"bg-white"}`,children:D?(0,b.jsxs)("div",{className:"py-12 text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)(g.CheckCircle2,{size:40,className:"text-emerald-500"})}),(0,b.jsx)("h3",{className:`text-xl font-black uppercase tracking-tight ${y.text}`,children:"Success"}),(0,b.jsx)("p",{className:"text-xs text-slate-400 mt-2",children:"Data Processed Securely"})]}):(0,b.jsxs)("form",{onSubmit:"LEAVE"===z?M:N,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,b.jsx)("h3",{className:`text-xl font-black ${y.text}`,children:"LEAVE"===z?"Leave Request":"HISTORY"===z?"My History":"Daily Intel"}),(0,b.jsx)("button",{type:"button",onClick:()=>A("NONE"),className:"p-2 rounded-full hover:bg-slate-100/10 opacity-60",children:(0,b.jsx)(d.ArrowLeft,{size:20,className:y.text})})]}),"HISTORY"===z?(0,b.jsx)(function({darkMode:a}){let[d,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{fetch("/api/mobile/history").then(a=>a.json()).then(a=>{f(a),h(!1)}).catch(()=>h(!1))},[]),g)?(0,b.jsx)("div",{className:"py-20 flex justify-center",children:(0,b.jsx)(e.Loader2,{className:"animate-spin text-blue-500"})}):d?(0,b.jsxs)("div",{className:"space-y-6 h-[60vh] overflow-y-auto custom-scrollbar pr-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2",children:"Leave Requests"}),(0,b.jsx)("div",{className:"space-y-2",children:0===d.leaves.length?(0,b.jsx)("p",{className:"text-xs opacity-50 italic",children:"No history found."}):d.leaves.map(c=>(0,b.jsxs)("div",{className:`p-3 rounded-xl border ${a?"border-slate-700 bg-slate-800":"border-slate-100 bg-slate-50"}`,children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,b.jsx)("span",{className:"text-[10px] font-bold opacity-70",children:new Date(c.startDate).toLocaleDateString()}),(0,b.jsx)("span",{className:`text-[9px] font-black px-2 py-0.5 rounded ${"APPROVED"===c.status?"bg-emerald-500 text-white":"REJECTED"===c.status?"bg-red-500 text-white":"bg-amber-500 text-white"}`,children:c.status})]}),(0,b.jsx)("p",{className:"text-xs font-bold truncate",children:c.reason})]},c.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2",children:"Daily Reports"}),(0,b.jsx)("div",{className:"space-y-2",children:0===d.reports.length?(0,b.jsx)("p",{className:"text-xs opacity-50 italic",children:"No history found."}):d.reports.map(c=>(0,b.jsxs)("div",{className:`p-3 rounded-xl border ${a?"border-slate-700 bg-slate-800":"border-slate-100 bg-slate-50"}`,children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,b.jsx)("span",{className:"text-[10px] font-bold opacity-70",children:new Date(c.createdAt).toLocaleDateString()}),(0,b.jsxs)("span",{className:"text-[9px] font-black text-blue-500",children:["GHS ",c.totalSales]})]}),(0,b.jsxs)("p",{className:"text-[10px] font-bold opacity-50",children:["Walk-ins: ",c.walkIns," | Conv: ",c.buyers]})]},c.id))})]})]}):(0,b.jsx)("div",{className:"text-center py-10 opacity-50 font-bold",children:"Failed to load history"})},{darkMode:u}):"REPORT"===z?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Walk-ins"}),(0,b.jsx)("input",{type:"number",required:!0,placeholder:"0",className:`w-full h-14 px-4 rounded-2xl border-none font-bold outline-none ${u?"bg-slate-700 text-white":"bg-slate-50 text-slate-900"}`,onChange:a=>I({...H,walkIns:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Buyers / Conv"}),(0,b.jsx)("input",{type:"number",required:!0,placeholder:"0",className:`w-full h-14 px-4 rounded-2xl border-none font-bold outline-none ${u?"bg-slate-700 text-white":"bg-slate-50 text-slate-900"}`,onChange:a=>I({...H,conversions:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Market Intel (Competitors)"}),(0,b.jsx)("textarea",{placeholder:"Samsung/LG activity...",className:`w-full p-4 rounded-2xl border-none font-bold text-sm min-h-[80px] outline-none resize-none ${u?"bg-slate-700 text-white":"bg-slate-50 text-slate-900"}`,onChange:a=>I({...H,marketIntel:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Staff Notes"}),(0,b.jsx)("textarea",{placeholder:"Any extra feedback...",className:`w-full p-4 rounded-2xl border-none font-bold text-sm min-h-[80px] outline-none resize-none ${u?"bg-slate-700 text-white":"bg-slate-50 text-slate-900"}`,onChange:a=>I({...H,notes:a.target.value})})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Start Date"}),(0,b.jsx)("input",{type:"date",required:!0,className:`w-full h-14 px-4 rounded-2xl border-none font-bold outline-none ${u?"bg-slate-700 text-white":"bg-slate-50 text-slate-900"}`,onChange:a=>G({...F,startDate:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"End Date"}),(0,b.jsx)("input",{type:"date",required:!0,className:`w-full h-14 px-4 rounded-2xl border-none font-bold outline-none ${u?"bg-slate-700 text-white":"bg-slate-50 text-slate-900"}`,onChange:a=>G({...F,endDate:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Reason"}),(0,b.jsx)("textarea",{placeholder:"Explanation...",required:!0,className:`w-full p-4 rounded-2xl border-none font-bold text-sm min-h-[100px] outline-none resize-none ${u?"bg-slate-700 text-white":"bg-slate-50 text-slate-900"}`,onChange:a=>G({...F,reason:a.target.value})})]})]}),"HISTORY"!==z&&(0,b.jsx)("button",{disabled:B,className:"w-full text-white h-16 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-3 shadow-xl active:scale-95 transition-all",style:{backgroundColor:(a={blue:"#3b82f6",purple:"#a855f7",rose:"#f43f5e",amber:"#f59e0b"})[w]||a.blue},children:B?(0,b.jsx)(e.Loader2,{className:"animate-spin",size:20}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Send,{size:16})," Sync to HQ"]})})]})})})]})}a.s(["default",()=>s],53819)}];

//# sourceMappingURL=apps_agent_src_app_mobilepos_settings_page_tsx_8a3378e3._.js.map