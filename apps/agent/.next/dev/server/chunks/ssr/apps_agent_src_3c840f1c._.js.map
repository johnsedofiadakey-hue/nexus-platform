{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/nexus-platform/apps/agent/src/lib/actions/transaction.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@/lib/prisma\";\nimport { revalidatePath } from \"next/cache\";\n\nexport type SaleItemInput = {\n    productId: string;\n    quantity: number;\n    price: number;\n};\n\nexport type TransactionResult =\n    | { success: true; saleId: string }\n    | { success: false; error: string };\n\nexport async function processTransaction(\n    userId: string,\n    shopId: string,\n    totalAmount: number,\n    items: SaleItemInput[],\n    paymentMethod: string = \"CASH\"\n): Promise<TransactionResult> {\n    console.log(\"üí≥ SERVER_ACTION: Initiating Sale for User:\", userId);\n    console.log(\"üè™ Shop ID:\", shopId);\n    console.log(\"üí∞ Total Amount:\", totalAmount);\n    console.log(\"üì¶ Items Count:\", items.length);\n\n    try {\n        // 1. Validation\n        if (!userId || !shopId || items.length === 0) {\n            console.error(\"‚ùå VALIDATION FAILED:\", { userId, shopId, itemsCount: items.length });\n            return { success: false, error: \"Invalid Data: Missing User, Shop, or Items\" };\n        }\n\n        if (totalAmount <= 0) {\n            console.error(\"‚ùå INVALID AMOUNT:\", totalAmount);\n            return { success: false, error: \"Invalid transaction amount\" };\n        }\n\n        // 2. Transaction\n        const sale = await prisma.$transaction(async (tx) => {\n            const saleLines = [];\n\n            // üöÄ OPTIMIZED: Batch fetch all products (eliminates N+1 query problem)\n            const productIds = items.map(item => item.productId);\n            const products = await tx.product.findMany({\n                where: { id: { in: productIds } },\n                select: { id: true, name: true, stockLevel: true }\n            });\n\n            // Create product map for O(1) lookup\n            const productMap = new Map(products.map(p => [p.id, p]));\n\n            // Validate all items first\n            for (const item of items) {\n                const product = productMap.get(item.productId);\n\n                if (!product) {\n                    console.error(`‚ùå Product Not Found: ${item.productId}`);\n                    throw new Error(`Product Not Found: ${item.productId}`);\n                }\n\n                if (product.stockLevel < item.quantity) {\n                    console.error(`‚ùå Insufficient Stock: ${product.name} (Need: ${item.quantity}, Have: ${product.stockLevel})`);\n                    throw new Error(`Out of Stock: ${product.name} (Need: ${item.quantity}, Available: ${product.stockLevel})`);\n                }\n\n                console.log(`‚úÖ Stock Check Passed: ${product.name} (Deducting: ${item.quantity})`);\n\n                saleLines.push({\n                    productId: item.productId,\n                    quantity: item.quantity,\n                    price: item.price\n                });\n            }\n\n            // üöÄ OPTIMIZED: Batch update all products in parallel\n            await Promise.all(\n                items.map(item =>\n                    tx.product.update({\n                        where: { id: item.productId },\n                        data: { stockLevel: { decrement: item.quantity } }\n                    })\n                )\n            );\n\n            // D. Create Sale Record\n            const createdSale = await tx.sale.create({\n                data: {\n                    userId,\n                    shopId,\n                    totalAmount,\n                    paymentMethod,\n                    status: \"COMPLETED\",\n                    items: {\n                        create: saleLines\n                    }\n                }\n            });\n\n            console.log(\"‚úÖ DATABASE: Sale record created:\", createdSale.id);\n            return createdSale;\n        });\n\n        console.log(\"‚úÖ SERVER_ACTION: Sale Completed:\", sale.id);\n\n        // 3. Revalidate Paths (Dashboard/History)\n        revalidatePath(\"/dashboard\");\n        revalidatePath(\"/mobilepos/history\");\n        revalidatePath(\"/mobilepos\");\n\n        return { success: true, saleId: sale.id };\n\n    } catch (error: any) {\n        console.error(\"‚ùå SERVER_ACTION_ERROR:\", error.message);\n        console.error(\"Stack:\", error.stack);\n        return { success: false, error: error.message || \"Transaction Failed\" };\n    }\n}\n"],"names":[],"mappings":";;;;;;;MAesB,wBAAA,WAAA,GAAA,IAAA,8WAAA,EAAA,8CAAA,mWAAA,EAAA,KAAA,GAAA,yWAAA,EAAA,sDAAA"}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/nexus-platform/apps/agent/src/hooks/useDebounce.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\n\n/**\n * üîç DEBOUNCED VALUE HOOK\n * Delays value updates to reduce excessive re-renders\n * Perfect for search inputs\n */\nexport function useDebounce<T>(value: T, delay: number = 300): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n"],"names":[],"mappings":";;;;AAAA;;AAOO,SAAS,YAAe,KAAQ,EAAE,QAAgB,GAAG;IAC1D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,gVAAQ,EAAI;IAExD,IAAA,iVAAS,EAAC;QACR,MAAM,UAAU,WAAW;YACzB,kBAAkB;QACpB,GAAG;QAEH,OAAO;YACL,aAAa;QACf;IACF,GAAG;QAAC;QAAO;KAAM;IAEjB,OAAO;AACT"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/nexus-platform/apps/agent/src/app/mobilepos/pos/page.tsx"],"sourcesContent":["\"use client\";\n\n/**\n * --------------------------------------------------------------------------\n * NEXUS PLATFORM - MOBILE POS TERMINAL\n * VERSION: 25.5.1 (FIXED IMPORTS & PATHS)\n * --------------------------------------------------------------------------\n */\n\nimport React, { useState, useEffect, useMemo, useCallback } from \"react\";\nimport {\n  Search, ShoppingCart, Trash2, CheckCircle, Package, LogOut,\n  User, Loader2, Home, RefreshCw, ArrowLeft, ArrowRight, Flag, Plus, Minus,\n  Store, AlertTriangle, MessageSquare\n} from \"lucide-react\";\nimport { signOut } from \"next-auth/react\";\nimport Link from \"next/link\";\nimport { toast } from \"react-hot-toast\";\nimport { processTransaction } from \"@/lib/actions/transaction\";\nimport { useMobileData } from \"@/context/MobileDataContext\";\nimport { useDebounce } from \"@/hooks/useDebounce\";\nimport ProductCard from \"@/components/mobile/ProductCard\";\n\nexport default function MobilePOS() {\n\n  // üöÄ USE CONTEXT FOR SHARED DATA\n  const { identity, inventory, loading, error, refreshInventory, updateInventoryItem } = useMobileData();\n\n  // Cart & View State\n  const [cart, setCart] = useState<any[]>([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const debouncedSearch = useDebounce(searchTerm, 300); // üîç Debounced search\n  const [view, setView] = useState<'BROWSE' | 'CHECKOUT' | 'SUCCESS'>('BROWSE');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [lastSaleId, setLastSaleId] = useState(\"\");\n\n  // --- CART LOGIC ---\n  const [editingItem, setEditingItem] = useState<any>(null);\n  const [newPrice, setNewPrice] = useState(\"\");\n  const [priceReason, setPriceReason] = useState(\"\");\n  const [isUpdatingPrice, setIsUpdatingPrice] = useState(false);\n\n  // üîÑ SHOP REASSIGNMENT TRACKING: Clear cart when assigned to different shop\n  const previousShopId = React.useRef<string | null>(null);\n  \n  useEffect(() => {\n    if (identity?.shopId) {\n      if (previousShopId.current && previousShopId.current !== identity.shopId) {\n        // Shop changed - clear cart for safety\n        setCart([]);\n        setView('BROWSE');\n        toast.info(`üì¶ Cart cleared - Now serving: ${identity.shopName}`, {\n          duration: 4000\n        });\n      }\n      previousShopId.current = identity.shopId;\n    }\n  }, [identity?.shopId, identity?.shopName]);\n\n  const addToCart = useCallback((product: any) => {\n    setCart(prev => {\n      const existing = prev.find(item => item.id === product.id);\n      const currentQty = existing ? existing.cartQty : 0;\n      const availableStock = product.stockLevel ?? product.quantity ?? 0;\n\n      if (currentQty + 1 > availableStock) {\n        toast.error(`Stock Limit! Only ${availableStock} available.`, { duration: 2000 });\n        return prev;\n      }\n\n      // üöÄ OPTIMISTIC UPDATE: Update cart immediately\n      if (existing) {\n        return prev.map(item => item.id === product.id ? { ...item, cartQty: item.cartQty + 1 } : item);\n      }\n      return [...prev, { ...product, cartQty: 1 }];\n    });\n    \n    // No API call needed - cart is local state\n  }, []);\n\n  const removeFromCart = useCallback((itemId: string) => {\n    // üöÄ OPTIMISTIC UPDATE: Remove immediately\n    setCart(prev => prev.filter(item => item.id !== itemId));\n  }, []);\n\n  const updateQty = useCallback((itemId: string, delta: number) => {\n    // üöÄ OPTIMISTIC UPDATE: Update quantity immediately\n    setCart(prev => prev.map(item => {\n      if (item.id === itemId) {\n        const newQty = item.cartQty + delta;\n        const availableStock = item.stockLevel ?? item.quantity ?? 0;\n        if (newQty > availableStock) return item;\n        if (newQty < 1) return item;\n        return { ...item, cartQty: newQty };\n      }\n      return item;\n    }));\n  }, []);\n\n  const handlePriceUpdate = async () => {\n    if (!editingItem || !newPrice || !priceReason) return;\n    setIsUpdatingPrice(true);\n    try {\n      const res = await fetch('/api/products/update-price', {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          productId: editingItem.id,\n          newPrice: parseFloat(newPrice),\n          reason: priceReason\n        })\n      });\n\n      if (res.ok) {\n        const data = await res.json();\n        // Update local cart\n        setCart(prev => prev.map(item =>\n          item.id === editingItem.id ? { ...item, priceGHS: data.data.sellingPrice } : item\n        ));\n        // Update inventory (optimistic)\n        updateInventoryItem(editingItem.id, { priceGHS: data.data.sellingPrice });\n        toast.success(\"Price updated successfully.\");\n        setEditingItem(null);\n        setNewPrice(\"\");\n        setPriceReason(\"\");\n      } else {\n        const errorData = await res.json();\n        toast.error(errorData.error || \"Failed to update price.\");\n      }\n    } catch (e) {\n      toast.error(\"Network error.\");\n    } finally {\n      setIsUpdatingPrice(false);\n    }\n  };\n\n  // --- CHECKOUT LOGIC ---\n  const handleCheckout = async () => {\n    if (cart.length === 0) return;\n    if (!identity || !identity.id || !identity.shopId) {\n      toast.error(\"Terminal Out of Sync. Please refresh.\");\n      return;\n    }\n    setIsProcessing(true);\n\n    try {\n      // üìç OPTIMIZED GPS: Non-blocking with cache fallback\n      let gps = { lat: 0, lng: 0 };\n      if (typeof navigator !== 'undefined' && navigator.geolocation) {\n        try {\n          // Try to get cached GPS first for instant checkout\n          const cached = localStorage.getItem('nexus_last_gps');\n          if (cached) {\n            const parsed = JSON.parse(cached);\n            const age = Date.now() - parsed.timestamp;\n            // Use cache if less than 10 minutes old\n            if (age < 10 * 60 * 1000) {\n              gps = { lat: parsed.lat, lng: parsed.lng };\n            }\n          }\n\n          // Try fresh GPS (non-blocking, shorter timeout)\n          const position = await new Promise<GeolocationPosition>((resolve, reject) => {\n            navigator.geolocation.getCurrentPosition(resolve, reject, { \n              timeout: 5000,\n              maximumAge: 15000, // Accept only 15-second old position for accuracy\n              enableHighAccuracy: true // Accurate location for sales records\n            });\n          });\n          gps = { lat: position.coords.latitude, lng: position.coords.longitude };\n          // Cache for next time\n          localStorage.setItem('nexus_last_gps', JSON.stringify({\n            lat: gps.lat,\n            lng: gps.lng,\n            timestamp: Date.now()\n          }));\n        } catch (e) { \n          console.log(\"GPS unavailable - proceeding with cached/default coordinates\");\n        }\n      }\n\n      const payloadItems = cart.map(i => ({\n        productId: i.id,\n        quantity: i.cartQty,\n        price: i.priceGHS\n      }));\n\n      // ‚ö°Ô∏è SERVER ACTION INVOCATION\n      const result = await processTransaction(\n        identity.id,\n        identity.shopId,\n        cartTotal,\n        payloadItems,\n        \"CASH\"\n      );\n\n      if (result.success) {\n        setLastSaleId(result.saleId);\n        setView('SUCCESS');\n        setCart([]);\n        // Background inventory refresh\n        refreshInventory();\n        // Show success toast\n        toast.success(`Sale recorded: ‚Çµ${cartTotal.toLocaleString()}`);\n      } else {\n        // üéØ IMPROVED ERROR HANDLING\n        const errorMsg = (result as any).error || 'Unknown error';\n        \n        // Specific error handling\n        if (errorMsg.includes('Out of Stock')) {\n          toast.error(`‚ö†Ô∏è Stock Issue: ${errorMsg}`, {\n            duration: 6000,\n            icon: 'üì¶'\n          });\n        } else if (errorMsg.includes('Product Not Found')) {\n          toast.error('Product not found. Please refresh inventory.', {\n            duration: 5000,\n            icon: 'üîç'\n          });\n        } else if (errorMsg.includes('Invalid Data')) {\n          toast.error('Invalid transaction data. Please try again.', {\n            duration: 5000\n          });\n        } else {\n          toast.error(`Transaction failed: ${errorMsg}`, {\n            duration: 6000\n          });\n        }\n      }\n\n    } catch (err: any) {\n      console.error('Checkout error:', err);\n      \n      // Better network error handling\n      if (err.message?.includes('fetch') || err.message?.includes('network')) {\n        toast.error('Network error. Check your connection and try again.', {\n          duration: 5000,\n          icon: 'üì°'\n        });\n      } else {\n        toast.error(err.message || 'Unexpected error. Please try again.', {\n          duration: 5000\n        });\n      }\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // --- RENDER STATES ---\n  if (loading && !identity) {\n    return (\n      <div className=\"min-h-screen flex flex-col items-center justify-center bg-slate-50 gap-4\">\n        <Loader2 className=\"w-10 h-10 animate-spin text-blue-600\" />\n        <p className=\"text-xs font-bold uppercase tracking-widest text-slate-400\">Loading Terminal...</p>\n      </div>\n    );\n  }\n\n  if (error === \"NO_SHOP_ASSIGNED\") {\n    return (\n      <div className=\"min-h-screen flex flex-col items-center justify-center bg-slate-50 gap-6 px-8 text-center\">\n        <div className=\"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center text-red-500\">\n          <Store className=\"w-8 h-8\" />\n        </div>\n        <div>\n          <h2 className=\"text-xl font-black text-slate-900\">Access Denied</h2>\n          <p className=\"text-sm text-slate-500 mt-2 font-medium\">You are not assigned to a Shop.</p>\n          <p className=\"text-xs text-slate-400 mt-1\">Please contact HQ to link your profile.</p>\n        </div>\n        <Link href=\"/mobilepos\" className=\"w-full py-4 bg-slate-900 text-white rounded-2xl font-bold uppercase tracking-widest text-xs\">\n          Return to Dashboard\n        </Link>\n      </div>\n    );\n  }\n\n  // üéØ MEMOIZED FILTERED PRODUCTS - Only recomputes when inventory or search changes\n  const filteredProducts = useMemo(() => {\n    if (!debouncedSearch) return inventory;\n    const search = debouncedSearch.toLowerCase();\n    return inventory.filter(p =>\n      (p.productName || p.name || \"\").toLowerCase().includes(search) ||\n      (p.sku && p.sku.toLowerCase().includes(search))\n    );\n  }, [inventory, debouncedSearch]);\n\n  // üéØ MEMOIZED CART TOTAL\n  const cartTotal = useMemo(() => \n    cart.reduce((sum, item) => sum + (item.priceGHS * item.cartQty), 0),\n    [cart]\n  );\n\n  return (\n    <div className=\"min-h-screen flex flex-col pb-24 bg-slate-50 text-slate-900 font-sans\">\n      {/* PRICE EDIT MODAL */}\n      {editingItem && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4\">\n          <div className=\"bg-white rounded-3xl p-8 w-full max-w-sm shadow-2xl animate-in zoom-in-95 duration-200\">\n            <h3 className=\"text-lg font-black text-slate-900 mb-2\">Adjust Price</h3>\n            <p className=\"text-xs text-slate-400 font-bold uppercase mb-6 tracking-wide\">{editingItem.productName}</p>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block\">New Price (GHS)</label>\n                <input\n                  type=\"number\"\n                  className=\"w-full h-12 px-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-sm outline-none focus:border-blue-500\"\n                  value={newPrice}\n                  onChange={e => setNewPrice(e.target.value)}\n                  placeholder=\"e.g. 150\"\n                  autoFocus\n                />\n              </div>\n\n              <div>\n                <label className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 block\">Reason for Change</label>\n                <textarea\n                  className=\"w-full h-24 p-4 bg-slate-50 border border-slate-200 rounded-xl font-bold text-sm outline-none focus:border-blue-500 resize-none\"\n                  value={priceReason}\n                  onChange={e => setPriceReason(e.target.value)}\n                  placeholder=\"e.g. Bulk discount, seasonal promo...\"\n                />\n              </div>\n\n              <div className=\"flex gap-3 pt-2\">\n                <button\n                  onClick={() => setEditingItem(null)}\n                  className=\"flex-1 py-4 bg-slate-100 text-slate-600 rounded-xl text-xs font-black uppercase tracking-widest hover:bg-slate-200 transition-all\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handlePriceUpdate}\n                  disabled={isUpdatingPrice || !newPrice || !priceReason}\n                  className=\"flex-2 py-4 bg-blue-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-blue-700 transition-all shadow-lg shadow-blue-200 flex items-center justify-center gap-2\"\n                >\n                  {isUpdatingPrice ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : \"Save Change\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* HEADER */}\n      <div className=\"px-6 pt-8 pb-4 bg-white shadow-sm border-b border-slate-100 mb-4 sticky top-0 z-20\">\n        <div className=\"flex justify-between items-start\">\n          <div>\n            <h1 className=\"text-xl font-black text-slate-900 tracking-tight leading-tight\">\n              {identity?.shopName}\n            </h1>\n            <div className=\"flex items-center gap-2 mt-1\">\n              <User className=\"w-3 h-3 text-blue-500\" />\n              <p className=\"text-xs font-bold text-slate-500 uppercase tracking-wide\">{identity?.agentName}</p>\n            </div>\n            {identity?.managerName && (\n              <div className=\"flex items-center gap-2 mt-0.5\">\n                <Store className=\"w-3 h-3 text-slate-400\" />\n                <p className=\"text-[10px] font-bold text-slate-400 uppercase tracking-wide\">\n                  Mgr: {identity.managerName} <span className=\"text-slate-300\">‚Ä¢</span> {identity.managerPhone}\n                </p>\n              </div>\n            )}\n          </div>\n          <div className=\"flex gap-2\">\n            <button onClick={fetchData} className=\"p-2 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-100 transition-colors active:scale-90\">\n              <RefreshCw className=\"w-4 h-4\" />\n            </button>\n            <Link href=\"/mobilepos/history\" className=\"p-2 bg-slate-50 text-slate-500 rounded-full hover:bg-slate-100 transition-colors active:scale-90\" title=\"Sales History\">\n              <span className=\"sr-only\">History</span>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"w-4 h-4\"><path d=\"M3 3v5h5\" /><path d=\"M3.05 13A9 9 0 1 0 6 5.3L3 8\" /></svg>\n            </Link>\n            <Link href=\"/mobilepos\" className=\"p-2 bg-slate-50 text-slate-500 rounded-full hover:bg-slate-100 transition-colors active:scale-90\">\n              <Home className=\"w-4 h-4\" />\n            </Link>\n          </div>\n        </div>\n      </div>\n\n      {/* üéØ SALES TARGET PROGRESS CARD */}\n      {identity?.targetProgress && (\n        <div className=\"px-6 mb-6 animate-in slide-in-from-top-4 duration-700 delay-100\">\n          <div className=\"bg-slate-900 rounded-3xl p-5 text-white shadow-xl shadow-slate-900/20 relative overflow-hidden\">\n            <div className=\"flex justify-between items-start mb-4 relative z-10\">\n              <div>\n                <h3 className=\"text-xs font-black uppercase tracking-widest text-slate-400\">Monthly Sales Target</h3>\n                <p className=\"text-lg font-black mt-1\">\n                  {Math.round((identity.targetProgress.achievedValue / identity.targetProgress.targetValue) * 100)}%\n                  <span className=\"text-xs text-slate-500 font-bold ml-2\">Completed</span>\n                </p>\n              </div>\n              <Flag className=\"w-5 h-5 text-blue-500\" />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4 relative z-10\">\n              <div>\n                <p className=\"text-[9px] font-bold text-slate-500 uppercase\">Revenue</p>\n                <p className=\"text-sm font-bold\">‚Çµ {identity.targetProgress.achievedValue.toLocaleString()} <span className=\"text-slate-600\">/ {identity.targetProgress.targetValue.toLocaleString()}</span></p>\n                <div className=\"h-1.5 w-full bg-slate-800 rounded-full mt-2 overflow-hidden\">\n                  <div\n                    className=\"h-full bg-blue-500 rounded-full transition-all duration-1000\"\n                    style={{ width: `${Math.min((identity.targetProgress.achievedValue / identity.targetProgress.targetValue) * 100, 100)}%` }}\n                  />\n                </div>\n              </div>\n              <div>\n                <p className=\"text-[9px] font-bold text-slate-500 uppercase\">Volume</p>\n                <p className=\"text-sm font-bold\">{identity.targetProgress.achievedQuantity} <span className=\"text-slate-600\">/ {identity.targetProgress.targetQuantity}</span></p>\n                <div className=\"h-1.5 w-full bg-slate-800 rounded-full mt-2 overflow-hidden\">\n                  <div\n                    className=\"h-full bg-emerald-500 rounded-full transition-all duration-1000\"\n                    style={{ width: `${Math.min((identity.targetProgress.achievedQuantity / identity.targetProgress.targetQuantity) * 100, 100)}%` }}\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Decor */}\n            <div className=\"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -mr-10 -mt-10 pointer-events-none\" />\n          </div>\n        </div>\n      )}\n\n      {/* VIEW: BROWSE */}\n      {view === 'BROWSE' && (\n        <div className=\"px-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\n          <div className=\"relative mb-6\">\n            <Search className=\"absolute left-4 top-3.5 w-5 h-5 text-slate-400\" />\n            <input\n              placeholder=\"Search SKU or Name...\"\n              className=\"w-full h-12 pl-12 pr-4 rounded-xl text-sm font-bold outline-none border border-slate-200 bg-white focus:border-blue-500 transition-all shadow-sm placeholder:text-slate-300\"\n              value={searchTerm}\n              onChange={e => setSearchTerm(e.target.value)}\n            />\n          </div>\n\n          <div className=\"space-y-4\">\n            {filteredProducts.length > 0 ? (\n              filteredProducts.map(product => {\n                const inCart = cart.find(c => c.id === product.id);\n                const isOutOfStock = product.quantity <= 0;\n\n                return (\n                  <div key={product.id} className=\"p-4 rounded-2xl border border-slate-200 bg-white shadow-sm flex flex-col gap-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-4\">\n                        <div className={`w-12 h-12 rounded-xl flex items-center justify-center ${isOutOfStock ? \"bg-slate-100 text-slate-300\" : \"bg-blue-50 text-blue-600\"}`}>\n                          <Package className=\"w-6 h-6\" />\n                        </div>\n                        <div>\n                          <h3 className=\"font-black text-sm text-slate-900\">{product.productName}</h3>\n                          <div className=\"flex gap-2 items-center\">\n                            <span className={`text-[10px] font-bold uppercase ${isOutOfStock ? \"text-red-500\" : \"text-emerald-500\"}`}>\n                              {isOutOfStock ? \"Out of Stock\" : `${product.quantity} Available`}\n                            </span>\n                          </div>\n                          <p className=\"font-bold text-xs mt-1 text-slate-700\">‚Çµ {product.priceGHS.toLocaleString()}</p>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"w-full\">\n                      {inCart ? (\n                        <div className=\"flex items-center justify-between bg-slate-100 rounded-xl p-1\">\n                          <button onClick={() => updateQty(product.id, -1)} className=\"w-10 h-10 flex items-center justify-center bg-white rounded-lg shadow-sm text-slate-600 font-bold active:scale-90 transition-transform\"><Minus className=\"w-4 h-4\" /></button>\n                          <span className=\"text-sm font-black text-slate-900\">{inCart.cartQty}</span>\n                          <button onClick={() => updateQty(product.id, 1)} className=\"w-10 h-10 flex items-center justify-center bg-white rounded-lg shadow-sm text-slate-600 font-bold active:scale-90 transition-transform\"><Plus className=\"w-4 h-4\" /></button>\n                        </div>\n                      ) : (\n                        <button\n                          disabled={isOutOfStock}\n                          onClick={() => addToCart(product)}\n                          className={`w-full py-3 rounded-xl text-xs font-black uppercase tracking-wide transition-all active:scale-95 ${isOutOfStock\n                            ? \"bg-slate-100 text-slate-400 cursor-not-allowed\"\n                            : \"bg-blue-600 text-white shadow-lg shadow-blue-500/20 hover:bg-blue-700\"\n                            }`}\n                        >\n                          Add to Order\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                );\n              })\n            ) : (\n              <div className=\"text-center py-12 flex flex-col items-center\">\n                <div className=\"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4 text-slate-300\">\n                  <Package className=\"w-8 h-8\" />\n                </div>\n                <p className=\"text-slate-500 font-bold text-sm\">No items found.</p>\n                <p className=\"text-xs text-slate-400 mt-1\">Try a different search term.</p>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* VIEW: CHECKOUT */}\n      {view === 'CHECKOUT' && (\n        <div className=\"flex flex-col h-full px-6 animate-in slide-in-from-right-4 duration-300\">\n          <div className=\"flex items-center gap-4 mb-6\">\n            <button onClick={() => setView('BROWSE')} className=\"p-2 bg-white border border-slate-200 rounded-full text-slate-500 hover:text-slate-900 active:scale-90 transition-transform\">\n              <ArrowLeft className=\"w-5 h-5\" />\n            </button>\n            <h1 className=\"text-xl font-black text-slate-900\">Review Order</h1>\n          </div>\n\n          <div className=\"flex-1 space-y-4\">\n            {cart.map(item => (\n              <div key={item.id} className=\"p-4 rounded-2xl border border-slate-200 bg-white flex justify-between items-center shadow-sm\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-1\">\n                    <h4 className=\"font-bold text-sm text-slate-900\">{item.productName}</h4>\n                    <button\n                      onClick={() => {\n                        setEditingItem(item);\n                        setNewPrice(item.priceGHS.toString());\n                      }}\n                      className=\"p-1 px-2 border border-blue-100 bg-blue-50 text-blue-600 rounded-lg text-[10px] font-black uppercase tracking-widest active:scale-95 transition-all\"\n                    >\n                      Edit Price\n                    </button>\n                  </div>\n                  <p className=\"text-xs text-slate-400 font-bold\">‚Çµ {item.priceGHS} x {item.cartQty}</p>\n                </div>\n                <div className=\"flex items-center gap-4 ml-4\">\n                  <p className=\"font-black text-sm text-slate-900\">‚Çµ {(item.priceGHS * item.cartQty).toLocaleString()}</p>\n                  <button onClick={() => removeFromCart(item.id)} className=\"text-red-400 hover:text-red-500 active:scale-90 transition-transform\">\n                    <Trash2 className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          <div className=\"mt-8 p-6 rounded-3xl bg-white border border-slate-200 shadow-xl mb-8\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <span className=\"text-sm font-bold text-slate-500 uppercase tracking-widest\">Total</span>\n              <span className=\"text-3xl font-black text-slate-900\">‚Çµ {cartTotal.toLocaleString()}</span>\n            </div>\n\n            <button\n              disabled={isProcessing}\n              onClick={handleCheckout}\n              className=\"w-full py-5 rounded-2xl font-black text-sm uppercase tracking-widest text-white shadow-xl transition-all active:scale-95 disabled:opacity-50 bg-emerald-600 flex items-center justify-center gap-2 hover:bg-emerald-700\"\n            >\n              {isProcessing ? (\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n              ) : (\n                `SELL ${cart.length} ITEM${cart.length > 1 ? 'S' : ''} ‚Ä¢ ‚Çµ ${cartTotal.toLocaleString()}`\n              )}\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* VIEW: SUCCESS */}\n      {view === 'SUCCESS' && (\n        <div className=\"min-h-screen flex flex-col items-center justify-center text-center px-6 animate-in zoom-in duration-500\">\n          <div className=\"w-24 h-24 bg-emerald-500 rounded-full flex items-center justify-center shadow-2xl shadow-emerald-500/30 mb-8\">\n            <CheckCircle className=\"w-10 h-10 text-white\" />\n          </div>\n          <h2 className=\"text-3xl font-black mb-2 text-slate-900\">Sale Recorded</h2>\n          <p className=\"text-slate-500 font-bold text-sm uppercase tracking-widest mb-8\">Ref: #{lastSaleId.slice(-6).toUpperCase()}</p>\n\n          <div className=\"bg-white p-4 rounded-2xl border border-slate-200 w-full max-w-xs mb-8 shadow-sm\">\n            <p className=\"text-xs font-bold text-slate-400 uppercase mb-1\">Synced To</p>\n            <p className=\"text-sm font-black text-slate-900\">{identity?.shopName}</p>\n          </div>\n\n          <button onClick={() => setView('BROWSE')} className=\"w-full py-4 rounded-xl text-white font-black text-xs uppercase tracking-widest shadow-lg bg-blue-600 active:scale-95 transition-transform hover:bg-blue-700\">\n            Next Customer\n          </button>\n        </div>\n      )}\n\n      {/* VIEW: BROWSE - FLOATING CHECKOUT BAR */}\n      {view === 'BROWSE' && cart.length > 0 && (\n        <div className=\"fixed bottom-24 left-6 right-6 z-30 animate-in slide-in-from-bottom-10 duration-500\">\n          <button\n            onClick={() => setView('CHECKOUT')}\n            className=\"w-full bg-slate-900 border border-slate-800 text-white p-4 rounded-3xl shadow-2xl flex items-center justify-between active:scale-95 transition-transform\"\n          >\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center font-black text-sm\">\n                {cart.reduce((a, b) => a + b.cartQty, 0)}\n              </div>\n              <div className=\"text-left\">\n                <p className=\"text-xs font-bold text-slate-400 uppercase tracking-wider\">Review Order</p>\n                <p className=\"text-sm font-black\">Checkout Now</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2 pr-2\">\n              <span className=\"text-lg font-black text-blue-400\">‚Çµ {cartTotal.toLocaleString()}</span>\n              <ArrowRight className=\"w-5 h-5 text-white\" />\n            </div>\n          </button>\n        </div>\n      )}\n\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}