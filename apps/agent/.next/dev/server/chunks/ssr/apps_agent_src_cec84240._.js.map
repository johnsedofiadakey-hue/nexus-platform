{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/nexus-platform/apps/agent/src/hooks/useDebounce.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\n\n/**\n * üîç DEBOUNCED VALUE HOOK\n * Delays value updates to reduce excessive re-renders\n * Perfect for search inputs\n */\nexport function useDebounce<T>(value: T, delay: number = 300): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n"],"names":[],"mappings":";;;;AAAA;;AAOO,SAAS,YAAe,KAAQ,EAAE,QAAgB,GAAG;IAC1D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,gVAAQ,EAAI;IAExD,IAAA,iVAAS,EAAC;QACR,MAAM,UAAU,WAAW;YACzB,kBAAkB;QACpB,GAAG;QAEH,OAAO;YACL,aAAa;QACf;IACF,GAAG;QAAC;QAAO;KAAM;IAEjB,OAAO;AACT"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/nexus-platform/apps/agent/src/app/mobilepos/inventory/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useMemo } from \"react\";\nimport { Search, Package, AlertTriangle, Loader2, Zap, RefreshCw, ArrowLeft } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useMobileTheme } from \"@/context/MobileThemeContext\";\nimport { useMobileData } from \"@/context/MobileDataContext\";\nimport { useDebounce } from \"@/hooks/useDebounce\";\n\nconst getColorHex = (color: string) => {\n  const colors: Record<string, string> = {\n    blue: \"#2563eb\",\n    purple: \"#9333ea\",\n    rose: \"#e11d48\",\n    amber: \"#d97706\"\n  };\n  return colors[color] || colors.blue;\n};\n\nexport default function InventoryPage() {\n  const { darkMode, accent, themeClasses } = useMobileTheme();\n  const { inventory, loading, refreshInventory, lastSync } = useMobileData();\n  const accentHex = getColorHex(accent);\n\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const debouncedSearch = useDebounce(searchTerm, 300);\n\n  // RECONCILIATION STATE\n  const [isReconciling, setIsReconciling] = useState(false);\n  const [counts, setCounts] = useState<Record<string, number>>({});\n\n  const handleReconcileSubmit = async () => {\n    // For now, we just reset because the user asked for \"provision\" and we don't have a backend endpoint for this yet.\n    // In a real app, this would POST /api/inventory/adjustment\n    setIsReconciling(false);\n    setCounts({});\n    alert(\"Inventory counts updated locally. (Backend sync pending implementation)\");\n  };\n\n  // üéØ MEMOIZED FILTERED PRODUCTS\n  const filteredProducts = useMemo(() => {\n    const products = inventory.map((item: any) => ({\n      dbId: item.id,\n      name: item.productName || item.name,\n      sku: item.sku || item.barcode || \"N/A\",\n      stock: item.stockLevel || item.quantity || 0,\n      price: item.sellingPrice || item.priceGHS || 0,\n      status: (item.stockLevel || item.quantity || 0) < 5 ? \"Low Stock\" : \"Good\"\n    }));\n\n    if (!debouncedSearch) return products;\n    const search = debouncedSearch.toLowerCase();\n    return products.filter((p: any) =>\n      (p.name?.toLowerCase() || \"\").includes(search) ||\n      (p.sku?.toLowerCase() || \"\").includes(search)\n    );\n  }, [inventory, debouncedSearch]);\n\n  if (loading && filteredProducts.length === 0) {\n    return (\n      <div className={`min-h-screen flex flex-col items-center justify-center gap-4 ${themeClasses.bg}`}>\n        <Loader2 className=\"w-8 h-8 animate-spin\" style={{ color: accentHex }} />\n        <p className={`text-[10px] font-black uppercase tracking-[0.3em] ${themeClasses.text}`}>Syncing Stock Room...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`min-h-screen p-4 pb-24 font-sans transition-colors duration-500 ${themeClasses.bg}`}>\n\n      {/* --- FLOATING HEADER --- */}\n      <div className={`p-4 rounded-[2rem] shadow-xl border mb-6 sticky top-4 z-10 ${themeClasses.card} ${themeClasses.border}`}>\n        <div className=\"flex justify-between items-center mb-4\">\n          <div className=\"flex items-center gap-3\">\n            <Link href=\"/mobilepos\" className={`p-2 rounded-full active:scale-90 transition-all ${darkMode ? 'bg-slate-700' : 'bg-slate-100'}`}>\n              <ArrowLeft className={`w-5 h-5 ${themeClasses.text}`} />\n            </Link>\n            <h1 className={`text-xl font-black tracking-tighter ${themeClasses.text}`}>Stock Room</h1>\n          </div>\n          <button\n            onClick={() => setIsReconciling(!isReconciling)}\n            className={`p-3 rounded-2xl active:scale-90 transition-all duration-300 mr-2 ${isReconciling ? 'bg-amber-500 text-white shadow-lg shadow-amber-500/40' : ''}`}\n            style={!isReconciling ? { backgroundColor: `${accentHex}15`, color: accentHex } : {}}\n          >\n            <Zap className=\"w-4 h-4\" fill={isReconciling ? \"currentColor\" : \"none\"} />\n          </button>\n          <button\n            onClick={refreshInventory}\n            className=\"p-3 rounded-2xl active:rotate-180 transition-transform duration-500\"\n            style={{ backgroundColor: `${accentHex}15`, color: accentHex }}\n          >\n            <RefreshCw className=\"w-4 h-4\" />\n          </button>\n        </div>\n\n        {lastSync && (\n          <div className=\"mt-3 pt-3 border-t border-slate-200/50 dark:border-slate-700/50\">\n            <p className=\"text-[9px] font-medium text-slate-400 text-center\">\n              Last synced: {new Date(lastSync).toLocaleTimeString()}\n            </p>\n          </div>\n        )}\n\n        <div className=\"relative mt-4\">\n          <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\n          <input\n            placeholder=\"Search SKU or Name...\"\n            className={`w-full h-14 pl-12 pr-4 rounded-2xl text-sm font-bold outline-none border transition-all ${darkMode ? 'bg-slate-900 border-slate-700 text-white' : 'bg-slate-50 border-slate-100 text-slate-900'\n              }`}\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n        </div>\n      </div>\n\n      {/* --- INVENTORY GRID --- */}\n      <div className=\"space-y-3\">\n        {filteredProducts.length > 0 ? (\n          filteredProducts.map((product) => {\n            const isLow = product.status === \"Low Stock\";\n            // RECONCILIATION LOGIC\n            const manualCount = counts[product.dbId] ?? product.stock;\n            const variance = manualCount - product.stock;\n\n            return (\n              <div key={product.dbId} className={`p-5 rounded-[2rem] border shadow-sm flex items-center justify-between animate-in fade-in slide-in-from-bottom-2 ${themeClasses.card} ${themeClasses.border}`}>\n\n                <div className=\"flex items-center gap-4 flex-1\">\n                  <div className={`w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 ${isLow ? \"bg-red-500/10 text-red-500\" : `bg-blue-500/10`\n                    }`} style={!isLow ? { backgroundColor: `${accentHex}15`, color: accentHex } : {}}>\n                    {isLow ? <AlertTriangle className=\"w-6 h-6\" /> : <Package className=\"w-6 h-6\" />}\n                  </div>\n                  <div className=\"min-w-0\">\n                    <h3 className={`font-black text-sm leading-tight truncate ${themeClasses.text}`}>{product.name}</h3>\n                    <p className=\"text-[10px] font-bold text-slate-400 uppercase mt-1\">SKU: {product.sku}</p>\n                    {isReconciling && variance !== 0 && (\n                      <p className={`text-[10px] font-black uppercase mt-1 ${variance < 0 ? 'text-red-500' : 'text-emerald-500'}`}>\n                        Gap: {variance > 0 ? '+' : ''}{variance}\n                      </p>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"text-right pl-4\">\n                  {isReconciling ? (\n                    <div className=\"flex flex-col items-end\">\n                      <input\n                        type=\"number\"\n                        className={`w-20 h-10 rounded-lg text-center font-black outline-none border focus:border-blue-500 ${darkMode ? 'bg-slate-800 border-slate-700 text-white' : 'bg-slate-50 border-slate-200 text-slate-900'}`}\n                        value={counts[product.dbId] ?? product.stock}\n                        onClick={(e) => e.currentTarget.select()}\n                        onChange={(e) => {\n                          const val = parseInt(e.target.value) || 0;\n                          setCounts(prev => ({ ...prev, [product.dbId]: val }));\n                        }}\n                      />\n                      <span className=\"text-[8px] font-black uppercase tracking-widest text-slate-400 mt-1\">Actual</span>\n                    </div>\n                  ) : (\n                    <>\n                      <p className={`text-lg font-black ${isLow ? \"text-red-500\" : themeClasses.text}`}>\n                        {product.stock}\n                      </p>\n                      <p className=\"text-[9px] font-black text-slate-400 uppercase tracking-widest\">In Stock</p>\n                    </>\n                  )}\n                </div>\n              </div>\n            );\n          })\n        ) : (\n          <div className=\"text-center py-20 opacity-40\">\n            <Package size={48} className={`mx-auto mb-4 ${themeClasses.text}`} strokeWidth={1} />\n            <p className={`text-xs font-black uppercase tracking-widest ${themeClasses.text}`}>No matches found</p>\n          </div>\n        )}\n      </div>\n\n      {isReconciling && (\n        <div className=\"fixed bottom-24 left-6 right-6 z-30\">\n          <button\n            onClick={handleReconcileSubmit}\n            className=\"w-full py-4 bg-emerald-600 text-white rounded-2xl font-black uppercase tracking-widest shadow-xl shadow-emerald-500/30 flex items-center justify-center gap-3 active:scale-95 transition-transform\"\n          >\n            <RefreshCw className=\"w-4 h-4\" /> Sync Inventory\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}