{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/nexus-platform/apps/agent/src/app/auth/signin/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, Suspense } from \"react\";\nimport { signIn, useSession } from \"next-auth/react\";\nimport { useSearchParams } from \"next/navigation\";\nimport {\n Lock, Mail, Loader2,\n  Eye, EyeOff,\n  Smartphone, Zap, TrendingUp, ArrowRight\n} from \"lucide-react\";\nimport { toast } from \"react-hot-toast\";\n\n/**  * ðŸ“± MOBILE-FIRST PROMOTER GREETING\n * Native app feel with energetic design for field promoters\n */\nfunction WelcomeHeader() {\n  const [greeting, setGreeting] = useState(\"Welcome\");\n  const [quote, setQuote] = useState(\"Let's make today count!\");\n\n  useEffect(() => {\n    const hour = new Date().getHours();\n    if (hour < 12) setGreeting(\"Good Morning\");\n    else if (hour < 18) setGreeting(\"Good Afternoon\");\n    else setGreeting(\"Good Evening\");\n\n    const quotes = [\n      \"Let's make today count!\",\n      \"Your hustle powers our success\",\n      \"Time to close those deals! ðŸ’ª\",\n      \"Be the promoter customers love\",\n      \"Every sale is a victory!\"\n    ];\n    setQuote(quotes[Math.floor(Math.random() * quotes.length)]);\n  }, []);\n\n  return (\n    <div className=\"text-center mb-8 space-y-4 animate-in fade-in slide-in-from-top-4 duration-500\">\n      <div className=\"flex justify-center mb-4\">\n        <div className=\"relative\">\n          <div className=\"w-20 h-20 bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-600 rounded-3xl flex items-center justify-center shadow-2xl shadow-indigo-500/50\">\n            <Smartphone className=\"text-white w-10 h-10\" strokeWidth={2} />\n          </div>\n          <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white flex items-center justify-center\">\n            <Zap className=\"text-white w-3 h-3\" fill=\"currentColor\" />\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"space-y-2\">\n        <h1 className=\"text-3xl md:text-4xl font-extrabold text-gray-900 tracking-tight\">\n          {greeting}, Promoter! ðŸŽ¯\n        </h1>\n        <div className=\"flex items-center justify-center gap-2 px-4\">\n          <TrendingUp size={16} className=\"text-indigo-600\" />\n          <p className=\"text-sm text-gray-600 font-medium\">{quote}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction SignInForm() {\n  const searchParams = useSearchParams();\n  const { data: session, status } = useSession();\n  const [mounted, setMounted] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [showPassword, setShowPassword] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useEffect(() => { setMounted(true); }, []);\n\n  useEffect(() => {\n    if (status === \"authenticated\" && session?.user && mounted) {\n      const role = (session.user as any).role;\n      const isPromoterRole = ['WORKER', 'AGENT', 'ASSISTANT'].includes(role);\n      if (!isPromoterRole) {\n        toast.error(\"This portal is for Promoters only.\");\n        import(\"next-auth/react\").then(({ signOut }) => signOut({ redirect: false }));\n        return;\n      }\n      const callbackUrl = searchParams.get(\"callbackUrl\") || \"/mobilepos\";\n      window.location.href = callbackUrl;\n    }\n  }, [status, session, searchParams, mounted]);\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (isSubmitting) return;\n    setIsSubmitting(true);\n    try {\n      const res = await signIn(\"credentials\", {\n        email: email.toLowerCase().trim(),\n        password: password,\n        redirect: false,\n      });\n      if (res?.error) {\n        toast.error(\"Invalid credentials. Double-check your info!\");\n        setIsSubmitting(false);\n      } else if (res?.ok) {\n        toast.success(\"Welcome back! ðŸŽ‰\");\n      } else {\n        toast.error(\"Login failed. Please try again.\");\n        setIsSubmitting(false);\n      }\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      toast.error(\"Connection error. Check your internet.\");\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!mounted) return null;\n\n  return (\n    <div className=\"w-full max-w-sm mx-auto space-y-6 animate-in zoom-in-95 duration-500\">\n      <WelcomeHeader />\n      <form onSubmit={handleLogin} className=\"bg-white p-6 md:p-8 rounded-3xl shadow-2xl shadow-indigo-500/20 space-y-6 relative overflow-hidden border border-gray-100\">\n        <div className=\"absolute -top-24 -right-24 w-48 h-48 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-full blur-3xl\" />\n        <div className=\"absolute -bottom-24 -left-24 w-48 h-48 bg-gradient-to-br from-indigo-500/20 to-pink-500/20 rounded-full blur-3xl\" />\n        <div className=\"relative space-y-5\">\n          <div className=\"space-y-2\">\n            <label className=\"text-xs font-bold text-gray-600 uppercase tracking-wide ml-1\">Email or Phone</label>\n            <div className=\"relative\">\n              <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n              <input required type=\"email\" placeholder=\"your@email.com\" className=\"w-full h-14 pl-12 pr-4 bg-gray-50 border-2 border-gray-200 rounded-2xl text-base font-semibold text-gray-900 outline-none focus:bg-white focus:border-indigo-500 transition-all placeholder:text-gray-400\" value={email} onChange={(e) => setEmail(e.target.value)} autoComplete=\"email\" />\n            </div>\n          </div>\n          <div className=\"space-y-2\">\n            <label className=\"text-xs font-bold text-gray-600 uppercase tracking-wide ml-1\">Password</label>\n            <div className=\"relative\">\n              <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n              <input required type={showPassword ? \"text\" : \"password\"} placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\" className=\"w-full h-14 pl-12 pr-12 bg-gray-50 border-2 border-gray-200 rounded-2xl text-base font-semibold text-gray-900 outline-none focus:bg-white focus:border-indigo-500 transition-all placeholder:text-gray-400\" value={password} onChange={(e) => setPassword(e.target.value)} autoComplete=\"current-password\" />\n              <button type=\"button\" onClick={() => setShowPassword(!showPassword)} className=\"absolute right-4 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-gray-700 transition-colors rounded-full hover:bg-gray-100 active:scale-95\">\n                {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}\n              </button>\n            </div>\n          </div>\n          <button type=\"submit\" disabled={isSubmitting || status === \"loading\"} className=\"group w-full h-14 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 hover:from-indigo-700 hover:via-purple-700 hover:to-pink-700 text-white rounded-2xl font-bold text-base tracking-wide flex items-center justify-center gap-3 active:scale-[0.98] transition-all shadow-xl shadow-indigo-500/40 disabled:opacity-70 disabled:shadow-none disabled:cursor-not-allowed mt-8\">\n            {isSubmitting || status === \"loading\" ? (<><Loader2 className=\"animate-spin w-5 h-5\" /><span>Logging you in...</span></>) : (<><span>Get Started</span><ArrowRight size={20} className=\"group-hover:translate-x-1 transition-transform\" /></>)}\n          </button>\n        </div>\n        <p className=\"text-center text-xs text-gray-500 mt-6\">Forgot password? Contact your supervisor</p>\n      </form>\n      <p className=\"text-center text-[10px] font-bold text-gray-300 uppercase tracking-widest pt-2\">Promoter Portal v2.0</p>\n    </div>\n  );\n}\n\nexport default function SignInPage() {\n  return (\n    <div className=\"min-h-[100dvh] bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4 selection:bg-indigo-100 relative overflow-hidden\">\n      <div className=\"fixed inset-0 pointer-events-none\">\n        <div className=\"absolute top-[-10%] right-[-5%] w-96 h-96 bg-blue-200/40 rounded-full blur-[100px] animate-pulse\" />\n        <div className=\"absolute bottom-[-10%] left-[-5%] w-96 h-96 bg-purple-200/40 rounded-full blur-[100px] animate-pulse delay-700\" />\n      </div>\n      <div className=\"relative w-full z-10\">\n        <Suspense fallback={<div className=\"w-full max-w-sm mx-auto h-96 bg-white/80 backdrop-blur-xl rounded-3xl border border-white/80 flex flex-col items-center justify-center gap-4 shadow-2xl\"><Loader2 className=\"animate-spin text-indigo-400\" size={40} /><span className=\"text-sm font-bold text-gray-500\">Loading...</span></div>}>\n          <SignInForm />\n</Suspense>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}