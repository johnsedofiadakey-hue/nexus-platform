{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/nexus-platform/apps/admin/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\n/**\n * üõ°Ô∏è SECURE PRISMA CLIENT CONFIGURATION\n * \n * Database: Supabase PostgreSQL (Transaction Pooler)\n * Connection: Uses environment variables for security\n * Mode: Transaction pooling (pgbouncer=true required)\n */\n\nconst globalForPrisma = global as unknown as { prisma: PrismaClient | undefined };\n\nfunction getPrismaClient() {\n  if (globalForPrisma.prisma) {\n    return globalForPrisma.prisma;\n  }\n\n  // Build time: return a dummy client that will fail at runtime if used\n  if (!process.env.DATABASE_URL) {\n    // During build, create a minimal client that won't actually connect\n    const client = new PrismaClient({\n      log: [],\n    });\n    \n    if (process.env.NODE_ENV !== \"production\") {\n      globalForPrisma.prisma = client;\n    }\n    \n    return client;\n  }\n\n  // Runtime: create properly configured client\n  const baseUrl = process.env.DATABASE_URL;\n  const connectionUrl = baseUrl.includes(\"?\")\n    ? `${baseUrl}&pgbouncer=true&connection_limit=1`\n    : `${baseUrl}?pgbouncer=true&connection_limit=1`;\n\n  const client = new PrismaClient({\n    datasources: {\n      db: {\n        url: connectionUrl,\n      },\n    },\n    log: process.env.NODE_ENV === \"development\" ? [\"error\", \"warn\"] : [\"error\"],\n  });\n\n  if (process.env.NODE_ENV !== \"production\") {\n    globalForPrisma.prisma = client;\n  }\n\n  return client;\n}\n\nexport const prisma = getPrismaClient();"],"names":[],"mappings":";;;;AAAA;;AAEA;;;;;;CAMC,GAED,MAAM;AAEN,SAAS;IACP,IAAI,gBAAgB,MAAM,EAAE;QAC1B,OAAO,gBAAgB,MAAM;IAC/B;IAEA,sEAAsE;IACtE,IAAI,CAAC,QAAQ,GAAG,CAAC,YAAY,EAAE;QAC7B,oEAAoE;QACpE,MAAM,SAAS,IAAI,sMAAY,CAAC;YAC9B,KAAK,EAAE;QACT;QAEA,wCAA2C;YACzC,gBAAgB,MAAM,GAAG;QAC3B;QAEA,OAAO;IACT;IAEA,6CAA6C;IAC7C,MAAM,UAAU,QAAQ,GAAG,CAAC,YAAY;IACxC,MAAM,gBAAgB,QAAQ,QAAQ,CAAC,OACnC,GAAG,QAAQ,kCAAkC,CAAC,GAC9C,GAAG,QAAQ,kCAAkC,CAAC;IAElD,MAAM,SAAS,IAAI,sMAAY,CAAC;QAC9B,aAAa;YACX,IAAI;gBACF,KAAK;YACP;QACF;QACA,KAAK,uCAAyC;YAAC;YAAS;SAAO,GAAG;IACpE;IAEA,wCAA2C;QACzC,gBAAgB,MAAM,GAAG;IAC3B;IAEA,OAAO;AACT;AAEO,MAAM,SAAS"}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/nexus-platform/apps/admin/src/lib/auth.ts"],"sourcesContent":["import { NextAuthOptions } from \"next-auth\";\nimport CredentialsProvider from \"next-auth/providers/credentials\";\nimport { prisma } from \"@/lib/prisma\";\nimport { compare } from \"bcryptjs\";\n\n// Check for required environment variables\nif (!process.env.NEXTAUTH_SECRET) {\n  console.error(\"‚ùå CRITICAL: NEXTAUTH_SECRET is not set!\");\n  console.error(\"Generate one with: openssl rand -base64 32\");\n}\n\nif (!process.env.DATABASE_URL) {\n  console.error(\"‚ùå CRITICAL: DATABASE_URL is not set!\");\n}\n\n// üö® CRITICAL: Check NEXTAUTH_URL for deployment\nif (!process.env.NEXTAUTH_URL) {\n  console.error(\"‚ö†Ô∏è  WARNING: NEXTAUTH_URL is not set!\");\n  console.error(\"This can cause refresh loops in production.\");\n  console.error(\"Set it to your deployment URL: https://your-app.vercel.app\");\n} else if (process.env.NEXTAUTH_URL.includes('localhost') && process.env.NODE_ENV === 'production') {\n  console.error(\"üî¥ CRITICAL ERROR: NEXTAUTH_URL is set to localhost in production!\");\n  console.error(\"Current value:\", process.env.NEXTAUTH_URL);\n  console.error(\"This WILL cause refresh loops. Update to your actual domain!\");\n}\n\nexport const authOptions: NextAuthOptions = {\n  debug: process.env.NODE_ENV === 'development',\n\n  // üîí TRUST HOST for Vercel/production deployments\n  // This prevents callback URL mismatches\n  trustHost: true,\n\n  // üç™ FORCE COOKIES TO STICK (Critical for localhost)\n  cookies: {\n    sessionToken: {\n      name: `next-auth.session-token`,\n      options: {\n        httpOnly: true,\n        sameSite: 'lax',\n        path: '/',\n        secure: process.env.NODE_ENV === 'production'\n      }\n    }\n  },\n\n  session: { \n    strategy: \"jwt\",\n    maxAge: 30 * 24 * 60 * 60, // 30 days\n  },\n\n  secret: process.env.NEXTAUTH_SECRET,\n\n  providers: [\n    CredentialsProvider({\n      name: \"Credentials\",\n      credentials: {\n        email: { label: \"Email\", type: \"email\" },\n        password: { label: \"Password\", type: \"password\" }\n      },\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials?.password) return null;\n\n        try {\n          // 1. Find User\n          const user = await prisma.user.findUnique({\n            where: { email: credentials.email.toLowerCase() }\n          });\n\n          if (!user) {\n            console.log(\"User not found:\", credentials.email);\n            return null;\n          }\n\n          // 2. üõ°Ô∏è SECURE PASSWORD CHECK (Bcrypt)\n          const isValid = await compare(credentials.password, user.password);\n\n          if (!isValid) {\n            console.log(\"Invalid password for user:\", credentials.email);\n            return null;\n          }\n\n          console.log(\"‚úÖ User authenticated:\", user.email);\n          \n          return {\n            id: user.id,\n            email: user.email,\n            name: user.name,\n            role: user.role,\n            organizationId: user.organizationId,\n            bankName: user.bankName,\n            bankAccountNumber: user.bankAccountNumber,\n            bankAccountName: user.bankAccountName,\n            ssnitNumber: user.ssnitNumber,\n            commencementDate: user.commencementDate,\n            ghanaCard: user.ghanaCard,\n            dob: user.dob\n          };\n        } catch (error) {\n          console.error(\"‚ùå Auth error:\", error);\n          return null;\n        }\n      }\n    })\n  ],\n\n  callbacks: {\n    async jwt({ token, user }) {\n      if (user) {\n        token.role = (user as any).role;\n        token.id = user.id;\n        token.organizationId = (user as any).organizationId;\n        token.bankName = (user as any).bankName;\n        token.bankAccountNumber = (user as any).bankAccountNumber;\n        token.bankAccountName = (user as any).bankAccountName;\n        token.ssnitNumber = (user as any).ssnitNumber;\n        token.commencementDate = (user as any).commencementDate;\n        token.ghanaCard = (user as any).ghanaCard;\n        token.dob = (user as any).dob;\n      }\n      return token;\n    },\n    async session({ session, token }) {\n      if (session.user) {\n        (session.user as any).role = token.role;\n        (session.user as any).id = token.id;\n        (session.user as any).organizationId = token.organizationId;\n        (session.user as any).bankName = token.bankName;\n        (session.user as any).bankAccountNumber = token.bankAccountNumber;\n        (session.user as any).bankAccountName = token.bankAccountName;\n        (session.user as any).ssnitNumber = token.ssnitNumber;\n        (session.user as any).commencementDate = token.commencementDate;\n        (session.user as any).ghanaCard = token.ghanaCard;\n        (session.user as any).dob = token.dob;\n      }\n      return session;\n    }\n  },\n\n  // üö™ CUSTOM PAGES\n  pages: {\n    signIn: '/auth/signin',\n    error: '/auth/signin', // Redirect errors back to login\n  },\n\n  // Add useSecureCookies for production\n  useSecureCookies: process.env.NODE_ENV === 'production',\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/nexus-platform/apps/admin/src/app/api/analytics/dashboard/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/prisma\";\n\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\n\nexport async function GET() {\n  try {\n    const session = await getServerSession(authOptions);\n    const userId = session?.user?.id;\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n\n    // 1. KPI: Total Revenue (Today)\n    const revenueAgg = await prisma.sale.aggregate({\n      where: { createdAt: { gte: today } },\n      _sum: { totalAmount: true } // FIXED: Changed 'total' to 'totalAmount'\n    });\n\n    // 2. KPI: Active Staff\n    const activeStaffCount = await prisma.attendance.count({\n      where: {\n        date: { gte: today },\n        checkOut: null\n      }\n    });\n\n    // 3. KPI: Inventory Value (Buying Price * Stock)\n    // ‚ö°Ô∏è OPTIMIZED: Use Raw SQL for speed instead of loading all rows\n    const inventoryValRaw: any[] = await prisma.$queryRaw`\n      SELECT SUM(\"buyingPrice\" * \"quantity\") as total_value FROM \"Product\"\n    `;\n    const inventoryValue = inventoryValRaw[0]?.total_value || 0;\n\n    // 4. CHART DATA: Sales Velocity (Last 7 Days)\n    const sevenDaysAgo = new Date();\n    sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\n\n    const recentSales = await prisma.sale.groupBy({\n      by: ['createdAt'],\n      where: { createdAt: { gte: sevenDaysAgo } },\n      _sum: { totalAmount: true },\n    });\n\n    // Format chart data (Group by Day Name)\n    const chartMap = new Map();\n    const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n    recentSales.forEach(entry => {\n      const dayName = days[new Date(entry.createdAt).getDay()];\n      const current = chartMap.get(dayName) || 0;\n      chartMap.set(dayName, current + (entry._sum.totalAmount || 0));\n    });\n\n    const chartData = Array.from(chartMap).map(([name, sales]) => ({ name, sales }));\n\n    // 5. Shop Performance Leaderboard\n    const shopPerformance = await prisma.shop.findMany({\n      take: 5,\n      include: {\n        sales: {\n          where: { createdAt: { gte: today } },\n          select: { totalAmount: true }\n        }\n      }\n    });\n\n    const formattedShopPerf = shopPerformance.map(shop => ({\n      name: shop.name,\n      revenue: shop.sales.reduce((acc, sale) => acc + sale.totalAmount, 0)\n    })).sort((a, b) => b.revenue - a.revenue);\n\n    // 6. üéØ ADMIN TARGET PERFORMANCE\n    let adminTargetData = null;\n    if (userId) {\n      const activeTarget = await prisma.target.findFirst({\n        where: { userId, status: 'ACTIVE', endDate: { gte: new Date() } },\n        orderBy: { createdAt: 'desc' }\n      });\n\n      if (activeTarget) {\n        // Aggregate Sales within Target Period\n        const periodPerformance = await prisma.sale.aggregate({\n          where: {\n            createdAt: {\n              gte: activeTarget.startDate,\n              lte: activeTarget.endDate\n            }\n          },\n          _sum: {\n            totalAmount: true\n          },\n          _count: {\n            id: true // Volume of transactions\n          }\n        });\n\n        // Also get total items sold (volume) if needed, but transaction count is often a good proxy. \n        // If \"Quantity\" means individual items, we need to sum SaleItem.quantity.\n        // Let's assume Target Quantity is 'Units Sold'.\n        const itemsPerformance = await prisma.saleItem.aggregate({\n          where: {\n            sale: {\n              createdAt: {\n                gte: activeTarget.startDate,\n                lte: activeTarget.endDate\n              }\n            }\n          },\n          _sum: {\n            quantity: true\n          }\n        });\n\n        adminTargetData = {\n          ...activeTarget,\n          currentRevenue: periodPerformance._sum.totalAmount || 0,\n          currentVolume: itemsPerformance._sum.quantity || 0\n        };\n      }\n    }\n\n    return NextResponse.json({\n      revenue: revenueAgg._sum.totalAmount || 0,\n      activeStaff: activeStaffCount,\n      inventoryValue,\n      chartData: chartData.length > 0 ? chartData : [{ name: 'Today', sales: 0 }],\n      shopPerformance: formattedShopPerf,\n      adminTarget: adminTargetData\n    });\n\n  } catch (error) {\n    console.error(\"‚ùå DASHBOARD_API_ERROR:\", error);\n    return NextResponse.json({\n      revenue: 0,\n      activeStaff: 0,\n      inventoryValue: 0,\n      chartData: [],\n      shopPerformance: []\n    });\n  }\n}"],"names":[],"mappings":"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"}}]
}