{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/nexus-platform/apps/admin/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\n/**\n * üõ°Ô∏è SECURE PRISMA CLIENT CONFIGURATION\n * \n * Database: Supabase PostgreSQL (Transaction Pooler)\n * Connection: Uses environment variables for security\n * Mode: Transaction pooling (pgbouncer=true required)\n */\n\nconst globalForPrisma = global as unknown as { prisma: PrismaClient | undefined };\n\nfunction getPrismaClient() {\n  if (globalForPrisma.prisma) {\n    return globalForPrisma.prisma;\n  }\n\n  // Build time: return a dummy client that will fail at runtime if used\n  if (!process.env.DATABASE_URL) {\n    // During build, create a minimal client that won't actually connect\n    const client = new PrismaClient({\n      log: [],\n    });\n    \n    if (process.env.NODE_ENV !== \"production\") {\n      globalForPrisma.prisma = client;\n    }\n    \n    return client;\n  }\n\n  // Runtime: create properly configured client\n  const baseUrl = process.env.DATABASE_URL;\n  const connectionUrl = baseUrl.includes(\"?\")\n    ? `${baseUrl}&pgbouncer=true&connection_limit=1`\n    : `${baseUrl}?pgbouncer=true&connection_limit=1`;\n\n  const client = new PrismaClient({\n    datasources: {\n      db: {\n        url: connectionUrl,\n      },\n    },\n    log: process.env.NODE_ENV === \"development\" ? [\"error\", \"warn\"] : [\"error\"],\n  });\n\n  if (process.env.NODE_ENV !== \"production\") {\n    globalForPrisma.prisma = client;\n  }\n\n  return client;\n}\n\nexport const prisma = getPrismaClient();"],"names":[],"mappings":";;;;AAAA;;AAEA;;;;;;CAMC,GAED,MAAM;AAEN,SAAS;IACP,IAAI,gBAAgB,MAAM,EAAE;QAC1B,OAAO,gBAAgB,MAAM;IAC/B;IAEA,sEAAsE;IACtE,IAAI,CAAC,QAAQ,GAAG,CAAC,YAAY,EAAE;QAC7B,oEAAoE;QACpE,MAAM,SAAS,IAAI,sMAAY,CAAC;YAC9B,KAAK,EAAE;QACT;QAEA,wCAA2C;YACzC,gBAAgB,MAAM,GAAG;QAC3B;QAEA,OAAO;IACT;IAEA,6CAA6C;IAC7C,MAAM,UAAU,QAAQ,GAAG,CAAC,YAAY;IACxC,MAAM,gBAAgB,QAAQ,QAAQ,CAAC,OACnC,GAAG,QAAQ,kCAAkC,CAAC,GAC9C,GAAG,QAAQ,kCAAkC,CAAC;IAElD,MAAM,SAAS,IAAI,sMAAY,CAAC;QAC9B,aAAa;YACX,IAAI;gBACF,KAAK;YACP;QACF;QACA,KAAK,uCAAyC;YAAC;YAAS;SAAO,GAAG;IACpE;IAEA,wCAA2C;QACzC,gBAAgB,MAAM,GAAG;IAC3B;IAEA,OAAO;AACT;AAEO,MAAM,SAAS"}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/nexus-platform/apps/admin/src/lib/auth.ts"],"sourcesContent":["import { NextAuthOptions } from \"next-auth\";\nimport CredentialsProvider from \"next-auth/providers/credentials\";\nimport { prisma } from \"@/lib/prisma\";\nimport { compare } from \"bcryptjs\";\n\n// Check for required environment variables\nif (!process.env.NEXTAUTH_SECRET) {\n  console.error(\"‚ùå CRITICAL: NEXTAUTH_SECRET is not set!\");\n  console.error(\"Generate one with: openssl rand -base64 32\");\n}\n\nif (!process.env.DATABASE_URL) {\n  console.error(\"‚ùå CRITICAL: DATABASE_URL is not set!\");\n}\n\n// üö® CRITICAL: Check NEXTAUTH_URL for deployment\nif (!process.env.NEXTAUTH_URL) {\n  console.error(\"‚ö†Ô∏è  WARNING: NEXTAUTH_URL is not set!\");\n  console.error(\"This can cause refresh loops in production.\");\n  console.error(\"Set it to your deployment URL: https://your-app.vercel.app\");\n} else if (process.env.NEXTAUTH_URL.includes('localhost') && process.env.NODE_ENV === 'production') {\n  console.error(\"üî¥ CRITICAL ERROR: NEXTAUTH_URL is set to localhost in production!\");\n  console.error(\"Current value:\", process.env.NEXTAUTH_URL);\n  console.error(\"This WILL cause refresh loops. Update to your actual domain!\");\n}\n\nexport const authOptions: NextAuthOptions = {\n  debug: process.env.NODE_ENV === 'development',\n\n  // üîí TRUST HOST for Vercel/production deployments\n  // This prevents callback URL mismatches\n  trustHost: true,\n\n  // üç™ FORCE COOKIES TO STICK (Critical for localhost)\n  cookies: {\n    sessionToken: {\n      name: `next-auth.session-token`,\n      options: {\n        httpOnly: true,\n        sameSite: 'lax',\n        path: '/',\n        secure: process.env.NODE_ENV === 'production'\n      }\n    }\n  },\n\n  session: { \n    strategy: \"jwt\",\n    maxAge: 30 * 24 * 60 * 60, // 30 days\n  },\n\n  secret: process.env.NEXTAUTH_SECRET,\n\n  providers: [\n    CredentialsProvider({\n      name: \"Credentials\",\n      credentials: {\n        email: { label: \"Email\", type: \"email\" },\n        password: { label: \"Password\", type: \"password\" }\n      },\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials?.password) return null;\n\n        try {\n          // 1. Find User\n          const user = await prisma.user.findUnique({\n            where: { email: credentials.email.toLowerCase() }\n          });\n\n          if (!user) {\n            console.log(\"User not found:\", credentials.email);\n            return null;\n          }\n\n          // 2. üõ°Ô∏è SECURE PASSWORD CHECK (Bcrypt)\n          const isValid = await compare(credentials.password, user.password);\n\n          if (!isValid) {\n            console.log(\"Invalid password for user:\", credentials.email);\n            return null;\n          }\n\n          console.log(\"‚úÖ User authenticated:\", user.email);\n          \n          return {\n            id: user.id,\n            email: user.email,\n            name: user.name,\n            role: user.role,\n            organizationId: user.organizationId,\n            bankName: user.bankName,\n            bankAccountNumber: user.bankAccountNumber,\n            bankAccountName: user.bankAccountName,\n            ssnitNumber: user.ssnitNumber,\n            commencementDate: user.commencementDate,\n            ghanaCard: user.ghanaCard,\n            dob: user.dob\n          };\n        } catch (error) {\n          console.error(\"‚ùå Auth error:\", error);\n          return null;\n        }\n      }\n    })\n  ],\n\n  callbacks: {\n    async jwt({ token, user }) {\n      if (user) {\n        token.role = (user as any).role;\n        token.id = user.id;\n        token.organizationId = (user as any).organizationId;\n        token.bankName = (user as any).bankName;\n        token.bankAccountNumber = (user as any).bankAccountNumber;\n        token.bankAccountName = (user as any).bankAccountName;\n        token.ssnitNumber = (user as any).ssnitNumber;\n        token.commencementDate = (user as any).commencementDate;\n        token.ghanaCard = (user as any).ghanaCard;\n        token.dob = (user as any).dob;\n      }\n      return token;\n    },\n    async session({ session, token }) {\n      if (session.user) {\n        (session.user as any).role = token.role;\n        (session.user as any).id = token.id;\n        (session.user as any).organizationId = token.organizationId;\n        (session.user as any).bankName = token.bankName;\n        (session.user as any).bankAccountNumber = token.bankAccountNumber;\n        (session.user as any).bankAccountName = token.bankAccountName;\n        (session.user as any).ssnitNumber = token.ssnitNumber;\n        (session.user as any).commencementDate = token.commencementDate;\n        (session.user as any).ghanaCard = token.ghanaCard;\n        (session.user as any).dob = token.dob;\n      }\n      return session;\n    }\n  },\n\n  // üö™ CUSTOM PAGES\n  pages: {\n    signIn: '/auth/signin',\n    error: '/auth/signin', // Redirect errors back to login\n  },\n\n  // Add useSecureCookies for production\n  useSecureCookies: process.env.NODE_ENV === 'production',\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/nexus-platform/apps/admin/src/lib/activity-logger.ts"],"sourcesContent":["import { prisma } from \"./prisma\";\n\nexport interface ActivityLogParams {\n  userId: string;\n  userName: string;\n  userRole: string;\n  action: string;\n  entity: string;\n  entityId?: string;\n  description: string;\n  metadata?: any;\n  ipAddress?: string;\n  userAgent?: string;\n  shopId?: string;\n  shopName?: string;\n}\n\n/**\n * Master Activity Logger - Logs all system activities\n * This captures every meaningful action from agents, admins, and all users\n */\nexport async function logActivity(params: ActivityLogParams) {\n  try {\n    await prisma.activityLog.create({\n      data: {\n        userId: params.userId,\n        userName: params.userName,\n        userRole: params.userRole,\n        action: params.action,\n        entity: params.entity,\n        entityId: params.entityId,\n        description: params.description,\n        metadata: params.metadata || {},\n        ipAddress: params.ipAddress,\n        userAgent: params.userAgent,\n        shopId: params.shopId,\n        shopName: params.shopName,\n      },\n    });\n  } catch (error) {\n    console.error(\"‚ùå Activity Logger Error:\", error);\n    // Don't throw - logging failures shouldn't break the main operation\n  }\n}\n\n/**\n * Log target-related activities with history tracking\n */\nexport async function logTargetActivity(\n  targetId: string,\n  userId: string,\n  action: \"CREATED\" | \"UPDATED\" | \"DELETED\" | \"PROGRESS_UPDATE\",\n  previousValue?: any,\n  newValue?: any,\n  progress?: number,\n  achievedValue?: number,\n  achievedQuantity?: number,\n  notes?: string\n) {\n  try {\n    await prisma.targetHistory.create({\n      data: {\n        targetId,\n        userId,\n        action,\n        previousValue: previousValue || {},\n        newValue: newValue || {},\n        progress: progress || 0,\n        achievedValue: achievedValue || 0,\n        achievedQuantity: achievedQuantity || 0,\n        notes,\n      },\n    });\n  } catch (error) {\n    console.error(\"‚ùå Target History Logger Error:\", error);\n  }\n}\n\n/**\n * Helper to get client IP from request headers\n */\nexport function getClientIp(request: Request): string | undefined {\n  const forwarded = request.headers.get(\"x-forwarded-for\");\n  const realIp = request.headers.get(\"x-real-ip\");\n  \n  if (forwarded) {\n    return forwarded.split(\",\")[0].trim();\n  }\n  \n  return realIp || undefined;\n}\n\n/**\n * Helper to get user agent from request headers\n */\nexport function getUserAgent(request: Request): string | undefined {\n  return request.headers.get(\"user-agent\") || undefined;\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAqBO,eAAe,YAAY,MAAyB;IACzD,IAAI;QACF,MAAM,iJAAM,CAAC,WAAW,CAAC,MAAM,CAAC;YAC9B,MAAM;gBACJ,QAAQ,OAAO,MAAM;gBACrB,UAAU,OAAO,QAAQ;gBACzB,UAAU,OAAO,QAAQ;gBACzB,QAAQ,OAAO,MAAM;gBACrB,QAAQ,OAAO,MAAM;gBACrB,UAAU,OAAO,QAAQ;gBACzB,aAAa,OAAO,WAAW;gBAC/B,UAAU,OAAO,QAAQ,IAAI,CAAC;gBAC9B,WAAW,OAAO,SAAS;gBAC3B,WAAW,OAAO,SAAS;gBAC3B,QAAQ,OAAO,MAAM;gBACrB,UAAU,OAAO,QAAQ;YAC3B;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;IAC1C,oEAAoE;IACtE;AACF;AAKO,eAAe,kBACpB,QAAgB,EAChB,MAAc,EACd,MAA6D,EAC7D,aAAmB,EACnB,QAAc,EACd,QAAiB,EACjB,aAAsB,EACtB,gBAAyB,EACzB,KAAc;IAEd,IAAI;QACF,MAAM,iJAAM,CAAC,aAAa,CAAC,MAAM,CAAC;YAChC,MAAM;gBACJ;gBACA;gBACA;gBACA,eAAe,iBAAiB,CAAC;gBACjC,UAAU,YAAY,CAAC;gBACvB,UAAU,YAAY;gBACtB,eAAe,iBAAiB;gBAChC,kBAAkB,oBAAoB;gBACtC;YACF;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;IAClD;AACF;AAKO,SAAS,YAAY,OAAgB;IAC1C,MAAM,YAAY,QAAQ,OAAO,CAAC,GAAG,CAAC;IACtC,MAAM,SAAS,QAAQ,OAAO,CAAC,GAAG,CAAC;IAEnC,IAAI,WAAW;QACb,OAAO,UAAU,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI;IACrC;IAEA,OAAO,UAAU;AACnB;AAKO,SAAS,aAAa,OAAgB;IAC3C,OAAO,QAAQ,OAAO,CAAC,GAAG,CAAC,iBAAiB;AAC9C"}},
    {"offset": {"line": 372, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/nexus-platform/apps/admin/src/app/api/hr/member/%5Bid%5D/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/prisma\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth\";\nimport bcrypt from \"bcryptjs\";import { logActivity, getClientIp, getUserAgent } from \"@/lib/activity-logger\";\n// --- üõ∞Ô∏è GET: SYNC COMPLETE MEMBER INTEL ---\nexport async function GET(\n  req: Request,\n  props: { params: Promise<{ id: string }> }\n) {\n  try {\n    const session = await getServerSession(authOptions);\n    if (!session) return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n\n    const params = await props.params;\n    const { id } = params;\n\n    if (!id) return NextResponse.json({ error: \"Missing ID\" }, { status: 400 });\n\n    console.log(`Syncing records for Operative: ${id}`);\n\n    const whereClause: any = { id };\n\n    // üîê Tenant Isolation (Bypass for Super Admin)\n    if (session.user.role !== 'SUPER_ADMIN') {\n      whereClause.organizationId = session.user.organizationId;\n    }\n\n    const { searchParams } = new URL(req.url);\n    const light = searchParams.get('light') === 'true';\n\n    const include: any = {\n      shop: {\n        select: {\n          id: true, name: true, location: true,\n          latitude: true, longitude: true, radius: true\n        }\n      },\n      targets: { where: { status: 'ACTIVE' }, orderBy: { endDate: 'desc' } }\n    };\n\n    if (!light) {\n      include.sales = { take: 20, orderBy: { createdAt: 'desc' } };\n      include.dailyReports = { take: 50, orderBy: { createdAt: 'desc' } };\n      include.attendance = { take: 30, orderBy: { date: 'desc' } };\n      include.leaves = { take: 50, orderBy: { createdAt: 'desc' } };\n      include.disciplinary = { take: 30, orderBy: { createdAt: 'desc' } };\n      include.sentMessages = { take: 20, orderBy: { createdAt: 'desc' } };\n      include.receivedMessages = { take: 20, orderBy: { createdAt: 'desc' } };\n    } else {\n      // Light mode might still need minimal disciplinary for geofence breaches if required by the UI\n      include.disciplinary = { take: 30, orderBy: { createdAt: 'desc' } };\n    }\n\n    // Add query timeout protection\n    const queryPromise = prisma.user.findFirst({\n      where: whereClause,\n      include\n    });\n\n    const timeoutPromise = new Promise((_, reject) => \n      setTimeout(() => reject(new Error('Database query timeout')), 10000)\n    );\n\n    const user = await Promise.race([queryPromise, timeoutPromise]) as any;\n\n    if (!user) {\n      console.log(`Member not found with ID: ${id}`);\n      return NextResponse.json({ \n        error: \"Member not found\",\n        details: `No agent found with ID: ${id}. Check if this person exists in your organization.`\n      }, { status: 404 });\n    }\n\n    const disciplinaryLog = user.disciplinary || [];\n\n    // Combine messages into a unified timeline\n    const chatHistory = [...(user.sentMessages || []), ...(user.receivedMessages || [])]\n      .sort((a: any, b: any) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime());\n\n    // üìà GEOSPATIAL ANALYSIS: Calculate Breaches for the Performance Chart\n    const geofenceStats = disciplinaryLog\n      .filter(log => log.type === 'GEOFENCE_BREACH')\n      .reduce((acc: any[], log) => {\n        const logDate = log.createdAt || new Date();\n        const day = new Date(logDate).toLocaleDateString('en-US', { weekday: 'short' });\n        const existing = acc.find(a => a.name === day);\n        if (existing) {\n          existing.breaches += 1;\n        } else {\n          acc.push({ name: day, breaches: 1 });\n        }\n        return acc;\n      }, []);\n\n    return NextResponse.json({\n      ...user,\n      disciplinaryLog,\n      messages: chatHistory,\n      geofenceStats,\n      viewerId: session.user.id,\n      targets: user.targets || []\n    });\n\n  } catch (error: any) {\n    console.error(\"System Sync Error:\", error);\n    console.error(\"Error Details:\", {\n      message: error.message,\n      code: error.code,\n      meta: error.meta,\n      stack: error.stack?.split('\\n').slice(0, 3).join('\\n')\n    });\n\n    // ÔøΩ Database Connection Error\n    if (error.message?.includes(\"Can't reach database server\") || \n        error.message?.includes(\"ECONNREFUSED\") ||\n        error.message?.includes(\"getaddrinfo\") ||\n        error.code === 'P1001') {\n      return NextResponse.json({\n        error: \"Database connection failed\",\n        code: \"DB_CONNECTION_ERROR\",\n        details: \"Cannot reach database server. Please verify DATABASE_URL is configured correctly in environment variables.\",\n        hint: \"Check .env file or run: ./setup-nexus.sh\"\n      }, { status: 503 });\n    }\n\n    // üõ°Ô∏è Prepared Statement Guard\n    if (error.message?.includes(\"prepared statement\")) {\n      return NextResponse.json({\n        error: \"Database Connection Refused. System cache desync.\",\n        code: \"PG_POOLER_RESET\",\n        details: error.message\n      }, { status: 503 });\n    }\n\n    // üîç Schema Migration Required\n    if (error.code === 'P2021' || error.message?.includes('does not exist')) {\n      return NextResponse.json({\n        error: \"Database schema out of sync. Migration required.\",\n        code: \"SCHEMA_MISMATCH\",\n        details: \"Run: npx prisma db push\",\n        hint: error.message\n      }, { status: 503 });\n    }\n\n    // üîê Environment Variable Missing\n    if (error.message?.includes(\"Environment variable\") || \n        error.message?.includes(\"DATABASE_URL\")) {\n      return NextResponse.json({\n        error: \"Database not configured\",\n        code: \"ENV_MISSING\",\n        details: \"DATABASE_URL environment variable is not set. Please configure your database connection.\",\n        hint: \"Create/edit .env file with DATABASE_URL or run: ./setup-nexus.sh\"\n      }, { status: 503 });\n    }\n\n    return NextResponse.json({ \n      error: \"Failed to sync records\",\n      details: error.message,\n      code: error.code || \"UNKNOWN\"\n    }, { status: 500 });\n  }\n}\n\n// --- üõ†Ô∏è PATCH: ADMINISTRATIVE OVERRIDES ---\nexport async function PATCH(\n  req: Request,\n  props: { params: Promise<{ id: string }> }\n) {\n  try {\n    const session = await getServerSession(authOptions);\n    if (!session) return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n\n    const params = await props.params;\n    const { id } = params;\n\n    const body = await req.json();\n    const { action, ...payload } = body;\n\n    // Verify ownership first\n    // Verify ownership first (God Mode for Super Admin)\n    const whereCheck: any = { id };\n    if (session.user.role !== 'SUPER_ADMIN') {\n      whereCheck.organizationId = session.user.organizationId;\n    }\n\n    const targetUser = await prisma.user.findFirst({ where: whereCheck });\n    if (!targetUser) return NextResponse.json({ error: \"Access Denied\" }, { status: 403 });\n\n    if (action === 'UPDATE_PROFILE') {\n      const updateData: any = {\n        name: payload.name,\n        email: payload.email?.toLowerCase().trim(),\n        phone: payload.phone,\n        status: payload.status,\n        shopId: payload.shopId || null,\n        bypassGeofence: payload.bypassGeofence,\n        bankName: payload.bankName || null,\n        bankAccountNumber: payload.bankAccountNumber || null,\n        bankAccountName: payload.bankAccountName || null,\n        ssnitNumber: payload.ssnitNumber || null,\n      };\n\n      // üèÜ Sync Organization if Shop is changed\n      if (payload.shopId && payload.shopId !== targetUser.shopId) {\n        const newShop = await prisma.shop.findUnique({\n          where: { id: payload.shopId },\n          select: { organizationId: true }\n        });\n        if (newShop) {\n          updateData.organizationId = newShop.organizationId;\n        }\n      }\n\n      if (payload.commencementDate) {\n        const parsedDate = new Date(payload.commencementDate);\n        if (!isNaN(parsedDate.getTime())) {\n          updateData.commencementDate = parsedDate;\n        }\n      } else {\n        updateData.commencementDate = null;\n      }\n\n      if (payload.password && payload.password.length > 0) {\n        updateData.password = await bcrypt.hash(payload.password, 12);\n      }\n\n      const updated = await prisma.user.update({\n        where: { id },\n        data: updateData\n      });\n\n      // üìä Log Activity\n      await logActivity({\n        userId: session.user.id,\n        userName: session.user.name || \"Unknown\",\n        userRole: session.user.role || \"USER\",\n        action: \"USER_UPDATED\",\n        entity: \"User\",\n        entityId: id,\n        description: `Updated profile for \"${updated.name}\"`,\n        metadata: { targetUserId: id, changes: payload },\n        ipAddress: getClientIp(req),\n        userAgent: getUserAgent(req)\n      });\n\n      return NextResponse.json({ success: true, data: updated });\n    }\n\n    if (action === 'RESET_PASSWORD') {\n      // Standalone action (Legacy/Specific)\n      if (!payload.password) return NextResponse.json({ error: \"Password required\" }, { status: 400 });\n      const hashedPassword = await bcrypt.hash(payload.password, 12);\n      await prisma.user.update({\n        where: { id },\n        data: { password: hashedPassword }\n      });\n      return NextResponse.json({ success: true });\n    }\n\n    if (action === 'MANAGE_LEAVE') {\n      await prisma.leaveRequest.update({\n        where: { id: payload.leaveId }, // Ideally verify leave belongs to this user too\n        data: { status: payload.status }\n      });\n      return NextResponse.json({ success: true });\n    }\n\n    return NextResponse.json({ error: \"Action protocol undefined\" }, { status: 400 });\n\n  } catch (error: any) {\n    console.error(\"Administrative Override Failure:\", error.message);\n    return NextResponse.json({ error: \"Database rejected the override\" }, { status: 500 });\n  }\n}\n\n// --- üóëÔ∏è DELETE: ACCOUNT PURGE ---\nexport async function DELETE(\n  req: Request,\n  props: { params: Promise<{ id: string }> }\n) {\n  try {\n    const session = await getServerSession(authOptions);\n    if (!session || !session.user || !session.user.organizationId) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n    }\n\n    const params = await props.params;\n    const { id } = params;\n\n    // Verify ownership first (God Mode for Super Admin)\n    const whereCheck: any = { id };\n    if (session.user.role !== 'SUPER_ADMIN') {\n      whereCheck.organizationId = session.user.organizationId;\n    }\n\n    const targetUser = await prisma.user.findFirst({ where: whereCheck });\n    if (!targetUser) return NextResponse.json({ error: \"Access Denied\" }, { status: 403 });\n\n    // First delete or unassign related records if Prisma relation isn't set to Cascade\n    await prisma.user.delete({ where: { id } });\n\n    // üìä Log Activity\n    await logActivity({\n      userId: session.user.id,\n      userName: session.user.name || \"Unknown\",\n      userRole: session.user.role || \"USER\",\n      action: \"USER_DELETED\",\n      entity: \"User\",\n      entityId: id,\n      description: `Deleted user \"${targetUser.name}\"`,\n      metadata: { deletedUserId: id, deletedUserName: targetUser.name, deletedUserEmail: targetUser.email },\n      ipAddress: getClientIp(req),\n      userAgent: getUserAgent(req)\n    });\n\n    return NextResponse.json({ success: true });\n\n  } catch (error: any) {\n    console.error(\"Purge Error:\", error.message);\n    return NextResponse.json({ error: \"Failed to remove personnel\" }, { status: 500 });\n  }\n}"],"names":[],"mappings":"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"}}]
}