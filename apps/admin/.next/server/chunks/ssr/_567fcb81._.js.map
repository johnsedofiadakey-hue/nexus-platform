{"version":3,"sources":["../../../../../../node_modules/.pnpm/lucide-react%400.563.0_react%4019.2.4/node_modules/lucide-react/src/icons/user.ts","../../../../../../apps/admin/src/app/dashboard/settings/audit/page.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2', key: '975kel' }],\n  ['circle', { cx: '12', cy: '7', r: '4', key: '17ys0d' }],\n];\n\n/**\n * @component @name User\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTkgMjF2LTJhNCA0IDAgMCAwLTQtNEg5YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/user\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst User = createLucideIcon('user', __iconNode);\n\nexport default User;\n","\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { ShieldCheck, Search, FileText, User, RefreshCw, Loader2 } from \"lucide-react\";\n\nexport default function AuditLogPage() {\n    const [logs, setLogs] = useState<any[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [searchTerm, setSearchTerm] = useState(\"\");\n\n    const fetchLogs = async () => {\n        setLoading(true);\n        try {\n            const res = await fetch(\"/api/audit\");\n            const data = await res.json();\n            setLogs(data);\n        } catch (error) {\n            console.error(error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchLogs();\n    }, []);\n\n    const filteredLogs = logs.filter(log =>\n        log.user?.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        log.action.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        log.entity.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    return (\n        <div className=\"p-8 max-w-[1600px] mx-auto animate-in fade-in duration-500\">\n            {/* HEADER */}\n            <div className=\"flex justify-between items-end mb-10\">\n                <div>\n                    <h1 className=\"text-3xl font-black text-slate-900 tracking-tight\">SYSTEM AUDIT</h1>\n                    <p className=\"text-slate-500 font-bold text-xs uppercase tracking-widest mt-2 flex items-center gap-2\">\n                        <ShieldCheck className=\"w-4 h-4 text-emerald-500\" /> Security & Compliance Ledger\n                    </p>\n                </div>\n                <button onClick={fetchLogs} className=\"p-3 bg-white border border-slate-200 rounded-xl hover:text-blue-600 transition-colors\">\n                    <RefreshCw className={`w-5 h-5 ${loading ? 'animate-spin' : ''}`} />\n                </button>\n            </div>\n\n            {/* SEARCH */}\n            <div className=\"bg-white p-4 rounded-2xl border border-slate-200 shadow-sm mb-6 flex items-center gap-4\">\n                <Search className=\"w-5 h-5 text-slate-400\" />\n                <input\n                    placeholder=\"Search by User, Action, or Entity...\"\n                    className=\"flex-1 font-bold text-sm text-slate-700 outline-none placeholder:font-medium placeholder:text-slate-400\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                />\n            </div>\n\n            {/* TABLE */}\n            <div className=\"bg-white rounded-[2.5rem] border border-slate-200 shadow-sm overflow-hidden\">\n                <div className=\"overflow-x-auto\">\n                    <table className=\"w-full text-left\">\n                        <thead className=\"bg-slate-50 border-b border-slate-100\">\n                            <tr>\n                                <th className=\"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest\">Timestamp</th>\n                                <th className=\"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest\">User / Actor</th>\n                                <th className=\"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest\">Action</th>\n                                <th className=\"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest\">Details</th>\n                            </tr>\n                        </thead>\n                        <tbody className=\"divide-y divide-slate-50\">\n                            {loading ? (\n                                <tr>\n                                    <td colSpan={4} className=\"p-20 text-center\">\n                                        <Loader2 className=\"w-8 h-8 animate-spin text-slate-300 mx-auto\" />\n                                    </td>\n                                </tr>\n                            ) : filteredLogs.length === 0 ? (\n                                <tr>\n                                    <td colSpan={4} className=\"p-20 text-center text-slate-400 font-bold text-sm\">No Audit Records Found</td>\n                                </tr>\n                            ) : (\n                                filteredLogs.map((log) => (\n                                    <tr key={log.id} className=\"hover:bg-slate-50/50 transition-colors\">\n                                        <td className=\"px-8 py-4\">\n                                            <span className=\"text-xs font-bold text-slate-500 font-mono\">\n                                                {new Date(log.createdAt).toLocaleString()}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-8 py-4\">\n                                            <div className=\"flex items-center gap-2\">\n                                                <div className=\"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-500\">\n                                                    <User className=\"w-4 h-4\" />\n                                                </div>\n                                                <span className=\"text-sm font-bold text-slate-900\">{log.user?.name || \"Unknown\"}</span>\n                                            </div>\n                                        </td>\n                                        <td className=\"px-8 py-4\">\n                                            <span className={`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wide border ${log.action.includes(\"DELETE\") ? \"bg-red-50 text-red-600 border-red-100\" :\n                                                    log.action.includes(\"CREATE\") ? \"bg-emerald-50 text-emerald-600 border-emerald-100\" :\n                                                        \"bg-blue-50 text-blue-600 border-blue-100\"\n                                                }`}>\n                                                {log.action}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-8 py-4\">\n                                            <div className=\"flex flex-col\">\n                                                <span className=\"text-xs font-bold text-slate-700\">{log.entity} <span className=\"text-slate-400\">#{log.entityId}</span></span>\n                                                <span className=\"text-[10px] text-slate-400 truncate w-64\">{log.details}</span>\n                                            </div>\n                                        </td>\n                                    </tr>\n                                ))\n                            )}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}