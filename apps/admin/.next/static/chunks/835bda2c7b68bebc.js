(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,60253,e=>{"use strict";let t=(0,e.i(3645).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],60253)},93192,e=>{"use strict";let t=(0,e.i(3645).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>t],93192)},67669,e=>{"use strict";let t=(0,e.i(3645).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],67669)},51954,e=>{"use strict";let t=(0,e.i(3645).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],51954)},25891,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let a=e.r(85635);function l({reason:e,children:t}){if("u"<typeof window)throw Object.defineProperty(new a.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},68218,(e,t,s)=>{"use strict";function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"encodeURIPath",{enumerable:!0,get:function(){return a}})},45755,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadChunks",{enumerable:!0,get:function(){return i}});let a=e.r(87433),l=e.r(65596),r=e.r(42907),n=e.r(68218),o=e.r(75527);function i({moduleIds:e}){if("u">typeof window)return null;let t=r.workAsyncStorage.getStore();if(void 0===t)return null;let s=[];if(t.reactLoadableManifest&&e){let a=t.reactLoadableManifest;for(let t of e){if(!a[t])continue;let e=a[t].files;s.push(...e)}}if(0===s.length)return null;let i=(0,o.getDeploymentIdQueryOrEmptyString)();return(0,a.jsx)(a.Fragment,{children:s.map(e=>{let s=`${t.assetPrefix}/_next/${(0,n.encodeURIPath)(e)}${i}`;return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:s,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,l.preload)(s,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},29107,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return d}});let a=e.r(87433),l=e.r(44440),r=e.r(25891),n=e.r(45755);function o(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},s=(0,l.lazy)(()=>t.loader().then(o)),d=t.loading;function c(e){let o=d?(0,a.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,c=i?l.Suspense:l.Fragment,u=t.ssr?(0,a.jsxs)(a.Fragment,{children:["u"<typeof window?(0,a.jsx)(n.PreloadChunks,{moduleIds:t.modules}):null,(0,a.jsx)(s,{...e})]}):(0,a.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(c,{...i?{fallback:o}:{},children:u})}return c.displayName="LoadableComponent",c}},50154,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return l}});let a=e.r(81258)._(e.r(29107));function l(e,t){let s={};"function"==typeof e&&(s.loader=e);let l={...s,...t};return(0,a.default)({...l,modules:l.loadableGenerated?.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},4719,e=>{"use strict";var t=e.i(87433),s=e.i(44440),a=e.i(70065),l=e.i(62924),r=e.i(3645);let n=(0,r.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var o=e.i(51954),i=e.i(93192),d=e.i(3214),c=e.i(67669),u=e.i(60253),p=e.i(83428);let x=(0,r.default)("barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]),h=(0,r.default)("circle-arrow-up",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);var m=e.i(27787),b=e.i(66459),f=e.i(98992);let y=(0,e.i(50154).default)(()=>e.A(50432),{loadableGenerated:{modules:[94383]},ssr:!1,loading:()=>(0,t.jsxs)("div",{className:"w-full h-full bg-slate-50 flex flex-col items-center justify-center border border-slate-200 rounded-md",children:[(0,t.jsx)(p.Loader2,{className:"w-5 h-5 text-slate-400 animate-spin mb-2"}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase text-slate-400 tracking-widest",children:"Loading Satellite..."})]})});function g(){let e=(0,l.useParams)(),r=e?.id,[g,j]=(0,s.useState)(null),[v,N]=(0,s.useState)([]),[w,k]=(0,s.useState)(!0),[S,P]=(0,s.useState)(null),[C,M]=(0,s.useState)(""),[O,L]=(0,s.useState)(!1),[z,_]=(0,s.useState)({productName:"",sku:"",priceGHS:"",quantity:"",minStock:"5"}),T=(0,s.useCallback)(async()=>{try{g||k(!0);let[e,t]=await Promise.all([fetch(`/api/shops/${r}`),fetch(`/api/shops/${r}/inventory`)]);if(!e.ok)throw Error("Fetch failed");let s=await e.json(),a=await t.json();j(s),N(Array.isArray(a)?a:[])}catch(e){f.toast.error("Sync failed")}finally{k(!1)}},[r,g]);(0,s.useEffect)(()=>{r&&T()},[r,T]);let R=async()=>{if(!z.productName||!z.priceGHS)return f.toast.error("Name & Price required");let e=f.toast.loading("Saving...");try{if(!(await fetch(`/api/shops/${r}/inventory`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:z.productName.trim(),sku:z.sku.trim(),priceGHS:z.priceGHS,quantity:z.quantity,minStock:z.minStock})})).ok)throw Error("Save failed");f.toast.success("Inventory Added",{id:e}),L(!1),_({productName:"",sku:"",priceGHS:"",quantity:"",minStock:"5"}),T()}catch(t){f.toast.error("Failed",{id:e})}},E=async e=>{let t=prompt("Units to add:");if(!t)return;let s=parseInt(t);if(!isNaN(s)&&!(s<=0)){P(e);try{(await fetch(`/api/shops/${r}/inventory`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"RESTOCK",productId:e,amount:s})})).ok?(f.toast.success("Stock Updated"),T()):f.toast.error("Failed")}finally{P(null)}}},A=async e=>{if(!confirm("Permanently delete item?"))return;let t=f.toast.loading("Deleting...");try{await fetch(`/api/shops/${r}/inventory`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),f.toast.success("Deleted",{id:t}),T()}catch{f.toast.error("Error",{id:t})}},U=v.filter(e=>e.name?.toLowerCase().includes(C.toLowerCase())||e.barcode?.toLowerCase().includes(C.toLowerCase()));return w?(0,t.jsxs)("div",{className:"h-screen w-full bg-white flex flex-col items-center justify-center space-y-4",children:[(0,t.jsx)(p.Loader2,{className:"w-6 h-6 text-slate-900 animate-spin"}),(0,t.jsx)("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Loading Hub Data..."})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-white font-sans text-slate-900",children:[(0,t.jsxs)("div",{className:"sticky top-0 z-30 bg-white border-b border-slate-200 px-6 py-4 flex justify-between items-center shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(a.default,{href:"/dashboard/shops",className:"p-2 -ml-2 text-slate-400 hover:text-slate-900 hover:bg-slate-50 rounded-md transition-colors",children:(0,t.jsx)(n,{size:18})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold tracking-tight text-slate-900",children:g?.name}),(0,t.jsxs)("p",{className:"text-xs font-medium text-slate-500 flex items-center gap-1.5 mt-0.5",children:[(0,t.jsx)(o.MapPin,{size:12})," ",g?.location||"No Location",(0,t.jsx)("span",{className:"text-slate-300",children:"|"}),(0,t.jsxs)("span",{className:"font-bold text-slate-700",children:[v.length," SKUs"]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:T,className:"px-3 py-2 bg-white border border-slate-200 text-slate-600 rounded-md text-xs font-semibold hover:bg-slate-50 transition-all",children:"Refresh Data"}),(0,t.jsxs)("button",{onClick:()=>L(!0),className:"px-3 py-2 bg-slate-900 text-white border border-slate-900 rounded-md text-xs font-semibold hover:bg-slate-800 transition-all flex items-center gap-2 shadow-sm",children:[(0,t.jsx)(d.Plus,{size:14})," Add Inventory"]})]})]}),(0,t.jsxs)("div",{className:"max-w-[1920px] mx-auto p-6 grid grid-cols-12 gap-6",children:[(0,t.jsx)("div",{className:"col-span-12 lg:col-span-5 h-[600px] flex flex-col space-y-4",children:(0,t.jsxs)("div",{className:"bg-white border border-slate-200 rounded-lg p-1 shadow-sm flex-1 flex flex-col",children:[(0,t.jsxs)("div",{className:"flex-1 relative bg-slate-100 rounded overflow-hidden",children:[(0,t.jsx)(y,{shopLat:g?.latitude||5.6037,shopLng:g?.longitude||-.187,shopRadius:g?.radius||50}),(0,t.jsx)("div",{className:"absolute top-3 left-3 z-[400] bg-white/90 backdrop-blur px-3 py-1.5 rounded border border-slate-200 shadow-sm",children:(0,t.jsxs)("p",{className:"text-[10px] font-bold uppercase text-slate-500 tracking-wider flex items-center gap-2",children:[(0,t.jsx)(m.Building2,{size:12})," Hub Location Verification"]})})]}),(0,t.jsxs)("div",{className:"px-4 py-3 bg-slate-50 border-t border-slate-200 flex justify-between items-center rounded-b-lg",children:[(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase text-slate-400",children:"Geofence Radius"}),(0,t.jsxs)("span",{className:"text-xs font-mono font-bold text-slate-700",children:[g?.radius," Meters"]})]})]})}),(0,t.jsxs)("div",{className:"col-span-12 lg:col-span-7 h-[600px] flex flex-col bg-white border border-slate-200 rounded-lg shadow-sm",children:[(0,t.jsxs)("div",{className:"px-5 py-3 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Package,{size:14,className:"text-slate-500"}),(0,t.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-slate-700",children:"Stock Report"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(b.Search,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,t.jsx)("input",{className:"h-8 pl-9 pr-4 bg-white border border-slate-200 rounded-md text-xs focus:border-blue-500 outline-none w-48 transition-all",placeholder:"Search SKU...",value:C,onChange:e=>M(e.target.value)})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,t.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,t.jsx)("thead",{className:"bg-slate-50 text-[10px] uppercase font-bold text-slate-500 sticky top-0 z-10",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-5 py-3 border-b border-slate-200",children:"Item"}),(0,t.jsx)("th",{className:"px-5 py-3 border-b border-slate-200 text-right",children:"Price"}),(0,t.jsx)("th",{className:"px-5 py-3 border-b border-slate-200 text-center",children:"Stock"}),(0,t.jsx)("th",{className:"px-5 py-3 border-b border-slate-200 text-right",children:"Action"})]})}),(0,t.jsxs)("tbody",{className:"divide-y divide-slate-100",children:[U.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors group",children:[(0,t.jsxs)("td",{className:"px-5 py-3",children:[(0,t.jsx)("p",{className:"font-semibold text-sm text-slate-900",children:e.name}),(0,t.jsxs)("p",{className:"text-[10px] text-slate-400 font-mono mt-0.5 flex items-center gap-1",children:[(0,t.jsx)(x,{size:10})," ",e.barcode]})]}),(0,t.jsx)("td",{className:"px-5 py-3 text-right",children:(0,t.jsxs)("p",{className:"font-mono font-bold text-slate-700",children:["â‚µ",(e.sellingPrice||0).toFixed(2)]})}),(0,t.jsx)("td",{className:"px-5 py-3 text-center",children:(0,t.jsxs)("span",{className:`inline-flex items-center justify-center px-2 py-0.5 rounded text-[10px] font-bold border ${e.stockLevel<5?"bg-rose-50 text-rose-700 border-rose-200":"bg-slate-50 text-slate-700 border-slate-200"}`,children:[e.stockLevel," Units"]})}),(0,t.jsx)("td",{className:"px-5 py-3 text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:()=>E(e.id),disabled:S===e.id,className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border border-transparent hover:border-blue-100",children:S===e.id?(0,t.jsx)(p.Loader2,{size:14,className:"animate-spin"}):(0,t.jsx)(h,{size:14})}),(0,t.jsx)("button",{onClick:()=>A(e.id),className:"p-1.5 text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded transition-colors border border-transparent hover:border-rose-100",children:(0,t.jsx)(c.Trash2,{size:14})})]})})]},e.id)),0===U.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"py-20 text-center text-slate-400 text-xs font-medium",children:"No inventory records found."})})]})]})})]})]}),O&&(0,t.jsx)("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-md animate-in zoom-in-95 duration-200 overflow-hidden border border-slate-200",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b border-slate-100 bg-slate-50",children:[(0,t.jsx)("h2",{className:"font-bold text-sm uppercase tracking-wider text-slate-800",children:"New SKU Entry"}),(0,t.jsx)("button",{onClick:()=>L(!1),className:"text-slate-400 hover:text-rose-600",children:(0,t.jsx)(u.X,{size:18})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-5",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Product Name"}),(0,t.jsx)("input",{placeholder:"e.g. 42-inch LCD Monitor",className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-md text-sm font-medium focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all",value:z.productName,onChange:e=>_({...z,productName:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"SKU / Barcode"}),(0,t.jsx)("input",{placeholder:"Scan...",className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-md text-sm font-mono focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all",value:z.sku,onChange:e=>_({...z,sku:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Price (GHS)"}),(0,t.jsx)("input",{type:"number",placeholder:"0.00",className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-md text-sm font-mono focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all",value:z.priceGHS,onChange:e=>_({...z,priceGHS:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Initial Qty"}),(0,t.jsx)("input",{type:"number",placeholder:"0",className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-md text-sm font-mono focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all",value:z.quantity,onChange:e=>_({...z,quantity:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Low Alert"}),(0,t.jsx)("input",{type:"number",placeholder:"5",className:"w-full h-10 px-3 bg-white border border-slate-200 rounded-md text-sm font-mono focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all",value:z.minStock,onChange:e=>_({...z,minStock:e.target.value})})]})]}),(0,t.jsx)("button",{onClick:R,className:"w-full h-10 bg-slate-900 text-white rounded-md text-xs font-bold uppercase tracking-wider hover:bg-slate-800 transition-all shadow-md mt-2",children:"Save to Ledger"})]})]})})]})}e.s(["default",()=>g],4719)},50432,e=>{e.v(t=>Promise.all(["static/chunks/fdad81d0bd9c4c5a.js","static/chunks/6a82c09376b9bd76.js","static/chunks/076efda0d0cae75b.css"].map(t=>e.l(t))).then(()=>t(94383)))}]);