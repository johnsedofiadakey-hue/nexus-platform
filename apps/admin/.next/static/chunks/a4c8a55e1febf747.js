(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76154,e=>{"use strict";let t=(0,e.i(3645).default)("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);e.s(["Map",()=>t],76154)},24977,e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>t])},47826,e=>{"use strict";let t=(0,e.i(3645).default)("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);e.s(["Navigation",()=>t],47826)},93192,e=>{"use strict";let t=(0,e.i(3645).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>t],93192)},60253,e=>{"use strict";let t=(0,e.i(3645).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],60253)},82252,e=>{"use strict";let t=(0,e.i(3645).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>t],82252)},67669,e=>{"use strict";let t=(0,e.i(3645).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],67669)},51954,e=>{"use strict";let t=(0,e.i(3645).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],51954)},25891,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let a=e.r(85635);function l({reason:e,children:t}){if("u"<typeof window)throw Object.defineProperty(new a.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},68218,(e,t,s)=>{"use strict";function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"encodeURIPath",{enumerable:!0,get:function(){return a}})},45755,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadChunks",{enumerable:!0,get:function(){return i}});let a=e.r(87433),l=e.r(65596),r=e.r(42907),o=e.r(68218),n=e.r(75527);function i({moduleIds:e}){if("u">typeof window)return null;let t=r.workAsyncStorage.getStore();if(void 0===t)return null;let s=[];if(t.reactLoadableManifest&&e){let a=t.reactLoadableManifest;for(let t of e){if(!a[t])continue;let e=a[t].files;s.push(...e)}}if(0===s.length)return null;let i=(0,n.getDeploymentIdQueryOrEmptyString)();return(0,a.jsx)(a.Fragment,{children:s.map(e=>{let s=`${t.assetPrefix}/_next/${(0,o.encodeURIPath)(e)}${i}`;return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:s,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,l.preload)(s,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},29107,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return d}});let a=e.r(87433),l=e.r(44440),r=e.r(25891),o=e.r(45755);function n(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},s=(0,l.lazy)(()=>t.loader().then(n)),d=t.loading;function c(e){let n=d?(0,a.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,c=i?l.Suspense:l.Fragment,u=t.ssr?(0,a.jsxs)(a.Fragment,{children:["u"<typeof window?(0,a.jsx)(o.PreloadChunks,{moduleIds:t.modules}):null,(0,a.jsx)(s,{...e})]}):(0,a.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(c,{...i?{fallback:n}:{},children:u})}return c.displayName="LoadableComponent",c}},50154,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return l}});let a=e.r(81258)._(e.r(29107));function l(e,t){let s={};"function"==typeof e&&(s.loader=e);let l={...s,...t};return(0,a.default)({...l,modules:l.loadableGenerated?.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},32171,e=>{"use strict";var t=e.i(87433),s=e.i(44440),a=e.i(51954),l=e.i(3214),r=e.i(93192),o=e.i(82252),n=e.i(60253),i=e.i(83428),d=e.i(3645);let c=(0,d.default)("package-plus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);var u=e.i(67669),x=e.i(47826);let m=(0,d.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var b=e.i(98701),p=e.i(66459),h=e.i(39200);let g=(0,d.default)("folder-tree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);var f=e.i(76016),j=e.i(70471);let y=(0,d.default)("layout-list",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);var N=e.i(76154),v=e.i(98992),w=e.i(50154),k=e.i(34821),S=e.i(48899);let C=(0,w.default)(()=>e.A(3339),{loadableGenerated:{modules:[9887]},ssr:!1,loading:()=>(0,t.jsxs)("div",{className:"h-full w-full bg-slate-50 flex flex-col items-center justify-center rounded-xl border border-slate-200",children:[(0,t.jsx)(i.Loader2,{className:"w-8 h-8 text-blue-600 animate-spin mb-3"}),(0,t.jsx)("span",{className:"text-xs font-bold uppercase text-slate-400 tracking-wider",children:"Loading Satellite Network..."})]})});function E(){let[e,d]=(0,s.useState)([]),[w,E]=(0,s.useState)(!0),[M,O]=(0,s.useState)(!0),[P,T]=(0,s.useState)("NONE"),[z,I]=(0,s.useState)(!1),[L,R]=(0,s.useState)(null),[A,D]=(0,s.useState)([]),[_,V]=(0,s.useState)(!1),[F,$]=(0,s.useState)(!1),[H,U]=(0,s.useState)(null),[q,Y]=(0,s.useState)(""),[G,W]=(0,s.useState)(null),[K,X]=(0,s.useState)([]),[B,J]=(0,s.useState)(""),[Q,Z]=(0,s.useState)(null),[ee,et]=(0,s.useState)({id:"",name:"",location:"",latitude:"",longitude:"",radius:"200",managerName:"",managerContact:""}),[es,ea]=(0,s.useState)({productName:"",modelNumber:"",sku:"",price:"",quantity:"1",minStock:"5",category:"",subCategory:"",reason:"",notes:""});(0,s.useEffect)(()=>{el()},[]);let el=async()=>{E(!0);try{let e=await fetch(`/api/shops/list?t=${Date.now()}`),t=await e.json();d(Array.isArray(t)?t:t.data||[])}catch(e){console.error(e)}finally{E(!1)}},er=async e=>{try{let t=await fetch(`/api/shops/${e}/settings/categories`),s=await t.json();X(Array.isArray(s)?s:[])}catch(e){v.toast.error("Could not load taxonomy")}},eo=async e=>{V(!0),R(e),T("INVENTORY_VIEW"),Y(""),er(e);try{let t=await fetch(`/api/shops/${e}?t=${Date.now()}`),s=await t.json();D(s.inventory||s.products||[])}catch(e){D([]),v.toast.error("Failed to load ledger")}finally{V(!1)}},en=async()=>{if(!B.trim())return;let e=v.toast.loading("Saving...");try{let t=Q?{name:B,parentId:Q}:{name:B};if(!(await fetch(`/api/shops/${L}/settings/categories`,{method:"POST",body:JSON.stringify(t)})).ok)throw Error();J(""),Z(null),er(L),v.toast.success("Saved",{id:e})}catch(t){v.toast.error("Failed to save",{id:e})}},ei=async(e,t)=>{if(confirm("Delete this category? Items using it will look unsorted."))try{await fetch(`/api/shops/${L}/settings/categories`,{method:"DELETE",body:JSON.stringify({id:e,isSub:t})}),er(L),v.toast.success("Deleted")}catch{v.toast.error("Delete failed")}},ed=async e=>{if(e.preventDefault(),!L)return;let t=v.toast.loading("Syncing Ledger..."),s={id:F?H:void 0,productName:es.productName,modelNumber:es.modelNumber,sku:es.sku,priceGHS:es.price,quantity:es.quantity,minStock:es.minStock,category:es.category,subCategory:es.subCategory,reason:es.reason,description:es.notes};try{if((await fetch(`/api/shops/${L}`,{method:"POST",body:JSON.stringify(s)})).ok)v.toast.success("Success",{id:t}),eo(L),F||T("INVENTORY_VIEW"),ea({productName:"",modelNumber:"",sku:"",price:"",quantity:"1",minStock:"5",category:"",subCategory:"",reason:"",notes:""});else throw Error()}catch{v.toast.error("Transaction Failed",{id:t})}},ec=async e=>{if(confirm("Permanently delete this item?"))try{await fetch(`/api/shops/${L}`,{method:"DELETE",body:JSON.stringify({id:e,type:"INVENTORY"})}),D(t=>t.filter(t=>t.id!==e)),v.toast.success("Item Deleted")}catch{v.toast.error("Failed")}},eu=async e=>{e.preventDefault();let t=v.toast.loading(z?"Updating Hub...":"Configuring Hub...");try{if(z&&ee.id){if(!(await fetch(`/api/shops/${ee.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({...ee,radius:parseInt(ee.radius)})})).ok)throw Error("Update Failed");v.toast.success("Hub Updated",{id:t})}else{if(!(await fetch("/api/shops/list",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...ee,radius:parseInt(ee.radius)})})).ok)throw Error("Creation Failed");v.toast.success("Hub Active",{id:t})}T("NONE"),el()}catch{v.toast.error("Operation Failed",{id:t})}},ex=async(e,t)=>{if(!confirm(`⚠️ WARNING: You are about to dismantle hub "${t}".

ALL INVENTORY & SALES HISTORY WILL BE ERASED.

Proceed?`))return;let s=v.toast.loading("Dismantling...");try{if((await fetch(`/api/shops/${e}`,{method:"DELETE"})).ok)v.toast.success("Hub Dismantled",{id:s}),el();else throw Error()}catch{v.toast.error("Failed to delete",{id:s})}},em=e=>{U(e.id),$(!0),ea({productName:e.name||"",modelNumber:e.modelNumber||"",sku:e.barcode||"",price:(e.sellingPrice||0).toString(),quantity:(e.stockLevel||0).toString(),minStock:(e.minStock||5).toString(),category:e.category||"",subCategory:e.subCategory||"",reason:"",notes:e.description||""}),T("INVENTORY_FORM")},eb=e=>{e&&(R(e),er(e)),$(!1),ea({productName:"",modelNumber:"",sku:`SKU-${Math.floor(1e4*Math.random())}`,price:"",quantity:"1",minStock:"5",category:K.length>0?K[0].name:"",subCategory:K.length>0&&K[0].subCategories.length>0?K[0].subCategories[0].name:"",reason:"",notes:""}),T("INVENTORY_FORM")},ep=A.filter(e=>{let t=q.toLowerCase(),s=(e.name||"").toLowerCase(),a=(e.barcode||"").toLowerCase();return s.includes(t)||a.includes(t)});return(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50/50 p-6 md:p-10 font-sans text-slate-900",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:"Hub Command Center"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Manage operations, dynamic inventory, and taxonomy settings."})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:()=>O(!M),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-semibold border transition-all ${M?"bg-blue-50 text-blue-600 border-blue-200":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50"}`,children:[(0,t.jsx)(N.Map,{size:18})," ",M?"Hide Map":"Show Map"]}),(0,t.jsxs)("button",{onClick:()=>{I(!1),T("SHOP_FORM"),et({id:"",name:"",location:"",latitude:"",longitude:"",radius:"200",managerName:"",managerContact:""})},className:"flex items-center gap-2 bg-slate-900 text-white px-5 py-2.5 rounded-lg text-sm font-semibold hover:bg-slate-800 transition-all",children:[(0,t.jsx)(l.Plus,{size:18})," Register Hub"]})]})]}),M&&(0,t.jsxs)("div",{className:"h-[400px] w-full relative z-0 rounded-2xl overflow-hidden shadow-sm border border-slate-200 animate-in fade-in slide-in-from-top-4 duration-500",children:[(0,t.jsx)(C,{shops:e}),(0,t.jsx)("div",{className:"absolute bottom-4 left-4 z-[400] bg-white/90 backdrop-blur px-4 py-2 rounded-lg border border-slate-200 shadow-md",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-600",children:"Satellite Live"})]})})]}),w?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 gap-3",children:[(0,t.jsx)(i.Loader2,{className:"animate-spin text-blue-600",size:32}),(0,t.jsx)("p",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:"Loading Network..."})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-white border border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-lg transition-all group relative overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-slate-100 rounded-lg flex items-center justify-center text-lg font-bold text-slate-700 uppercase",children:e.name.charAt(0)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-slate-900",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-1 text-xs font-medium text-slate-500",children:[(0,t.jsx)(a.MapPin,{size:12})," ",e.location]})]})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("button",{onClick:()=>{et({id:e.id,name:e.name||"",location:e.location||"",latitude:(e.latitude||0).toString(),longitude:(e.longitude||0).toString(),radius:(e.radius||200).toString(),managerName:e.managerName||"",managerContact:e.managerContact||""}),I(!0),T("SHOP_FORM")},className:"p-2 hover:bg-amber-50 text-slate-400 hover:text-amber-600 rounded-lg transition-colors",title:"Edit Details",children:(0,t.jsx)(o.Edit2,{size:16})}),(0,t.jsx)("button",{onClick:()=>{var t;R(t=e.id),er(t),T("SETTINGS")},className:"p-2 hover:bg-blue-50 text-slate-400 hover:text-blue-600 rounded-lg transition-colors",title:"Manage Categories",children:(0,t.jsx)(h.Settings,{size:16})}),(0,t.jsx)("button",{onClick:()=>ex(e.id,e.name),className:"p-2 hover:bg-rose-50 text-slate-400 hover:text-rose-600 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)(u.Trash2,{size:16})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[(0,t.jsxs)("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-100",children:[(0,t.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Geofence"}),(0,t.jsxs)("p",{className:"text-sm font-semibold text-slate-900",children:[e.radius,"m"]})]}),(0,t.jsxs)("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-100",children:[(0,t.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"SKUs"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:e._count?.inventory||e.inventoryCount||0})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>eb(e.id),className:"flex-1 py-2 px-3 border border-slate-200 rounded-lg text-xs font-bold text-slate-600 hover:bg-slate-50 uppercase tracking-wide",children:"+ Add Stock"}),(0,t.jsxs)("button",{onClick:()=>eo(e.id),className:"flex-1 py-2 px-3 bg-slate-900 text-white rounded-lg text-xs font-bold uppercase tracking-wide hover:bg-blue-600 flex items-center justify-center gap-2",children:["Inventory ",(0,t.jsx)(m,{size:12})]})]})]},e.id))})]}),"SETTINGS"===P&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-2xl rounded-2xl p-8 shadow-2xl animate-in zoom-in-95 h-[75vh] flex flex-col",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6 border-b border-slate-100 pb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-xl text-slate-900",children:"Taxonomy Settings"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Define your own product categories and sub-categories."})]}),(0,t.jsx)("button",{onClick:()=>T("NONE"),children:(0,t.jsx)(n.X,{className:"text-slate-400 hover:text-rose-600 transition-colors"})})]}),(0,t.jsxs)("div",{className:"flex gap-2 mb-6 p-1",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(g,{className:"absolute left-3 top-2.5 text-slate-400",size:16}),(0,t.jsx)("input",{className:"w-full bg-slate-50 border border-slate-200 rounded-lg pl-10 pr-4 py-2 text-sm outline-none focus:border-blue-500 focus:bg-white transition-all",placeholder:Q?"Enter Sub-Category Name...":"Enter Main Category Name...",value:B,onChange:e=>J(e.target.value),onKeyDown:e=>"Enter"===e.key&&en()})]}),Q&&(0,t.jsx)("button",{onClick:()=>Z(null),className:"px-4 py-2 text-xs font-bold text-slate-500 bg-white border border-slate-200 rounded-lg hover:bg-slate-50",children:"Cancel Sub"}),(0,t.jsx)("button",{onClick:en,className:"px-6 py-2 bg-blue-600 text-white text-xs font-bold uppercase rounded-lg hover:bg-blue-700 shadow-md transition-all",children:Q?"Add Sub":"Add Root"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto pr-2 space-y-3",children:0===K.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-40 text-slate-400 border-2 border-dashed border-slate-100 rounded-xl",children:[(0,t.jsx)(y,{size:32,className:"mb-2 opacity-50"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"No Categories Defined"}),(0,t.jsx)("p",{className:"text-xs",children:"Add a root category to get started."})]}):K.map(e=>(0,t.jsxs)("div",{className:"border border-slate-200 rounded-xl overflow-hidden shadow-sm",children:[(0,t.jsxs)("div",{className:"bg-white p-3 flex justify-between items-center group",children:[(0,t.jsxs)("span",{className:"font-bold text-sm text-slate-800 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-6 h-6 bg-blue-50 text-blue-600 rounded flex items-center justify-center text-xs font-bold",children:e.name.charAt(0)}),e.name]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>Z(e.id),className:"text-[10px] font-bold uppercase bg-slate-50 text-slate-600 px-3 py-1.5 rounded hover:bg-blue-50 hover:text-blue-600 transition-colors border border-slate-200",children:"+ Sub"}),(0,t.jsx)("button",{onClick:()=>ei(e.id,!1),className:"p-1.5 text-slate-300 hover:text-rose-600 hover:bg-rose-50 rounded transition-colors",children:(0,t.jsx)(u.Trash2,{size:14})})]})]}),e.subCategories.length>0&&(0,t.jsx)("div",{className:"bg-slate-50 p-2 pl-4 space-y-1 border-t border-slate-100",children:e.subCategories.map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center px-3 py-2 rounded-lg hover:bg-white transition-colors group/sub",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2 text-xs font-medium text-slate-600",children:[(0,t.jsx)(f.ChevronRight,{size:12,className:"text-slate-300"})," ",e.name]}),(0,t.jsx)("button",{onClick:()=>ei(e.id,!0),className:"text-slate-300 hover:text-rose-600 opacity-0 group-hover/sub:opacity-100 transition-opacity",children:(0,t.jsx)(u.Trash2,{size:12})})]},e.id))})]},e.id))})]})}),"INVENTORY_FORM"===P&&(0,t.jsx)("div",{className:"fixed inset-0 z-[60] bg-slate-900/40 backdrop-blur-sm flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-2xl rounded-2xl p-8 shadow-2xl animate-in fade-in zoom-in-95 max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6 border-b border-slate-100 pb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-xl text-slate-900",children:F?"Edit Product":"Add Inventory"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 font-medium",children:"Detailed product specification and tracking."})]}),(0,t.jsx)("button",{onClick:()=>T("INVENTORY_VIEW"),className:"text-slate-400 hover:text-rose-600",children:(0,t.jsx)(n.X,{})})]}),(0,t.jsxs)("form",{onSubmit:ed,className:"space-y-5",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 block",children:"Category"}),(0,t.jsxs)("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:bg-white focus:border-blue-500 outline-none transition-all",value:es.category,onChange:e=>{let t=e.target.value,s=K.find(e=>e.name===t),a=s&&s.subCategories.length>0?s.subCategories[0].name:"";ea({...es,category:t,subCategory:a})},children:[(0,t.jsx)("option",{value:"",children:"Select Category..."}),K.map(e=>(0,t.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 block",children:"Sub-Category"}),(0,t.jsxs)("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:bg-white focus:border-blue-500 outline-none transition-all",value:es.subCategory,onChange:e=>ea({...es,subCategory:e.target.value}),disabled:!es.category,children:[(0,t.jsx)("option",{value:"",children:"Select Sub-Category..."}),K.find(e=>e.name===es.category)?.subCategories.map(e=>(0,t.jsx)("option",{value:e.name,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 block",children:"Product Name"}),(0,t.jsx)("input",{className:"w-full p-3 border border-slate-200 rounded-lg text-sm focus:border-blue-500 outline-none",placeholder:"e.g. Samsung OLED TV",value:es.productName,onChange:e=>ea({...es,productName:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 block",children:"Model Number"}),(0,t.jsx)("input",{className:"w-full p-3 border border-slate-200 rounded-lg text-sm focus:border-blue-500 outline-none",placeholder:"e.g. QA65S90CAUXZN",value:es.modelNumber,onChange:e=>ea({...es,modelNumber:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 block",children:"Serial No. / Barcode"}),(0,t.jsx)("input",{className:"w-full p-3 border border-slate-200 rounded-lg text-sm font-mono focus:border-blue-500 outline-none",placeholder:"Scan...",value:es.sku,onChange:e=>ea({...es,sku:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 block",children:"Unit Price (GHS)"}),(0,t.jsx)("input",{type:"number",className:"w-full p-3 border border-slate-200 rounded-lg text-sm font-mono focus:border-blue-500 outline-none",placeholder:"0.00",value:es.price,onChange:e=>ea({...es,price:e.target.value}),required:!0})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 block",children:"Quantity"}),(0,t.jsx)("input",{type:"number",className:"w-full p-3 border border-slate-200 rounded-lg text-sm focus:border-blue-500 outline-none",placeholder:"0",value:es.quantity,onChange:e=>ea({...es,quantity:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 block",children:"Low Stock Alert"}),(0,t.jsx)("input",{type:"number",className:"w-full p-3 border border-slate-200 rounded-lg text-sm focus:border-blue-500 outline-none",placeholder:"5",value:es.minStock,onChange:e=>ea({...es,minStock:e.target.value})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5 block",children:"Specifications / Notes"}),(0,t.jsx)("textarea",{className:"w-full p-3 border border-slate-200 rounded-lg text-sm h-24 resize-none focus:border-blue-500 outline-none",placeholder:"Enter specs, dimensions, or internal notes...",value:es.notes,onChange:e=>ea({...es,notes:e.target.value})})]}),(0,t.jsx)("button",{type:"submit",className:"w-full py-3.5 bg-slate-900 text-white rounded-xl font-bold text-sm uppercase tracking-wide hover:bg-blue-600 shadow-md transition-all",children:F?"Update Product":"Add to Inventory"})]})]})}),"INVENTORY_VIEW"===P&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-5xl h-[85vh] rounded-2xl flex flex-col shadow-2xl animate-in zoom-in-95",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50 rounded-t-2xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-white border border-slate-200 rounded-lg shadow-sm",children:(0,t.jsx)(r.Package,{className:"text-blue-600",size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-slate-900",children:"Inventory Ledger"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"Click any row to view full details."})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(p.Search,{className:"absolute left-3 top-2.5 text-slate-400",size:14}),(0,t.jsx)("input",{type:"text",placeholder:"Search SKU, Name...",className:"pl-9 pr-4 py-2 border border-slate-200 rounded-lg text-sm outline-none focus:border-blue-500 w-64",value:q,onChange:e=>Y(e.target.value)})]}),(0,t.jsxs)("button",{onClick:()=>(t=>{try{let s=new k.default;s.setFontSize(18),s.setFont("helvetica","bold"),s.text("INVENTORY LEDGER",14,20),s.setFontSize(10),s.setFont("helvetica","normal"),s.text(`Generated: ${new Date().toLocaleString()}`,14,26);let a=e.find(e=>e.id===t)?.name||"Unknown Shop";s.text(`Shop: ${a} (${t.substring(0,8).toUpperCase()})`,14,31);let l=A.map(e=>[e.name||"N/A",e.modelNumber||"-",`${e.category||"General"} / ${e.subCategory||"Unsorted"}`,e.sellingPrice?.toLocaleString()||"0",e.stockLevel?.toString()||"0"]);(0,S.default)(s,{head:[["Product","Model","Category","Price (GHS)","Stock"]],body:l,startY:38,styles:{fontSize:9,cellPadding:3},headStyles:{fillColor:[15,23,42],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[248,250,252]},theme:"grid"}),s.save(`Inventory_${t}_${new Date().toISOString().split("T")[0]}.pdf`),v.toast.success("PDF Downloaded Successfully")}catch(e){console.error(e),v.toast.error("Failed to generate PDF")}})(L),className:"flex items-center gap-2 px-3 py-2 bg-slate-100 text-slate-700 text-xs font-bold uppercase rounded-lg hover:bg-slate-200",children:[(0,t.jsx)(j.FileText,{size:14})," PDF"]}),(0,t.jsx)("button",{onClick:()=>T("NONE"),children:(0,t.jsx)(n.X,{className:"text-slate-400 hover:text-rose-600"})})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto bg-slate-50/30 p-6",children:0===ep.length?(0,t.jsx)("div",{className:"text-center text-slate-400 py-20",children:"No items found."}):(0,t.jsx)("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden shadow-sm",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{className:"bg-slate-50 border-b border-slate-100 text-[11px] font-bold text-slate-500 uppercase tracking-wider",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3",children:"Item Details"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"Model No."}),(0,t.jsx)("th",{className:"px-6 py-3",children:"Category"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right",children:"Price"}),(0,t.jsx)("th",{className:"px-6 py-3 text-center",children:"Stock"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right",children:"Action"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-100 text-sm",children:ep.map(e=>{let s=(e.stockLevel||0)<=(e.minStock||5);return(0,t.jsxs)("tr",{onClick:()=>{W(e),T("DETAIL_VIEW")},className:"hover:bg-blue-50/50 cursor-pointer group transition-colors",children:[(0,t.jsxs)("td",{className:"px-6 py-4",children:[(0,t.jsx)("p",{className:"font-bold text-slate-900",children:e.name}),(0,t.jsx)("p",{className:"text-xs font-mono text-slate-400",children:e.barcode||"No SKU"})]}),(0,t.jsx)("td",{className:"px-6 py-4 text-xs font-mono text-slate-500",children:e.modelNumber||"-"}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("span",{className:"inline-flex flex-col",children:[(0,t.jsx)("span",{className:"font-bold text-slate-700 text-xs",children:e.subCategory}),(0,t.jsx)("span",{className:"text-[10px] text-slate-400 uppercase",children:e.category})]})}),(0,t.jsxs)("td",{className:"px-6 py-4 text-right font-mono font-bold text-slate-700",children:["₵",e.sellingPrice?.toLocaleString()]}),(0,t.jsx)("td",{className:"px-6 py-4 text-center",children:(0,t.jsx)("span",{className:`inline-flex px-2 py-1 rounded text-xs font-bold ${s?"bg-rose-100 text-rose-600":"bg-emerald-100 text-emerald-600"}`,children:e.stockLevel})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),em(e)},className:"p-2 hover:bg-white border border-transparent hover:border-slate-200 text-blue-600 rounded shadow-sm opacity-0 group-hover:opacity-100 transition-all",children:(0,t.jsx)(o.Edit2,{size:14})})})]},e.id)})})]})})}),(0,t.jsx)("div",{className:"p-5 border-t border-slate-100 flex justify-end bg-slate-50/50",children:(0,t.jsxs)("button",{onClick:()=>eb(L),className:"bg-slate-900 text-white px-6 py-3 rounded-xl text-xs font-bold uppercase hover:bg-blue-700 flex gap-2 shadow-lg transition-all",children:[(0,t.jsx)(c,{size:16})," Add Goods"]})})]})}),"DETAIL_VIEW"===P&&G&&(0,t.jsx)("div",{className:"fixed inset-0 z-[70] bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 shadow-2xl animate-in zoom-in-95",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6 border-b border-slate-100 pb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-black text-slate-900",children:G.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)("span",{className:"px-2 py-0.5 bg-slate-100 rounded text-[10px] font-mono text-slate-500 uppercase tracking-wide",children:G.barcode||"NO SKU"}),(0,t.jsxs)("span",{className:"text-xs text-slate-400 font-medium",children:["| ",G.modelNumber||"No Model #"]})]})]}),(0,t.jsx)("button",{onClick:()=>T("INVENTORY_VIEW"),children:(0,t.jsx)(n.X,{className:"text-slate-400 hover:text-slate-900"})})]}),(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100 text-center",children:[(0,t.jsx)("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-1",children:"Selling Price"}),(0,t.jsxs)("p",{className:"text-xl font-mono font-black text-slate-900",children:["₵",G.sellingPrice?.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100 text-center",children:[(0,t.jsx)("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-1",children:"Available Stock"}),(0,t.jsx)("p",{className:"text-xl font-black text-slate-900",children:G.stockLevel})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-slate-400 font-bold uppercase mb-2",children:"Category Taxonomy"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 bg-blue-50 px-3 py-2 rounded-lg border border-blue-100",children:[(0,t.jsx)(g,{size:14,className:"text-blue-500"}),G.category," ",(0,t.jsx)(f.ChevronRight,{size:12,className:"text-slate-400"})," ",G.subCategory]})]}),G.description&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-slate-400 font-bold uppercase mb-2",children:"Specification / Notes"}),(0,t.jsx)("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100 text-sm text-slate-600 leading-relaxed whitespace-pre-wrap max-h-40 overflow-y-auto",children:G.description})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 mt-8",children:[(0,t.jsx)("button",{onClick:()=>ec(G.id),className:"p-3 text-rose-500 hover:bg-rose-50 rounded-xl transition-colors border border-slate-100",children:(0,t.jsx)(u.Trash2,{size:18})}),(0,t.jsx)("button",{onClick:()=>{T("INVENTORY_VIEW"),em(G)},className:"flex-1 bg-slate-900 text-white rounded-xl font-bold text-sm hover:bg-blue-600 transition-all shadow-lg",children:"Edit Details"})]})]})}),"SHOP_FORM"===P&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-slate-900/40 backdrop-blur-sm flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-xl rounded-2xl p-8 shadow-2xl animate-in fade-in zoom-in-95",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-lg text-slate-900",children:z?"Edit Hub Details":"Register New Hub"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Define operational coordinates and identity."})]}),(0,t.jsx)("button",{onClick:()=>T("NONE"),className:"text-slate-400 hover:text-rose-600 transition-colors",children:(0,t.jsx)(n.X,{})})]}),(0,t.jsxs)("form",{onSubmit:eu,className:"space-y-4",children:[(0,t.jsx)("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-lg text-sm focus:border-blue-500 outline-none",placeholder:"Hub Name",value:ee.name,onChange:e=>et({...ee,name:e.target.value}),required:!0}),(0,t.jsx)("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-lg text-sm focus:border-blue-500 outline-none",placeholder:"Location Description",value:ee.location,onChange:e=>et({...ee,location:e.target.value}),required:!0}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-lg text-sm focus:border-blue-500 outline-none",placeholder:"Manager Name",value:ee.managerName,onChange:e=>et({...ee,managerName:e.target.value})}),(0,t.jsx)("input",{className:"w-full p-3 bg-white border border-slate-200 rounded-lg text-sm focus:border-blue-500 outline-none",placeholder:"Manager Contact",value:ee.managerContact,onChange:e=>et({...ee,managerContact:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.Navigation,{size:14,className:"absolute left-3 top-3.5 text-slate-400"}),(0,t.jsx)("input",{className:"w-full p-3 pl-9 bg-white border border-slate-200 rounded-lg text-sm focus:border-blue-500 outline-none font-mono",placeholder:"Latitude",value:ee.latitude,onChange:e=>et({...ee,latitude:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.Navigation,{size:14,className:"absolute left-3 top-3.5 text-slate-400"}),(0,t.jsx)("input",{className:"w-full p-3 pl-9 bg-white border border-slate-200 rounded-lg text-sm focus:border-blue-500 outline-none font-mono",placeholder:"Longitude",value:ee.longitude,onChange:e=>et({...ee,longitude:e.target.value}),required:!0})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-blue-50/50 rounded-lg border border-blue-100",children:[(0,t.jsx)(b.ShieldCheck,{className:"text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block",children:"Geofence Radius (Meters)"}),(0,t.jsx)("input",{className:"w-full bg-transparent text-sm font-bold text-slate-900 border-none focus:ring-0 p-0 placeholder-slate-400",placeholder:"200",value:ee.radius,onChange:e=>et({...ee,radius:e.target.value})})]})]}),(0,t.jsx)("button",{type:"submit",className:"w-full py-3.5 bg-slate-900 text-white rounded-xl font-bold text-sm uppercase tracking-wide hover:bg-blue-600 transition-all shadow-md mt-4",children:z?"Save Changes":"Create Hub"})]})]})})]})}e.s(["default",()=>E],32171)},66997,e=>{e.v(t=>Promise.all(["static/chunks/76b77f6501132066.js"].map(t=>e.l(t))).then(()=>t(21487)))},95732,e=>{e.v(t=>Promise.all(["static/chunks/68cc869507618dac.js"].map(t=>e.l(t))).then(()=>t(1983)))},23548,e=>{e.v(t=>Promise.all(["static/chunks/2fa17d85472e239d.js"].map(t=>e.l(t))).then(()=>t(29685)))},3339,e=>{e.v(t=>Promise.all(["static/chunks/9763dc6814118d3a.js","static/chunks/6a82c09376b9bd76.js","static/chunks/076efda0d0cae75b.css"].map(t=>e.l(t))).then(()=>t(9887)))}]);