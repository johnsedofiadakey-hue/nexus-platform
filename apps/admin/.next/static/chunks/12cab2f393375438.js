(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94365,e=>{"use strict";let t=(0,e.i(3645).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],94365)},38518,e=>{"use strict";let t=(0,e.i(3645).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],38518)},1603,e=>{"use strict";let t=(0,e.i(3645).default)("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);e.s(["ShieldAlert",()=>t],1603)},90663,e=>{"use strict";var t=e.i(87433),a=e.i(44440);let s=(0,e.i(3645).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var l=e.i(11485),r=e.i(38518),i=e.i(98701),n=e.i(94365),o=e.i(1603),d=e.i(76016),c=e.i(83428),m=e.i(98992),x=e.i(62924);function h(){let e=(0,x.useRouter)(),h=(0,a.useRef)(null),[b,g]=(0,a.useState)(1),[f,N]=(0,a.useState)(!1),[j,v]=(0,a.useState)(!1),[y,w]=(0,a.useState)([]),[k,C]=(0,a.useState)({name:"",email:"",phone:"",role:"WORKER",shopId:"",password:"nexus_password_2026",ghanaCard:"",dob:"",image:"",bankAccountName:"",bankName:"",bankAccountNumber:"",ssnitNumber:"",commencementDate:""});(0,a.useEffect)(()=>{!async function(){try{let e=await fetch("/api/shops/list"),t=await e.json();w(Array.isArray(t)?t:t.data||[])}catch(e){w([])}}()},[]);let S=async e=>{if(e.preventDefault(),!k.shopId){m.toast.error("Sector Assignment Required"),g(2);return}N(!0);try{let e=null;if(k.dob){let t=new Date(k.dob);isNaN(t.getTime())||(e=t.toISOString())}let t={...k,dob:e,email:k.email.toLowerCase().trim(),shopId:k.shopId||null},a=await fetch("/api/hr/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await a.json();a.ok?(v(!0),m.toast.success("Personnel Uplink Established")):(console.error("ðŸ ENROLLMENT_TERMINAL_REJECTION:",s),m.toast.error(s.error||"Uplink Rejected by Terminal. Cross-check access credentials."))}catch(e){console.error("ðŸš¨ ENROLLMENT_NETWORK_CRITICAL:",e),m.toast.error(`Connection Error: ${e.message||"Shield Breach Detected"}`)}finally{N(!1)}},A=(0,a.useMemo)(()=>y.find(e=>e.id===k.shopId)?.name||"Unassigned",[k.shopId,y]);return j?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center animate-in fade-in zoom-in duration-500 p-12 bg-white rounded-xl border border-slate-200 shadow-sm m-6",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-slate-900 rounded-full flex items-center justify-center mb-6",children:(0,t.jsx)(l.CheckCircle,{className:"w-8 h-8 text-white"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Registration Successful"}),(0,t.jsxs)("p",{className:"text-slate-500 mt-2 max-w-sm mx-auto",children:["Agent ",k.name," has been enrolled and synced with the ",A," hub."]}),(0,t.jsx)("button",{onClick:()=>e.push("/dashboard/hr"),className:"mt-8 px-8 py-3 bg-slate-900 text-white rounded-lg font-semibold text-sm hover:bg-slate-800 transition-all active:scale-95",children:"Return to Team Management"})]}):(0,t.jsxs)("div",{className:"max-w-5xl mx-auto py-12 px-6 animate-in fade-in duration-700",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-12 border-b border-slate-200 pb-8 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:()=>e.back(),className:"group flex items-center gap-2 text-xs font-semibold text-slate-400 hover:text-slate-900 mb-3 transition-colors",children:[(0,t.jsx)(r.ArrowLeft,{className:"w-3 h-3"})," Back to Directory"]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Enroll New Personnel"}),(0,t.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"Initialize secure agent credentials for hub deployment."})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:[1,2,3,4].map(e=>(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border transition-all ${b===e?"bg-slate-900 border-slate-900 text-white":b>e?"bg-slate-100 border-slate-200 text-slate-500":"bg-white border-slate-200 text-slate-300"}`,children:b>e?(0,t.jsx)(l.CheckCircle,{className:"w-4 h-4"}):e}),e<4&&(0,t.jsx)("div",{className:`w-6 h-[2px] mx-1 ${b>e?"bg-slate-900":"bg-slate-100"}`})]},e))})]}),(0,t.jsxs)("form",{onSubmit:S,className:"grid grid-cols-1 lg:grid-cols-12 gap-12",children:[(0,t.jsxs)("div",{className:"lg:col-span-8 space-y-10",children:[1===b&&(0,t.jsxs)("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-4 duration-500",children:[(0,t.jsxs)("div",{className:"flex items-start gap-8",children:[(0,t.jsxs)("div",{className:"relative group shrink-0",children:[(0,t.jsx)("div",{className:"w-32 h-32 rounded-xl bg-slate-50 border border-slate-200 flex items-center justify-center cursor-pointer hover:bg-slate-100 transition-all overflow-hidden shadow-inner",onClick:()=>h.current?.click(),children:k.image?(0,t.jsx)("img",{src:k.image,alt:"Agent",className:"w-full h-full object-cover"}):(0,t.jsx)(s,{className:"w-6 h-6 text-slate-300"})}),(0,t.jsx)("input",{type:"file",ref:h,className:"hidden",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>2097152)return void m.toast.error("Security Scan Failed: File too large (Max 2MB)");let e=new FileReader;e.onloadend=()=>{C(t=>({...t,image:e.result})),m.toast.success("Biometric Scan Ready")},e.readAsDataURL(t)}}})]}),(0,t.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,t.jsx)("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider",children:"Profile Identification"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 leading-relaxed max-w-xs",children:"Upload a professional headshot. This biometric data is used for secure terminal authentication."}),(0,t.jsx)("button",{type:"button",onClick:()=>h.current?.click(),className:"text-[10px] font-bold text-blue-600 hover:text-blue-700 uppercase tracking-widest mt-2 block",children:k.image?"Change Photo":"Upload Image"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 pt-4",children:[(0,t.jsx)(u,{label:"Full Name",value:k.name,onChange:e=>C({...k,name:e}),placeholder:"e.g. John Doe"}),(0,t.jsx)(u,{label:"Corporate Email",type:"email",value:k.email,onChange:e=>C({...k,email:e}),placeholder:"j.doe@nexus.com"}),(0,t.jsx)(u,{label:"Ghana Card PIN",value:k.ghanaCard,onChange:e=>C({...k,ghanaCard:e}),placeholder:"GHA-000000000-0"}),(0,t.jsx)(u,{label:"Date of Birth",type:"date",value:k.dob,onChange:e=>C({...k,dob:e})}),(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsx)(u,{label:"Contact Number",value:k.phone,onChange:e=>C({...k,phone:e}),placeholder:"+233..."})})]})]}),2===b&&(0,t.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Assigned Hub"}),(0,t.jsxs)("select",{required:!0,className:"w-full h-11 px-4 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-900 focus:ring-2 ring-slate-900/5 focus:border-slate-900 transition-all outline-none",value:k.shopId,onChange:e=>C({...k,shopId:e.target.value}),children:[(0,t.jsx)("option",{value:"",children:"Select Operational Hub"}),y.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Deployment Role"}),(0,t.jsxs)("select",{required:!0,className:"w-full h-11 px-4 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-900 focus:ring-2 ring-slate-900/5 focus:border-slate-900 transition-all outline-none",value:k.role,onChange:e=>C({...k,role:e.target.value}),children:[(0,t.jsx)("option",{value:"WORKER",children:"Standard Agent (POS)"}),(0,t.jsx)("option",{value:"ADMIN",children:"System Administrator"}),(0,t.jsx)("option",{value:"SUPER_ADMIN",children:"Executive HQ"})]})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg flex gap-3 items-center",children:[(0,t.jsx)(i.ShieldCheck,{className:"text-slate-400 w-4 h-4"}),(0,t.jsx)("p",{className:"text-[11px] text-slate-500 font-medium",children:"Role assignment dictates geofencing restrictions and terminal permissions."})]})]}),3===b&&(0,t.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[(0,t.jsxs)("div",{className:"bg-slate-50 p-6 rounded-lg border border-slate-200",children:[(0,t.jsx)("h4",{className:"text-sm font-bold text-slate-900 border-b border-slate-200 pb-3 mb-4",children:"Banking Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)(u,{label:"Bank Name",value:k.bankName,onChange:e=>C({...k,bankName:e}),placeholder:"e.g. EcoBank"}),(0,t.jsx)(u,{label:"Account Number",value:k.bankAccountNumber,onChange:e=>C({...k,bankAccountNumber:e}),placeholder:"0000000000"}),(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsx)(u,{label:"Account Name",value:k.bankAccountName,onChange:e=>C({...k,bankAccountName:e}),placeholder:"Name on Account"})})]})]}),(0,t.jsxs)("div",{className:"bg-slate-50 p-6 rounded-lg border border-slate-200",children:[(0,t.jsx)("h4",{className:"text-sm font-bold text-slate-900 border-b border-slate-200 pb-3 mb-4",children:"Statutory Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)(u,{label:"SSNIT Number",value:k.ssnitNumber,onChange:e=>C({...k,ssnitNumber:e}),placeholder:"SSNIT #"}),(0,t.jsx)(u,{label:"Commencement Date",type:"date",value:k.commencementDate,onChange:e=>C({...k,commencementDate:e})})]})]})]}),4===b&&(0,t.jsx)("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:(0,t.jsxs)("div",{className:"bg-slate-50 p-6 rounded-lg border border-slate-200",children:[(0,t.jsx)("h4",{className:"text-sm font-bold text-slate-900",children:"Security Credentials"}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"This key will be required for the agent's first terminal initialization."}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(u,{label:"Access Password",value:k.password,onChange:e=>C({...k,password:e}),type:"text"})})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between border-t border-slate-100 pt-8",children:[(0,t.jsx)("button",{type:"button",onClick:()=>b>1&&g(b-1),className:`text-xs font-bold text-slate-400 hover:text-slate-900 uppercase tracking-widest transition-all ${1===b?"opacity-0":"opacity-100"}`,children:"Go Back"}),(0,t.jsxs)("button",{type:4===b?"submit":"button",onClick:()=>b<4&&g(b+1),disabled:f,className:"flex items-center gap-2 px-8 py-3 bg-slate-900 text-white rounded-lg font-bold text-xs uppercase tracking-widest hover:bg-slate-800 transition-all disabled:opacity-50",children:[f?(0,t.jsx)(c.Loader2,{className:"w-4 h-4 animate-spin"}):4===b?"Confirm Enrollment":"Continue",b<4&&(0,t.jsx)(d.ChevronRight,{className:"w-4 h-4"})]})]})]}),(0,t.jsx)("div",{className:"lg:col-span-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-8 shadow-sm sticky top-10",children:[(0,t.jsx)("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-[0.15em] mb-8",children:"Enrollment Summary"}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,t.jsx)("div",{className:"w-14 h-14 bg-slate-50 rounded-lg border border-slate-100 flex items-center justify-center overflow-hidden",children:k.image?(0,t.jsx)("img",{src:k.image,className:"w-full h-full object-cover"}):(0,t.jsx)(n.User,{className:"text-slate-200 w-6 h-6"})}),(0,t.jsxs)("div",{className:"overflow-hidden",children:[(0,t.jsx)("p",{className:"text-sm font-bold text-slate-900 truncate",children:k.name||"New Personnel"}),(0,t.jsx)("p",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wide truncate",children:k.role})]})]}),(0,t.jsxs)("div",{className:"space-y-4 pt-4 border-t border-slate-100",children:[(0,t.jsx)(p,{label:"Sector",value:A}),(0,t.jsx)(p,{label:"Verification",value:k.ghanaCard?"Validated":"Pending"}),(0,t.jsx)(p,{label:"Signal Status",value:k.phone?"Link Ready":"Awaiting"})]}),(0,t.jsxs)("div",{className:"mt-8 pt-8 border-t border-slate-100 flex gap-2 items-start opacity-60",children:[(0,t.jsx)(o.ShieldAlert,{className:"w-3 h-3 text-slate-400 mt-0.5"}),(0,t.jsx)("p",{className:"text-[9px] font-medium text-slate-500 uppercase tracking-tighter leading-tight",children:"Data is encrypted and synced with the central Nexus operative database."})]})]})})]})]})}function u({label:e,value:a,onChange:s,placeholder:l="",type:r="text"}){return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:e}),(0,t.jsx)("input",{required:!0,type:r,placeholder:l,className:"w-full h-11 px-4 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-900 focus:ring-2 ring-slate-900/5 focus:border-slate-900 transition-all outline-none placeholder:text-slate-300 shadow-sm",value:a,onChange:e=>s(e.target.value)})]})}function p({label:e,value:a}){return(0,t.jsxs)("div",{className:"flex justify-between items-center text-[11px]",children:[(0,t.jsx)("span",{className:"font-semibold text-slate-400 uppercase tracking-tighter",children:e}),(0,t.jsx)("span",{className:"font-bold text-slate-900",children:a})]})}e.s(["default",()=>h],90663)}]);