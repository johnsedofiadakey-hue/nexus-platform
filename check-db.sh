#!/bin/bash

# ğŸ” Check Your Existing Database Connection

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  ğŸ“Š EXISTING DATABASE CONNECTION CHECK            â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo "Your .env file currently has a TEMPLATE URL:"
grep "^DATABASE_URL=" .env 2>/dev/null | sed 's/DATABASE_URL=/  â†’ /'
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ“ To connect your existing PostgreSQL database:"
echo ""
echo "1. Locate your real database connection string"
echo "   It should look like:"
echo "   postgresql://user:password@host.com:5432/dbname"
echo ""
echo "2. Replace the template in .env with your actual URL:"
echo "   $ nano .env"
echo "   (or use any text editor)"
echo ""
echo "3. Save the file and test the connection:"
echo "   $ npx prisma db execute --stdin <<< \"SELECT 1;\""
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "â“ Where to find your database URL:"
echo ""
echo "If you're using:"
echo "  â€¢ Supabase: Settings â†’ Database â†’ Connection String"
echo "  â€¢ Neon: Dashboard â†’ Connection Details"  
echo "  â€¢ Railway: Database â†’ Variables â†’ DATABASE_URL"
echo "  â€¢ Vercel: Storage â†’ Database â†’ .env.local"
echo "  â€¢ Heroku: Settings â†’ Config Vars â†’ DATABASE_URL"
echo "  â€¢ Local: postgresql://postgres:yourpassword@localhost:5432/nexus_platform"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ’¡ QUICK TEST:"
echo ""
echo "If you have your database URL, test it directly:"
echo ""
echo "  export DATABASE_URL=\"your-real-database-url-here\""
echo "  npx prisma db execute --stdin <<< \"SELECT 1;\""
echo ""
echo "If it says 'Executed successfully' â†’ Add it to .env"
echo "If it fails â†’ Check the URL is correct"
echo ""
